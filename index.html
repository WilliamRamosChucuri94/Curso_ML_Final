<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Econ. William Ramos">

<title>Análisis del Precio del Oro</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="Curso_ML_Final_files/libs/clipboard/clipboard.min.js"></script>
<script src="Curso_ML_Final_files/libs/quarto-html/quarto.js"></script>
<script src="Curso_ML_Final_files/libs/quarto-html/popper.min.js"></script>
<script src="Curso_ML_Final_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Curso_ML_Final_files/libs/quarto-html/anchor.min.js"></script>
<link href="Curso_ML_Final_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Curso_ML_Final_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Curso_ML_Final_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Curso_ML_Final_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Curso_ML_Final_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#unidad-1.-reporting-con-quarto" id="toc-unidad-1.-reporting-con-quarto" class="nav-link active" data-scroll-target="#unidad-1.-reporting-con-quarto"><span class="header-section-number">1</span> <strong>Unidad 1. Reporting con Quarto</strong></a>
  <ul class="collapse">
  <li><a href="#qué-es-quarto" id="toc-qué-es-quarto" class="nav-link" data-scroll-target="#qué-es-quarto"><span class="header-section-number">1.1</span> ¿Qué es Quarto?</a></li>
  <li><a href="#librerias-a-utilizar" id="toc-librerias-a-utilizar" class="nav-link" data-scroll-target="#librerias-a-utilizar"><span class="header-section-number">1.2</span> Librerias a utilizar</a></li>
  <li><a href="#qué-es-el-yaml" id="toc-qué-es-el-yaml" class="nav-link" data-scroll-target="#qué-es-el-yaml"><span class="header-section-number">1.3</span> ¿Qué es el YAML?</a></li>
  <li><a href="#información-general-del-documento" id="toc-información-general-del-documento" class="nav-link" data-scroll-target="#información-general-del-documento"><span class="header-section-number">1.4</span> Información general del documento</a></li>
  <li><a href="#formatos-de-salida" id="toc-formatos-de-salida" class="nav-link" data-scroll-target="#formatos-de-salida"><span class="header-section-number">1.5</span> Formatos de salida</a></li>
  <li><a href="#chunk-setup" id="toc-chunk-setup" class="nav-link" data-scroll-target="#chunk-setup"><span class="header-section-number">1.6</span> Chunk setup</a></li>
  <li><a href="#práctica-de-quarto" id="toc-práctica-de-quarto" class="nav-link" data-scroll-target="#práctica-de-quarto"><span class="header-section-number">1.7</span> Práctica de Quarto</a></li>
  <li><a href="#gráfico" id="toc-gráfico" class="nav-link" data-scroll-target="#gráfico"><span class="header-section-number">1.8</span> Gráfico</a></li>
  </ul></li>
  <li><a href="#unidad-2.-introducción-a-machine-learning-regresión-lineal" id="toc-unidad-2.-introducción-a-machine-learning-regresión-lineal" class="nav-link" data-scroll-target="#unidad-2.-introducción-a-machine-learning-regresión-lineal"><span class="header-section-number">2</span> <strong>Unidad 2. Introducción a Machine Learning: Regresión Lineal</strong></a>
  <ul class="collapse">
  <li><a href="#machine-learning" id="toc-machine-learning" class="nav-link" data-scroll-target="#machine-learning"><span class="header-section-number">2.1</span> Machine Learning</a></li>
  <li><a href="#qué-es-modelar" id="toc-qué-es-modelar" class="nav-link" data-scroll-target="#qué-es-modelar"><span class="header-section-number">2.2</span> ¿Qué es modelar?</a></li>
  <li><a href="#etapas-de-un-problema-de-machine-learning" id="toc-etapas-de-un-problema-de-machine-learning" class="nav-link" data-scroll-target="#etapas-de-un-problema-de-machine-learning"><span class="header-section-number">2.3</span> Etapas de un problema de Machine Learning</a></li>
  <li><a href="#tipos-de-machine-learning" id="toc-tipos-de-machine-learning" class="nav-link" data-scroll-target="#tipos-de-machine-learning"><span class="header-section-number">2.4</span> <strong>Tipos de Machine Learning</strong></a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section"><span class="header-section-number">2.5</span> </a></li>
  <li><a href="#métricas-de-clasificación" id="toc-métricas-de-clasificación" class="nav-link" data-scroll-target="#métricas-de-clasificación"><span class="header-section-number">2.6</span> Métricas de clasificación</a></li>
  <li><a href="#tidymodels" id="toc-tidymodels" class="nav-link" data-scroll-target="#tidymodels"><span class="header-section-number">2.7</span> Tidymodels</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1"><span class="header-section-number">2.8</span> </a></li>
  <li><a href="#recipes-feature-engineering" id="toc-recipes-feature-engineering" class="nav-link" data-scroll-target="#recipes-feature-engineering"><span class="header-section-number">2.9</span> Recipes (Feature Engineering)</a></li>
  <li><a href="#parsnip-ajuste-de-modelos" id="toc-parsnip-ajuste-de-modelos" class="nav-link" data-scroll-target="#parsnip-ajuste-de-modelos"><span class="header-section-number">2.10</span> <strong>Parsnip (Ajuste de modelos)</strong></a></li>
  <li><a href="#yardstick-métricas-de-ajuste" id="toc-yardstick-métricas-de-ajuste" class="nav-link" data-scroll-target="#yardstick-métricas-de-ajuste"><span class="header-section-number">2.11</span> <strong>Yardstick (Métricas de Ajuste)</strong></a></li>
  <li><a href="#comentarios-finales" id="toc-comentarios-finales" class="nav-link" data-scroll-target="#comentarios-finales"><span class="header-section-number">2.12</span> Comentarios Finales</a></li>
  </ul></li>
  <li><a href="#unidad-3.-creación-de-un-flujo-de-trabajo-de-machine-learning-ml" id="toc-unidad-3.-creación-de-un-flujo-de-trabajo-de-machine-learning-ml" class="nav-link" data-scroll-target="#unidad-3.-creación-de-un-flujo-de-trabajo-de-machine-learning-ml"><span class="header-section-number">3</span> <strong>Unidad 3. Creación de un flujo de trabajo de Machine Learning (ML)</strong></a>
  <ul class="collapse">
  <li><a href="#introducción-a-la-regresión-lineal-en-r-lm" id="toc-introducción-a-la-regresión-lineal-en-r-lm" class="nav-link" data-scroll-target="#introducción-a-la-regresión-lineal-en-r-lm"><span class="header-section-number">3.1</span> Introducción a la regresión lineal en R-lm</a></li>
  <li><a href="#supuestos-de-ols-y-diagnósticos" id="toc-supuestos-de-ols-y-diagnósticos" class="nav-link" data-scroll-target="#supuestos-de-ols-y-diagnósticos"><span class="header-section-number">3.2</span> Supuestos de OLS y diagnósticos</a></li>
  <li><a href="#gráfico-de-residuos-vs.-ajustados" id="toc-gráfico-de-residuos-vs.-ajustados" class="nav-link" data-scroll-target="#gráfico-de-residuos-vs.-ajustados"><span class="header-section-number">3.3</span> 1. Gráfico de <strong>Residuos vs.&nbsp;Ajustados</strong></a></li>
  <li><a href="#análisis-eploratorio-de-datos-eda" id="toc-análisis-eploratorio-de-datos-eda" class="nav-link" data-scroll-target="#análisis-eploratorio-de-datos-eda"><span class="header-section-number">3.4</span> Análisis Eploratorio de Datos (EDA)</a></li>
  </ul></li>
  <li><a href="#tidymodels-1" id="toc-tidymodels-1" class="nav-link" data-scroll-target="#tidymodels-1"><span class="header-section-number">4</span> <strong>Tidymodels</strong></a></li>
  <li><a href="#preprocesamiento" id="toc-preprocesamiento" class="nav-link" data-scroll-target="#preprocesamiento"><span class="header-section-number">5</span> <strong>Preprocesamiento</strong></a>
  <ul class="collapse">
  <li><a href="#partición-temporal-y-feature-engineering-recipes" id="toc-partición-temporal-y-feature-engineering-recipes" class="nav-link" data-scroll-target="#partición-temporal-y-feature-engineering-recipes"><span class="header-section-number">5.1</span> Partición temporal y feature engineering (Recipes)</a></li>
  <li><a href="#especificación-del-modelo-y-engine-parsnip" id="toc-especificación-del-modelo-y-engine-parsnip" class="nav-link" data-scroll-target="#especificación-del-modelo-y-engine-parsnip"><span class="header-section-number">5.2</span> <strong>Especificación del modelo y engine (parsnip)</strong></a>
  <ul class="collapse">
  <li><a href="#qué-hace-cada-línea" id="toc-qué-hace-cada-línea" class="nav-link" data-scroll-target="#qué-hace-cada-línea"><span class="header-section-number">5.2.1</span> Qué hace cada línea</a></li>
  <li><a href="#cómo-leer-la-tabla" id="toc-cómo-leer-la-tabla" class="nav-link" data-scroll-target="#cómo-leer-la-tabla"><span class="header-section-number">5.2.2</span> Cómo leer la tabla</a></li>
  <li><a href="#durbinwatson" id="toc-durbinwatson" class="nav-link" data-scroll-target="#durbinwatson"><span class="header-section-number">5.2.3</span> 1. <strong>Durbin–Watson</strong></a></li>
  <li><a href="#breuschpagan" id="toc-breuschpagan" class="nav-link" data-scroll-target="#breuschpagan"><span class="header-section-number">5.2.4</span> 2. <strong>Breusch–Pagan</strong></a></li>
  </ul></li>
  <li><a href="#conclusión-final-del-modelo" id="toc-conclusión-final-del-modelo" class="nav-link" data-scroll-target="#conclusión-final-del-modelo"><span class="header-section-number">5.3</span> Conclusión Final del Modelo</a></li>
  </ul></li>
  <li><a href="#unidad-4.-regresión-logística" id="toc-unidad-4.-regresión-logística" class="nav-link" data-scroll-target="#unidad-4.-regresión-logística"><span class="header-section-number">6</span> Unidad 4. Regresión Logística</a></li>
  <li><a href="#partición-temporal-8020" id="toc-partición-temporal-8020" class="nav-link" data-scroll-target="#partición-temporal-8020"><span class="header-section-number">7</span> <strong>Partición temporal 80/20</strong></a>
  <ul class="collapse">
  <li><a href="#feature-engineering-recipes" id="toc-feature-engineering-recipes" class="nav-link" data-scroll-target="#feature-engineering-recipes"><span class="header-section-number">7.1</span> Feature Engineering (recipes)</a></li>
  <li><a href="#especificación-del-modelo" id="toc-especificación-del-modelo" class="nav-link" data-scroll-target="#especificación-del-modelo"><span class="header-section-number">7.2</span> <strong>Especificación del modelo</strong></a></li>
  <li><a href="#workflow" id="toc-workflow" class="nav-link" data-scroll-target="#workflow"><span class="header-section-number">7.3</span> Workflow</a></li>
  <li><a href="#ajuste-fit-y-predicción-en-test" id="toc-ajuste-fit-y-predicción-en-test" class="nav-link" data-scroll-target="#ajuste-fit-y-predicción-en-test"><span class="header-section-number">7.4</span> <strong>Ajuste (fit) y predicción en test</strong></a></li>
  <li><a href="#interpretación-de-la-muestra" id="toc-interpretación-de-la-muestra" class="nav-link" data-scroll-target="#interpretación-de-la-muestra"><span class="header-section-number">7.5</span> 🔎 Interpretación de la muestra</a></li>
  <li><a href="#evaluación-de-la-clasificación" id="toc-evaluación-de-la-clasificación" class="nav-link" data-scroll-target="#evaluación-de-la-clasificación"><span class="header-section-number">7.6</span> Evaluación de la clasificación</a>
  <ul class="collapse">
  <li><a href="#métricas-básicas" id="toc-métricas-básicas" class="nav-link" data-scroll-target="#métricas-básicas"><span class="header-section-number">7.6.1</span> Métricas básicas</a></li>
  </ul></li>
  <li><a href="#resultados-mostrados" id="toc-resultados-mostrados" class="nav-link" data-scroll-target="#resultados-mostrados"><span class="header-section-number">7.7</span> Resultados mostrados</a></li>
  <li><a href="#interpretación" id="toc-interpretación" class="nav-link" data-scroll-target="#interpretación"><span class="header-section-number">7.8</span> 🔎 Interpretación</a></li>
  <li><a href="#matriz-de-confusión-sensibilidad-especificidad" id="toc-matriz-de-confusión-sensibilidad-especificidad" class="nav-link" data-scroll-target="#matriz-de-confusión-sensibilidad-especificidad"><span class="header-section-number">7.9</span> Matriz de confusión + sensibilidad /especificidad</a>
  <ul class="collapse">
  <li><a href="#curva-rocauc-y-pr-auc" id="toc-curva-rocauc-y-pr-auc" class="nav-link" data-scroll-target="#curva-rocauc-y-pr-auc"><span class="header-section-number">7.9.1</span> <strong>Curva ROC/AUC y Pr AUC</strong></a></li>
  </ul></li>
  <li><a href="#resultados-clave" id="toc-resultados-clave" class="nav-link" data-scroll-target="#resultados-clave"><span class="header-section-number">7.10</span> Resultados clave</a>
  <ul class="collapse">
  <li><a href="#afinar-umbral" id="toc-afinar-umbral" class="nav-link" data-scroll-target="#afinar-umbral"><span class="header-section-number">7.10.1</span> Afinar umbral</a></li>
  </ul></li>
  <li><a href="#resultados-con-umbral-óptimo-f1" id="toc-resultados-con-umbral-óptimo-f1" class="nav-link" data-scroll-target="#resultados-con-umbral-óptimo-f1"><span class="header-section-number">7.11</span> Resultados con umbral óptimo (F1)</a></li>
  <li><a href="#interpretación-1" id="toc-interpretación-1" class="nav-link" data-scroll-target="#interpretación-1"><span class="header-section-number">7.12</span> 🔎 Interpretación</a></li>
  <li><a href="#recomendaciones" id="toc-recomendaciones" class="nav-link" data-scroll-target="#recomendaciones"><span class="header-section-number">7.13</span> 🚀 Recomendaciones</a>
  <ul class="collapse">
  <li><a href="#interpretación-del-modelo" id="toc-interpretación-del-modelo" class="nav-link" data-scroll-target="#interpretación-del-modelo"><span class="header-section-number">7.13.1</span> <strong>Interpretación del Modelo</strong></a></li>
  </ul></li>
  <li><a href="#resumen-del-modelo" id="toc-resumen-del-modelo" class="nav-link" data-scroll-target="#resumen-del-modelo"><span class="header-section-number">7.14</span> Resumen del modelo</a></li>
  <li><a href="#coeficientes-log-odds" id="toc-coeficientes-log-odds" class="nav-link" data-scroll-target="#coeficientes-log-odds"><span class="header-section-number">7.15</span> Coeficientes (log-odds)</a></li>
  <li><a href="#odds-ratios-expbeta" id="toc-odds-ratios-expbeta" class="nav-link" data-scroll-target="#odds-ratios-expbeta"><span class="header-section-number">7.16</span> Odds Ratios (exp(beta))</a></li>
  <li><a href="#diagnóstico-del-modelo" id="toc-diagnóstico-del-modelo" class="nav-link" data-scroll-target="#diagnóstico-del-modelo"><span class="header-section-number">7.17</span> Diagnóstico del modelo</a></li>
  <li><a href="#conclusiones" id="toc-conclusiones" class="nav-link" data-scroll-target="#conclusiones"><span class="header-section-number">7.18</span> Conclusiones</a></li>
  </ul></li>
  <li><a href="#links-de-interés" id="toc-links-de-interés" class="nav-link" data-scroll-target="#links-de-interés"><span class="header-section-number">8</span> Links de interés</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Otros formatos</h2><ul><li><a href="Curso_ML_Final.docx"><i class="bi bi-file-word"></i>MS Word</a></li><li><a href="Curso_ML_Final.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Análisis del Precio del Oro</h1>
<p class="subtitle lead">Dirección de Comercialización de Oro – BCE</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-contents">
             <p>Econ. William Ramos </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Fecha de publicación</div>
    <div class="quarto-title-meta-contents">
      <p class="date">12 de septiembre de 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<hr>
<section id="unidad-1.-reporting-con-quarto" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> <strong>Unidad 1. Reporting con Quarto</strong></h1>
<p><strong>¿Qué bases de datos vamos a utilizar?</strong></p>
<ol type="1">
<li>Gold_Price</li>
<li>Dollar Index</li>
<li>Crude oild prices: West Texas Intermediate (WTI)</li>
<li>Federal Founds Effective Rate</li>
<li>Consumer Price Index for All Urban Consumer</li>
</ol>
<p><strong>Comandos relevantes antes de iniciar</strong></p>
<p>• <strong>Ctrl+Shift+c=</strong> Para comentar • <strong>Ctrl+Shift+m =</strong>Función pipe %&gt;% ó |&gt; —“Concatenar funciones” • <strong>Atl+(-) =</strong> asigno &lt;-</p>
<section id="qué-es-quarto" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="qué-es-quarto"><span class="header-section-number">1.1</span> ¿Qué es Quarto?</h2>
<ul>
<li><p>Plataforma de publicación científica</p></li>
<li><p>Compatible con R, Python, Julia, ObservableJS</p></li>
<li><p>Produce HTML, PDF, Word, presentaciones</p></li>
<li><p>Basado en Markdown + chunks de código</p></li>
</ul>
</section>
<section id="librerias-a-utilizar" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="librerias-a-utilizar"><span class="header-section-number">1.2</span> Librerias a utilizar</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Librerias%20a%20instalar.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="598"></p>
</figure>
</div>
</section>
<section id="qué-es-el-yaml" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="qué-es-el-yaml"><span class="header-section-number">1.3</span> ¿Qué es el YAML?</h2>
<p>El encabezado en formato YAML (YAML Ain’t Markup Language) aparece al principio del documento de Quarto. Aunque es optativo, bajo ciertas circunstancias se genera automáticamente durante el proceso de renderizado que genera el archivo de salida. Tanto el inicio como la finalización del encabezado YAML están definidos por tres guiones aislados en una línea. La información contenida dentro de esas dos líneas constituye el encabezado YAML. Allí suelen incluirse metadatos (tales como título, autor y fecha) y opciones generales que determinan la edición y las salidas (tales como el modo de edición predeterminado, el formato de salida y el tamaño de las imágenes).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/YAML.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p>Este YAML configura <strong>qué mostrar</strong> (título, autor, subtítulo, fecha), <strong>cómo mostrarlo</strong> (HTML, PDF, Word con tablas de contenido, secciones numeradas, tablas bonitas) y permite incluir <strong>bibliografía y parámetros dinámicos</strong>.</p>
</section>
<section id="información-general-del-documento" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="información-general-del-documento"><span class="header-section-number">1.4</span> Información general del documento</h2>
<ul>
<li><p><strong>title:</strong> <code>"Análisis del Precio del Oro"</code><br>
→ El título principal del documento.</p></li>
<li><p><strong>subtitle:</strong> <code>"Dirección de Comercialización de Oro – BCE"</code><br>
→ Subtítulo que aparece debajo del título.</p></li>
<li><p><strong>author:</strong> <code>"Econ. William Ramos"</code><br>
→ Autor o responsable del documento.</p></li>
<li><p><strong>date:</strong> <code>"2025-09-12"</code><br>
→ Inserta la fecha del sistema de manera automática cuando se renderiza.<br>
(Ejemplo: si hoy es 12/09/2025, el reporte saldrá con esa fecha).</p></li>
</ul>
</section>
<section id="formatos-de-salida" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="formatos-de-salida"><span class="header-section-number">1.5</span> Formatos de salida</h2>
<p>Aquí defines a qué formatos se exportará el documento (HTML, Word, PDF) y con qué configuraciones.</p>
<p><strong>HTML</strong></p>
<ul>
<li><p><strong>toc: true</strong> → agrega tabla de contenidos.</p></li>
<li><p><strong>toc-depth: 3</strong> → muestra hasta nivel 3 de títulos (<code>###</code>).</p></li>
<li><p><strong>code-fold: true</strong> → permite plegar/desplegar bloques de código.</p></li>
<li><p><strong>number-sections: true</strong> → numera los títulos y secciones.</p></li>
</ul>
<p><strong>docx</strong></p>
<p>Genera un archivo en Word con configuración por defecto.</p>
<p><strong>PDF</strong></p>
<ul>
<li><p><strong>toc: true</strong> → tabla de contenidos.</p></li>
<li><p><strong>number-sections: true</strong> → numeración de secciones.</p></li>
<li><p><strong>df-print: kable</strong> → imprime tablas en formato <code>kable</code> (más presentable en PDF).</p></li>
</ul>
<p><strong>Bibliografía</strong></p>
<ul>
<li><p>Apunta a un archivo <strong>BibTeX (.bib)</strong> con tus referencias.</p></li>
<li><p>Permite citar dentro del documento con <code>@Referencia</code>.</p></li>
</ul>
<p><strong>Idioma</strong></p>
<p>Establece el idioma principal (afecta a etiquetas automáticas como “Tabla”, “Figura”, etc.).</p>
<p><strong>Parámetros (params)</strong></p>
<ul>
<li><p>Sirven para <strong>pasar valores dinámicos</strong> al documento.</p></li>
<li><p>Aquí defines <code>fecha_corte</code> como <code>"2024-12-31"</code>.</p></li>
<li><p>Luego lo puedes llamar en el texto con:</p></li>
</ul>
</section>
<section id="chunk-setup" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="chunk-setup"><span class="header-section-number">1.6</span> Chunk setup</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Chunk.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="457"></p>
</figure>
</div>
</section>
<section id="práctica-de-quarto" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="práctica-de-quarto"><span class="header-section-number">1.7</span> Práctica de Quarto</h2>
<p><strong>Análisis del oro</strong></p>
<p>El oro ha desempeñado históricamente un papel central en la economía mundial, tanto como medio de intercambio en los sistemas monetarios clásicos (patrón oro), como en su función contemporánea de activo refugio. A diferencia de otros metales, el oro no solo posee valor industrial o ornamental, sino que se ha consolidado como un instrumento financiero clave para preservar valor frente a la inflación, la volatilidad cambiaria y la incertidumbre económica.</p>
<p>En la actualidad, el análisis del precio del oro se realiza desde múltiples perspectivas:</p>
<ol type="1">
<li><p><strong>Económica y macrofinanciera</strong>:<br>
Factores como la fortaleza del dólar estadounidense, las tasas de interés reales, la inflación y la política monetaria de la Reserva Federal influyen directamente en la cotización del oro. Una depreciación del dólar o tasas de interés bajas suelen impulsar la demanda del metal.</p></li>
<li><p><strong>De mercado y de portafolio</strong>:<br>
Para los inversionistas, el oro actúa como un <strong>activo diversificador</strong>, ya que tiende a mostrar correlaciones negativas o débiles con otros activos de riesgo, como acciones y bonos. Esto lo convierte en una herramienta de cobertura (hedging) frente a escenarios adversos.</p></li>
<li><p><strong>Análisis técnico y de series temporales</strong>:<br>
Se utilizan métodos econométricos (ARIMA, GARCH, VAR) y modelos más recientes de <em>machine learning</em> (LSTM, random forests) para identificar patrones, volatilidad y posibles escenarios futuros del precio del oro.</p></li>
<li><p><strong>Perspectiva estructural y geopolítica</strong>:<br>
La oferta mundial de oro está determinada por la producción minera y el reciclaje, mientras que la demanda proviene de la joyería, la industria tecnológica, la inversión financiera y las compras de bancos centrales. A esto se suman factores de riesgo geopolítico y crisis internacionales, que suelen incrementar la demanda del metal como refugio <span class="citation" data-cites="ghule2022gold">Ghule et&nbsp;al. (<a href="#ref-ghule2022gold" role="doc-biblioref">2022</a>)</span>.</p>
<p>Banco Central del Ecuador: <a href="https://www.bce.fin.ec/estadisticas-economicas/">link</a></p></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRVeaZg1T6yBJG9Rl4P8MCkpv2QYV6pALqItQ&amp;s.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="150"></p>
</figure>
</div>
<p><strong>Parámetros iniciales</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(quantmod)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyquant)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(TTR)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Valor por defecto de params si alguien ejecuta sin YAML/CLI</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">exists</span>(<span class="st">"params"</span>) <span class="sc">||</span> <span class="fu">is.null</span>(params<span class="sc">$</span>fecha_corte)) {</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  params <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">fecha_corte =</span> <span class="st">"2024-12-31"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Rutas candidatas (si este .qmd vive en reports/)</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>candidatas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"data/gold_dataset_monthly.rds"</span>,</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>                <span class="st">"../data/gold_dataset_monthly.rds"</span>,</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>                <span class="st">"../../data/gold_dataset_monthly.rds"</span>)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>ruta <span class="ot">&lt;-</span> candidatas[<span class="fu">file.exists</span>(candidatas)][<span class="dv">1</span>]</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">is.na</span>(ruta)) <span class="fu">stop</span>(<span class="st">"No se encontró gold_dataset_monthly.rds en data/, ../data/ o ../../data/"</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_rds</span>(ruta)</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar parámetro de fecha</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>fecha_corte <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(params<span class="sc">$</span>fecha_corte)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>d <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span> <span class="fu">filter</span>(date <span class="sc">&lt;=</span> fecha_corte)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Helper de formato</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>fmt_usd <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl, cols) {</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>  tbl <span class="sc">|&gt;</span> <span class="fu">fmt_currency</span>(<span class="at">columns =</span> {{ cols }}, <span class="at">currency =</span> <span class="st">"USD"</span>)</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Helpers de formato (usa sep_mark en lugar de thousands_sep)</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>fmt_num <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl, columns, <span class="at">dec =</span> <span class="dv">2</span>) {</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">fmt_number</span>(</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">data     =</span> tbl,</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns  =</span> {{ columns }},</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> dec,</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">dec_mark =</span> <span class="st">","</span>,</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep_mark =</span> <span class="st">"."</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>fmt_usd <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl, columns, <span class="at">dec =</span> <span class="dv">2</span>) {</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>  gt<span class="sc">::</span><span class="fu">fmt_currency</span>(</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">data     =</span> tbl,</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns  =</span> {{ columns }},</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">currency =</span> <span class="st">"USD"</span>,</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> dec,</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">dec_mark =</span> <span class="st">","</span>,</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep_mark =</span> <span class="st">"."</span></span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Primer cuadro</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">select</span>(date,GOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">12</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Oro: últimos 12 meses"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_usd</span>(<span class="at">columns =</span> GOLD)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="cpqkoawjnk" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#cpqkoawjnk table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#cpqkoawjnk thead, #cpqkoawjnk tbody, #cpqkoawjnk tfoot, #cpqkoawjnk tr, #cpqkoawjnk td, #cpqkoawjnk th {
  border-style: none;
}

#cpqkoawjnk p {
  margin: 0;
  padding: 0;
}

#cpqkoawjnk .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#cpqkoawjnk .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#cpqkoawjnk .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#cpqkoawjnk .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#cpqkoawjnk .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cpqkoawjnk .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cpqkoawjnk .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#cpqkoawjnk .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#cpqkoawjnk .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#cpqkoawjnk .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#cpqkoawjnk .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#cpqkoawjnk .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#cpqkoawjnk .gt_spanner_row {
  border-bottom-style: hidden;
}

#cpqkoawjnk .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#cpqkoawjnk .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#cpqkoawjnk .gt_from_md > :first-child {
  margin-top: 0;
}

#cpqkoawjnk .gt_from_md > :last-child {
  margin-bottom: 0;
}

#cpqkoawjnk .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#cpqkoawjnk .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#cpqkoawjnk .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#cpqkoawjnk .gt_row_group_first td {
  border-top-width: 2px;
}

#cpqkoawjnk .gt_row_group_first th {
  border-top-width: 2px;
}

#cpqkoawjnk .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpqkoawjnk .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#cpqkoawjnk .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#cpqkoawjnk .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cpqkoawjnk .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpqkoawjnk .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#cpqkoawjnk .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#cpqkoawjnk .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#cpqkoawjnk .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#cpqkoawjnk .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cpqkoawjnk .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpqkoawjnk .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#cpqkoawjnk .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#cpqkoawjnk .gt_left {
  text-align: left;
}

#cpqkoawjnk .gt_center {
  text-align: center;
}

#cpqkoawjnk .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#cpqkoawjnk .gt_font_normal {
  font-weight: normal;
}

#cpqkoawjnk .gt_font_bold {
  font-weight: bold;
}

#cpqkoawjnk .gt_font_italic {
  font-style: italic;
}

#cpqkoawjnk .gt_super {
  font-size: 65%;
}

#cpqkoawjnk .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#cpqkoawjnk .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#cpqkoawjnk .gt_indent_1 {
  text-indent: 5px;
}

#cpqkoawjnk .gt_indent_2 {
  text-indent: 10px;
}

#cpqkoawjnk .gt_indent_3 {
  text-indent: 15px;
}

#cpqkoawjnk .gt_indent_4 {
  text-indent: 20px;
}

#cpqkoawjnk .gt_indent_5 {
  text-indent: 25px;
}

#cpqkoawjnk .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#cpqkoawjnk div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Oro: últimos 12 meses</th>
</tr>
<tr class="odd gt_col_headings">
<th id="date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">date</th>
<th id="GOLD" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">GOLD</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="date">2023-08-01</td>
<td class="gt_row gt_right" headers="GOLD">$1.918,52</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2023-09-01</td>
<td class="gt_row gt_right" headers="GOLD">$1.913,71</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2023-11-01</td>
<td class="gt_row gt_right" headers="GOLD">$1.985,07</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2023-12-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.033,55</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-02-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.026,54</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-03-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.158,30</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-04-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.328,41</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-05-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.347,47</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-07-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.390,48</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-08-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.465,85</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-10-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.688,00</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-11-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.654,04</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="gráfico" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="gráfico"><span class="header-section-number">1.8</span> Gráfico</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> </span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date,GOLD))<span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth=</span><span class="fl">0.8</span>)<span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span> <span class="st">"USD/oz"</span>, <span class="at">title =</span> <span class="st">"Evolución mensual del precio del oro (USD)"</span>,</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">subtitle=</span> <span class="st">"2006-presente"</span>,</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption=</span><span class="st">"Fuente: Yahoo Finance"</span>)<span class="sc">+</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">14</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.subtitle =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="st">"italic"</span>),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.caption =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">9</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Tabla</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">|&gt;</span> <span class="fu">select</span>(date,GOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tail</span>(<span class="dv">12</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cols_label</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">date=</span><span class="st">"Fecha"</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">GOLD=</span><span class="st">"Precio Oro (USD)/oz"</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span> </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Oro: últimos 12 meses"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_usd</span>(<span class="at">columns =</span> GOLD) <span class="sc">%&gt;%</span> </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_source_note</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">source_note =</span> <span class="st">"Fuente:FED"</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ejsuojucob" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ejsuojucob table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ejsuojucob thead, #ejsuojucob tbody, #ejsuojucob tfoot, #ejsuojucob tr, #ejsuojucob td, #ejsuojucob th {
  border-style: none;
}

#ejsuojucob p {
  margin: 0;
  padding: 0;
}

#ejsuojucob .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ejsuojucob .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ejsuojucob .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ejsuojucob .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ejsuojucob .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ejsuojucob .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ejsuojucob .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ejsuojucob .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ejsuojucob .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ejsuojucob .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ejsuojucob .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ejsuojucob .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ejsuojucob .gt_spanner_row {
  border-bottom-style: hidden;
}

#ejsuojucob .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ejsuojucob .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ejsuojucob .gt_from_md > :first-child {
  margin-top: 0;
}

#ejsuojucob .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ejsuojucob .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ejsuojucob .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ejsuojucob .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ejsuojucob .gt_row_group_first td {
  border-top-width: 2px;
}

#ejsuojucob .gt_row_group_first th {
  border-top-width: 2px;
}

#ejsuojucob .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ejsuojucob .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ejsuojucob .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ejsuojucob .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ejsuojucob .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ejsuojucob .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ejsuojucob .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ejsuojucob .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ejsuojucob .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ejsuojucob .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ejsuojucob .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ejsuojucob .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ejsuojucob .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ejsuojucob .gt_left {
  text-align: left;
}

#ejsuojucob .gt_center {
  text-align: center;
}

#ejsuojucob .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ejsuojucob .gt_font_normal {
  font-weight: normal;
}

#ejsuojucob .gt_font_bold {
  font-weight: bold;
}

#ejsuojucob .gt_font_italic {
  font-style: italic;
}

#ejsuojucob .gt_super {
  font-size: 65%;
}

#ejsuojucob .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ejsuojucob .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ejsuojucob .gt_indent_1 {
  text-indent: 5px;
}

#ejsuojucob .gt_indent_2 {
  text-indent: 10px;
}

#ejsuojucob .gt_indent_3 {
  text-indent: 15px;
}

#ejsuojucob .gt_indent_4 {
  text-indent: 20px;
}

#ejsuojucob .gt_indent_5 {
  text-indent: 25px;
}

#ejsuojucob .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ejsuojucob div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Oro: últimos 12 meses</th>
</tr>
<tr class="odd gt_col_headings">
<th id="date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Fecha</th>
<th id="GOLD" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Precio Oro (USD)/oz</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="date">2023-08-01</td>
<td class="gt_row gt_right" headers="GOLD">$1.918,52</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2023-09-01</td>
<td class="gt_row gt_right" headers="GOLD">$1.913,71</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2023-11-01</td>
<td class="gt_row gt_right" headers="GOLD">$1.985,07</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2023-12-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.033,55</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-02-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.026,54</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-03-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.158,30</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-04-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.328,41</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-05-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.347,47</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-07-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.390,48</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-08-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.465,85</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-10-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.688,00</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-11-01</td>
<td class="gt_row gt_right" headers="GOLD">$2.654,04</td>
</tr>
</tbody><tfoot class="gt_sourcenotes">
<tr class="even">
<td colspan="2" class="gt_sourcenote">Fuente:FED</td>
</tr>
</tfoot>

</table>

</div>
</div>
</div>
</section>
</section>
<section id="unidad-2.-introducción-a-machine-learning-regresión-lineal" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> <strong>Unidad 2. Introducción a Machine Learning: Regresión Lineal</strong></h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Machine%20Learning_ML.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="300"></p>
</figure>
</div>
<section id="machine-learning" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="machine-learning"><span class="header-section-number">2.1</span> Machine Learning</h2>
<p>Métodos que permiten que los sistemas aprendan patrones de datos</p>
<p>Diferencias con econometría tradicional:</p>
<ul>
<li><p>ML enfatiza predicción, no solo inferencia causal</p></li>
<li><p>Maneja relaciones no lineales y alta dimensión</p></li>
<li><p>Aplicaciones en finanzas: precios, riesgo, trading.</p>
<p>Jordan &amp; Mitchell (2015), Science</p></li>
</ul>
<p><strong>¿En donde podemos aplicar Machine Learning (ML)?</strong></p>
<ul>
<li><p>El oro depende de múltiples variables: dólar, petróleo, tasas de interés, inflación</p></li>
<li><p>ML captura relaciones no lineales y complejas</p></li>
</ul>
</section>
<section id="qué-es-modelar" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="qué-es-modelar"><span class="header-section-number">2.2</span> ¿Qué es modelar?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Que%20es%20modelar.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p><strong>Conceptos claves</strong></p>
<ul>
<li><p>Unidad de análisis</p></li>
<li><p>Set de entrenamiento (Utilizados para modelar)</p></li>
<li><p>Atributos</p></li>
<li><p>Variable dependiente, de respuesta o target (Valor predicho)</p></li>
</ul>
</section>
<section id="etapas-de-un-problema-de-machine-learning" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="etapas-de-un-problema-de-machine-learning"><span class="header-section-number">2.3</span> Etapas de un problema de Machine Learning</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Proceso%20ML.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="tipos-de-machine-learning" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="tipos-de-machine-learning"><span class="header-section-number">2.4</span> <strong>Tipos de Machine Learning</strong></h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Tipos%20de%20Machine%20Learning.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
<p><strong>Fuente:</strong> https://decidesoluciones.es/tipos-de-aprendizaje-algoritmos-machine-learning/</p>
</section>
<section id="section" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="section"><span class="header-section-number">2.5</span> </h2>
<p>Análisis Exploratorio de Datos (EDA)</p>
<ul>
<li><p>Generar preguntas acerca de tus datos</p></li>
<li><p>Visualización, transformación de datos</p></li>
<li><p>Vemos los aprendido y generamos nuevas preguntas</p></li>
<li><p>Conocer la base de datos</p></li>
<li><p>Distribución de las variables</p></li>
<li><p>Presencia de valores perdidos</p></li>
<li><p>Outliers</p></li>
<li><p>Desbalance de clases, Etc</p></li>
</ul>
</section>
<section id="métricas-de-clasificación" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="métricas-de-clasificación"><span class="header-section-number">2.6</span> Métricas de clasificación</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Matriz%20de%20confusion.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="566"></p>
</figure>
</div>
</section>
<section id="tidymodels" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="tidymodels"><span class="header-section-number">2.7</span> Tidymodels</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/TIDYMODELS.png" class="img-fluid quarto-figure quarto-figure-center figure-img" width="560"></p>
</figure>
</div>
<p>Fuente: https://www.tidymodels.org/</p>
</section>
<section id="section-1" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="section-1"><span class="header-section-number">2.8</span> </h2>
<p>Flujo de trabajo</p>
<ul>
<li><p>Partición de datos → rsample</p></li>
<li><p>Ingeniería de variables → recipes</p></li>
<li><p>Especificación de modelos → parsnip</p></li>
<li><p>Integración pipeline → workflows</p></li>
<li><p>Evaluación → yardstick</p></li>
</ul>
</section>
<section id="recipes-feature-engineering" class="level2" data-number="2.9">
<h2 data-number="2.9" class="anchored" data-anchor-id="recipes-feature-engineering"><span class="header-section-number">2.9</span> Recipes (Feature Engineering)</h2>
<ul>
<li><p>Preprocesamiento de datos antes de modelar</p></li>
<li><p>Escalamiento y normalización</p></li>
<li><p>Creación de nuevas variables</p></li>
<li><p>Manejo de outliers y NA</p></li>
<li><p>Reducción de colinealidad</p></li>
</ul>
<p>Ejemplo: step_normalize(), step_corr()</p>
</section>
<section id="parsnip-ajuste-de-modelos" class="level2" data-number="2.10">
<h2 data-number="2.10" class="anchored" data-anchor-id="parsnip-ajuste-de-modelos"><span class="header-section-number">2.10</span> <strong>Parsnip (Ajuste de modelos)</strong></h2>
<ul>
<li><p>Interfaz unificada para modelos ML</p></li>
<li><p>Especificación: linear_reg()</p></li>
<li><p>Motores: lm, glmnet, xgboost Ejemplo: mod &lt;- linear_reg() |&gt; set_engine(‘lm’)</p></li>
</ul>
</section>
<section id="yardstick-métricas-de-ajuste" class="level2" data-number="2.11">
<h2 data-number="2.11" class="anchored" data-anchor-id="yardstick-métricas-de-ajuste"><span class="header-section-number">2.11</span> <strong>Yardstick (Métricas de Ajuste)</strong></h2>
<ul>
<li><p>Evaluación de modelos.</p></li>
<li><p>Métricas principales: RMSE – Error cuadrático medio MAE – Error absoluto medio R² – Varianza explicada</p></li>
<li><p>Comparación de modelos con métricas comunes.</p></li>
</ul>
</section>
<section id="comentarios-finales" class="level2" data-number="2.12">
<h2 data-number="2.12" class="anchored" data-anchor-id="comentarios-finales"><span class="header-section-number">2.12</span> Comentarios Finales</h2>
<ul>
<li><p>ML complementa la econometría</p></li>
<li><p>Útil cuando hay muchas variables</p></li>
<li><p>Relación no lineal o compleja</p></li>
<li><p>Usos BCE: predicción de oro, inflación, riesgo financiero</p></li>
</ul>
</section>
</section>
<section id="unidad-3.-creación-de-un-flujo-de-trabajo-de-machine-learning-ml" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> <strong>Unidad 3. Creación de un flujo de trabajo de Machine Learning (ML)</strong></h1>
<section id="introducción-a-la-regresión-lineal-en-r-lm" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="introducción-a-la-regresión-lineal-en-r-lm"><span class="header-section-number">3.1</span> Introducción a la regresión lineal en R-lm</h2>
<p>La regresión lineal es un modelo estadístico y de machine learning supervisado que se utiliza para explicar y predecir una variable dependiente (también llamada variable respuesta o <strong><em>Y</em></strong>) a partir de una o varias variables independientes (también llamadas regresores, predictores o <strong><em>X</em></strong>).</p>
<p>La idea central es ajustar una línea recta (o hiperplano en dimensiones mayores) que relacione los valores de <strong><em>X</em></strong> con los de <strong><em>Y</em></strong>, minimizando la diferencia entre los valores observados y los predichos.</p>
<p><strong>Forma matemática</strong></p>
<p>Para una <strong>regresión lineal simple</strong> (con una sola variable (X)):</p>
<p><span class="math inline">\(Y_i = \beta_0 + \beta_1 X_i + \varepsilon_i\)</span></p>
<ul>
<li><span class="math inline">\(Y_i\)</span>: Variable dependiente (lo que queremos explicar).<br>
</li>
<li><span class="math inline">\(X_i\)</span>: Variable independiente (el predictor).<br>
</li>
<li><span class="math inline">\(\beta_0\)</span>: Intercepto (valor de <span class="math inline">\(Y\)</span> cuando <span class="math inline">\(X=0\)</span>).<br>
</li>
<li><span class="math inline">\(\beta_1\)</span>: Pendiente (cambio promedio en <span class="math inline">\(Y\)</span> por cada unidad adicional de <span class="math inline">\(X\)</span>).<br>
</li>
<li><span class="math inline">\(\varepsilon_i\)</span>: término de error (factores no observados).</li>
</ul>
<hr>
<p>En la <strong>regresión múltiple</strong> (con varios predictores):</p>
<p><span class="math inline">\(Y_i = \beta_0 + \beta_1 X_{1i} + \beta_2 X_{2i} + \dots + \beta_k X_{ki} + \varepsilon_i\)</span></p>
<p><strong>¿Cómo se estima?</strong></p>
<p>Se utiliza el método de Mínimos Cuadrados Ordinarios (MCO / OLS, por sus siglas en inglés), que busca los valores de los coeficiente que minimizan la suma de los errores al cuadrado:</p>
<p><span class="math inline">\(\min_{\beta} \sum_{i=1}^{n} (Y_i - \hat{Y}_i)^2\)</span></p>
<p><strong>Interpretación</strong></p>
<ul>
<li><p>El modelo explica la relación promedio lineal entre <span class="math inline">\(Y\)</span> y las variables <span class="math inline">\(X\)</span>.</p></li>
<li><p>Los coeficientes $\beta$ representan el efecto marginal de cada variable independiente sobre <span class="math inline">\(Y\)</span>,manteniendo las demás constante.</p></li>
<li><p>El <span class="math inline">\(R^2\)</span> mide el porcentaje de la variabilidad de <span class="math inline">\(Y\)</span> explicado por el modelo.</p>
<p><strong>Ejemplo intuitivo</strong></p>
<p>Si <span class="math inline">\(Y\)</span>= <strong>ingreso mensual</strong> y <span class="math inline">\(X\)</span> <strong>años de educación</strong></p>
<p><span class="math inline">\(Ingreso\)</span> = <span class="math inline">\(\beta_0\)</span>+<span class="math inline">\(\beta_1\)</span>x <span class="math inline">\(Educación\)</span>+<span class="math inline">\(\varepsilon_i\)</span></p></li>
<li><p><span class="math inline">\(\beta_0\)</span>: Ingreso esperado si la educación = <span class="math inline">\(0\)</span></p></li>
<li><p><span class="math inline">\(\beta_1\)</span>: Cuanto aumenta (en promedio) el ingreso por cada año adicional de educación.</p></li>
</ul>
<p><strong>En Resumen</strong></p>
<ul>
<li><p>Un modelo estadístico y predictivo.</p></li>
<li><p>Busca una relación lineal entre variables</p></li>
<li><p>Se estima normalmente con mínimos cuadrados.</p></li>
<li><p>Es una de las herramientas más usadas en estadística, econometría y machine learning.</p></li>
</ul>
<p><strong>¡Vamos a la practica!</strong></p>
<p><strong>Observamos la gráfica del oro</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d<span class="sc">$</span>date, d<span class="sc">$</span>GOLD, </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">"l"</span>,          <span class="co"># "l" = line</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>,             <span class="co"># grosor de la línea</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Fecha"</span>, </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Valor Oro en niveles"</span>, </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Evolución del oro en niveles"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Observamos la gráfica del dólar</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d<span class="sc">$</span>date, d<span class="sc">$</span>DOLLAR, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">"l"</span>,          <span class="co"># "l" = line</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>,             <span class="co"># grosor de la línea</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Fecha"</span>, </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Dolar en niveles"</span>, </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Evolución del dólar en niveles"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Retornos en gráficos: Oro</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d<span class="sc">$</span>date, d<span class="sc">$</span>gold_ret, </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">"l"</span>,          <span class="co"># "l" = line</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>,             <span class="co"># grosor de la línea</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Fecha"</span>, </span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Retorno del oro"</span>, </span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Evolución del retorno del oro"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Retornos en gráficos: Dolar</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d<span class="sc">$</span>date, d<span class="sc">$</span>dollar_ret, </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">type =</span> <span class="st">"l"</span>,          <span class="co"># "l" = line</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"blue"</span>, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>,             <span class="co"># grosor de la línea</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Fecha"</span>, </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Retorno del dólar"</span>, </span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Evolución del retorno del dólar"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, gold_ret, dollar_ret) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(s1)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 148 × 3
   date       gold_ret dollar_ret
   &lt;date&gt;        &lt;dbl&gt;      &lt;dbl&gt;
 1 2006-02-01  0.00898    0.00274
 2 2006-03-01  0.00433    0.00223
 3 2006-05-01  0.0995    -0.0222 
 4 2006-06-01 -0.113      0.0123 
 5 2006-08-01 -0.00576   -0.00780
 6 2006-09-01 -0.0495     0.00274
 7 2006-11-01  0.0694    -0.00791
 8 2006-12-01  0.00379   -0.00779
 9 2007-02-01  0.0559    -0.00384
10 2007-03-01 -0.0175    -0.00494
# ℹ 138 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>regresion <span class="ot">&lt;-</span> <span class="fu">lm</span>(gold_ret <span class="sc">~</span> dollar_ret, <span class="at">data =</span> s1)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(regresion)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = gold_ret ~ dollar_ret, data = s1)

Residuals:
      Min        1Q    Median        3Q       Max 
-0.106215 -0.021778 -0.001336  0.017674  0.115190 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  0.006652   0.002804   2.372    0.019 *  
dollar_ret  -1.091295   0.206016  -5.297 4.25e-07 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.03408 on 146 degrees of freedom
Multiple R-squared:  0.1612,    Adjusted R-squared:  0.1555 
F-statistic: 28.06 on 1 and 146 DF,  p-value: 4.246e-07</code></pre>
</div>
</div>
<p><strong>Interpretemos</strong></p>
<p><span class="math display">\[
gold\_ret_{t} = 0.006652 - 1.0913 \cdot dollar\_ret_{t} + \varepsilon_{t}
\]</span></p>
<p><strong>Coeficientes</strong></p>
<ul>
<li><p>Intercepto: <span class="math inline">\((0.006652,\; p=0.019)\)</span></p></li>
<li><p>Cuando el retorno del dólar es cero, el retorno promedio del oro es aproximadamente <span class="math inline">\(0.66\%\)</span>.<br>
Es significativo al <span class="math inline">\(5\%\)</span> (<span class="math inline">\(p &lt; 0.05\)</span>).</p></li>
<li><p>Pediente: <span class="math inline">\((-1.0913,\; p &lt; 0.001)\)</span></p></li>
<li><p>Por cada incremento de <span class="math inline">\(1\)</span> unidad en el retorno del dólar, el retorno del oro disminuye en promedio <span class="math inline">\(1.09\)</span> unidades.<br>
Es altamente significativo (<span class="math inline">\(p \approx 0.000000425\)</span>).<br>
El signo negativo confirma la teoría: la apreciación del dólar tiende a reducir el precio del oro.</p></li>
</ul>
<p><strong>Coeficientes</strong></p>
<p><strong>Intercepto</strong> <span class="math inline">\((0.006652,\; p=0.019)\)</span></p>
<p>Cuando el retorno del dólar es cero:</p>
<p><span class="math display">\[
\hat{Y} = 0.006652
\]</span></p>
<p>El retorno promedio del oro es ≈ <span class="math inline">\(0.66\%\)</span>.<br>
Es significativo al <span class="math inline">\(5\%\)</span> (<span class="math inline">\(p &lt; 0.05\)</span>).</p>
<hr>
<p><strong>Pendiente</strong> <span class="math inline">\((-1.0913,\; p &lt; 0.001)\)</span></p>
<p>Por cada incremento de <span class="math inline">\(1\)</span> unidad en el retorno del dólar:</p>
<p><span class="math display">\[
\Delta gold\_ret = -1.0913 \cdot \Delta dollar\_ret
\]</span></p>
<p>El retorno del oro disminuye en promedio <span class="math inline">\(1.09\)</span> unidades.<br>
Es altamente significativo (<span class="math inline">\(p \approx 0.000000425\)</span>).<br>
El signo negativo confirma la teoría: la apreciación del dólar tiende a reducir el precio del oro.</p>
<hr>
<p>🔹 <strong>Bondad de ajuste</strong></p>
<p><span class="math display">\[
R^2 = 0.1612 \quad (16.1\%)
\]</span></p>
<p>El modelo explica solo un <span class="math inline">\(16\%\)</span> de la variación en el retorno del oro.<br>
Esto es común en series financieras: el oro depende de múltiples factores, no solo del dólar.</p>
<p><span class="math display">\[
R^2_{ajustado} = 0.155
\]</span></p>
<p>Confirma que la complejidad no añade mucha pérdida.</p>
<p>Error estándar residual:</p>
<p><span class="math display">\[
\sigma_{\hat{\varepsilon}} = 0.03408
\]</span></p>
<p>En promedio, los residuos (errores) son de <span class="math inline">\(3.4\)</span> puntos porcentuales.</p>
<hr>
<p>🔹 <strong>Pruebas de significancia global</strong></p>
<p><span class="math display">\[
F = 28.06, \quad p &lt; 0.001
\]</span></p>
<p>El modelo en su conjunto es estadísticamente significativo.<br>
Al menos un coeficiente (aquí <span class="math inline">\(\beta_1\)</span>) difiere de cero.</p>
<hr>
<p>🔹 Resumen interpretativo</p>
<ul>
<li><strong>Dirección:</strong> relación negativa clara entre dólar y oro.<br>
</li>
<li><strong>Magnitud:</strong> movimientos del dólar tienen un efecto importante en el oro.<br>
</li>
<li><strong>Significancia:</strong> el efecto es estadísticamente robusto.<br>
</li>
<li><strong>Limitación:</strong> el modelo explica solo una fracción pequeña de la variación (<span class="math inline">\(16\%\)</span>).</li>
</ul>
<hr>
<p>📊 <strong>Conclusión</strong></p>
<p>La regresión simple muestra evidencia sólida de que el dólar influye en el oro de forma negativa.<br>
Sin embargo, la baja capacidad predictiva (<span class="math inline">\(R^2\)</span> bajo) implica que se necesitan otros factores (petróleo, tasas de interés, inflación, shocks geopolíticos) para construir un modelo predictivo más fuerte.</p>
<p><strong>Cuadro resumen</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: simple-lm</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>lm_s <span class="ot">&lt;-</span> <span class="fu">lm</span>(gold_ret <span class="sc">~</span> dollar_ret, <span class="at">data =</span> s1)</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">tidy</span>(lm_s, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"OLS (simple): coeficientes e IC 95%"</span>) <span class="sc">|&gt;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_num</span>(<span class="fu">c</span>(estimate, std.error, statistic, p.value, conf.low, conf.high), <span class="at">dec =</span> <span class="dv">6</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="xxrdlvggpa" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xxrdlvggpa table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xxrdlvggpa thead, #xxrdlvggpa tbody, #xxrdlvggpa tfoot, #xxrdlvggpa tr, #xxrdlvggpa td, #xxrdlvggpa th {
  border-style: none;
}

#xxrdlvggpa p {
  margin: 0;
  padding: 0;
}

#xxrdlvggpa .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xxrdlvggpa .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xxrdlvggpa .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xxrdlvggpa .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xxrdlvggpa .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xxrdlvggpa .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxrdlvggpa .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xxrdlvggpa .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xxrdlvggpa .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xxrdlvggpa .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xxrdlvggpa .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xxrdlvggpa .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xxrdlvggpa .gt_spanner_row {
  border-bottom-style: hidden;
}

#xxrdlvggpa .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xxrdlvggpa .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xxrdlvggpa .gt_from_md > :first-child {
  margin-top: 0;
}

#xxrdlvggpa .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xxrdlvggpa .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xxrdlvggpa .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xxrdlvggpa .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xxrdlvggpa .gt_row_group_first td {
  border-top-width: 2px;
}

#xxrdlvggpa .gt_row_group_first th {
  border-top-width: 2px;
}

#xxrdlvggpa .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxrdlvggpa .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xxrdlvggpa .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xxrdlvggpa .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxrdlvggpa .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxrdlvggpa .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xxrdlvggpa .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xxrdlvggpa .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xxrdlvggpa .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xxrdlvggpa .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xxrdlvggpa .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxrdlvggpa .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xxrdlvggpa .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xxrdlvggpa .gt_left {
  text-align: left;
}

#xxrdlvggpa .gt_center {
  text-align: center;
}

#xxrdlvggpa .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xxrdlvggpa .gt_font_normal {
  font-weight: normal;
}

#xxrdlvggpa .gt_font_bold {
  font-weight: bold;
}

#xxrdlvggpa .gt_font_italic {
  font-style: italic;
}

#xxrdlvggpa .gt_super {
  font-size: 65%;
}

#xxrdlvggpa .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xxrdlvggpa .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xxrdlvggpa .gt_indent_1 {
  text-indent: 5px;
}

#xxrdlvggpa .gt_indent_2 {
  text-indent: 10px;
}

#xxrdlvggpa .gt_indent_3 {
  text-indent: 15px;
}

#xxrdlvggpa .gt_indent_4 {
  text-indent: 20px;
}

#xxrdlvggpa .gt_indent_5 {
  text-indent: 25px;
}

#xxrdlvggpa .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xxrdlvggpa div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border">OLS (simple): coeficientes e IC 95%</th>
</tr>
<tr class="odd gt_col_headings">
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">term</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std.error</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">statistic</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p.value</th>
<th id="conf.low" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">conf.low</th>
<th id="conf.high" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">conf.high</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">0,006652</td>
<td class="gt_row gt_right" headers="std.error">0,002804</td>
<td class="gt_row gt_right" headers="statistic">2,371849</td>
<td class="gt_row gt_right" headers="p.value">0,019004</td>
<td class="gt_row gt_right" headers="conf.low">0,001109</td>
<td class="gt_row gt_right" headers="conf.high">0,012194</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">dollar_ret</td>
<td class="gt_row gt_right" headers="estimate">−1,091295</td>
<td class="gt_row gt_right" headers="std.error">0,206016</td>
<td class="gt_row gt_right" headers="statistic">−5,297149</td>
<td class="gt_row gt_right" headers="p.value">0,000000</td>
<td class="gt_row gt_right" headers="conf.low">−1,498453</td>
<td class="gt_row gt_right" headers="conf.high">−0,684137</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>Un cuadro mas completo</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>resumen <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">tidy</span>(lm_s, <span class="at">conf.int =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">sig =</span> <span class="fu">case_when</span>(</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.01</span> <span class="sc">~</span> <span class="st">"***"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"**"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>      p.value <span class="sc">&lt;</span> <span class="fl">0.1</span>  <span class="sc">~</span> <span class="st">"*"</span>,</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">""</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">interpretacion =</span> <span class="fu">c</span>(</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Cuando el retorno del dólar es 0, el oro sube ≈ 0.66% en promedio"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Un aumento de 1% en el retorno del dólar reduce el retorno del oro en ≈ 1.09%"</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(resumen) <span class="sc">|&gt;</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(estimate, std.error, statistic, p.value, conf.low, conf.high),</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>             <span class="at">decimals =</span> <span class="dv">6</span>, <span class="at">dec_mark =</span> <span class="st">","</span>, <span class="at">sep_mark =</span> <span class="st">"."</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"OLS (simple): coeficientes e interpretación"</span>) <span class="sc">|&gt;</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">term =</span> <span class="st">"Variable"</span>,</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">estimate =</span> <span class="st">"Estimador"</span>,</span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">std.error =</span> <span class="st">"Error Est."</span>,</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">statistic =</span> <span class="st">"t"</span>,</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">p.value =</span> <span class="st">"p-valor"</span>,</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">conf.low =</span> <span class="st">"IC 95% (Inf)"</span>,</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">conf.high =</span> <span class="st">"IC 95% (Sup)"</span>,</span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">sig =</span> <span class="st">"Sig."</span>,</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">interpretacion =</span> <span class="st">"Interpretación"</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="xvrelnbedu" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xvrelnbedu table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xvrelnbedu thead, #xvrelnbedu tbody, #xvrelnbedu tfoot, #xvrelnbedu tr, #xvrelnbedu td, #xvrelnbedu th {
  border-style: none;
}

#xvrelnbedu p {
  margin: 0;
  padding: 0;
}

#xvrelnbedu .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xvrelnbedu .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xvrelnbedu .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xvrelnbedu .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xvrelnbedu .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xvrelnbedu .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xvrelnbedu .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xvrelnbedu .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xvrelnbedu .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xvrelnbedu .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xvrelnbedu .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xvrelnbedu .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xvrelnbedu .gt_spanner_row {
  border-bottom-style: hidden;
}

#xvrelnbedu .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xvrelnbedu .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xvrelnbedu .gt_from_md > :first-child {
  margin-top: 0;
}

#xvrelnbedu .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xvrelnbedu .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xvrelnbedu .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xvrelnbedu .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xvrelnbedu .gt_row_group_first td {
  border-top-width: 2px;
}

#xvrelnbedu .gt_row_group_first th {
  border-top-width: 2px;
}

#xvrelnbedu .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xvrelnbedu .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xvrelnbedu .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xvrelnbedu .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xvrelnbedu .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xvrelnbedu .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xvrelnbedu .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xvrelnbedu .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xvrelnbedu .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xvrelnbedu .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xvrelnbedu .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xvrelnbedu .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xvrelnbedu .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xvrelnbedu .gt_left {
  text-align: left;
}

#xvrelnbedu .gt_center {
  text-align: center;
}

#xvrelnbedu .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xvrelnbedu .gt_font_normal {
  font-weight: normal;
}

#xvrelnbedu .gt_font_bold {
  font-weight: bold;
}

#xvrelnbedu .gt_font_italic {
  font-style: italic;
}

#xvrelnbedu .gt_super {
  font-size: 65%;
}

#xvrelnbedu .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xvrelnbedu .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xvrelnbedu .gt_indent_1 {
  text-indent: 5px;
}

#xvrelnbedu .gt_indent_2 {
  text-indent: 10px;
}

#xvrelnbedu .gt_indent_3 {
  text-indent: 15px;
}

#xvrelnbedu .gt_indent_4 {
  text-indent: 20px;
}

#xvrelnbedu .gt_indent_5 {
  text-indent: 25px;
}

#xvrelnbedu .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xvrelnbedu div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="9" class="gt_heading gt_title gt_font_normal gt_bottom_border">OLS (simple): coeficientes e interpretación</th>
</tr>
<tr class="odd gt_col_headings">
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Variable</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Estimador</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Error Est.</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">t</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p-valor</th>
<th id="conf.low" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">IC 95% (Inf)</th>
<th id="conf.high" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">IC 95% (Sup)</th>
<th id="sig" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Sig.</th>
<th id="interpretacion" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Interpretación</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">0,006652</td>
<td class="gt_row gt_right" headers="std.error">0,002804</td>
<td class="gt_row gt_right" headers="statistic">2,371849</td>
<td class="gt_row gt_right" headers="p.value">0,019004</td>
<td class="gt_row gt_right" headers="conf.low">0,001109</td>
<td class="gt_row gt_right" headers="conf.high">0,012194</td>
<td class="gt_row gt_right" headers="sig">**</td>
<td class="gt_row gt_left" headers="interpretacion">Cuando el retorno del dólar es 0, el oro sube ≈ 0.66% en promedio</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">dollar_ret</td>
<td class="gt_row gt_right" headers="estimate">−1,091295</td>
<td class="gt_row gt_right" headers="std.error">0,206016</td>
<td class="gt_row gt_right" headers="statistic">−5,297149</td>
<td class="gt_row gt_right" headers="p.value">0,000000</td>
<td class="gt_row gt_right" headers="conf.low">−1,498453</td>
<td class="gt_row gt_right" headers="conf.high">−0,684137</td>
<td class="gt_row gt_right" headers="sig">***</td>
<td class="gt_row gt_left" headers="interpretacion">Un aumento de 1% en el retorno del dólar reduce el retorno del oro en ≈ 1.09%</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p><strong>¿Cómo se ve gráficamente esta relación lineal?</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico de dispersión correcto</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d<span class="sc">$</span>dollar_ret, d<span class="sc">$</span>gold_ret,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Regresión lineal: Oro vs Dólar"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Rendimiento del dólar"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">"Rendimiento del oro"</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">pch =</span> <span class="dv">19</span>, <span class="at">col =</span> <span class="st">"darkgray"</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Modelo consistente</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>modelo <span class="ot">&lt;-</span> <span class="fu">lm</span>(gold_ret <span class="sc">~</span> dollar_ret, <span class="at">data =</span> d)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Línea de regresión</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(modelo, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Gráfico con ggplot</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>s1 <span class="sc">|&gt;</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(dollar_ret, gold_ret)) <span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">linewidth =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Retorno del Dólar (DXY)"</span>, <span class="at">y =</span> <span class="st">"Retorno del Oro"</span>, <span class="at">title =</span> <span class="st">"Regresión lineal simple"</span>) <span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Diagnostico predictivo inicial</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'broom' was built under R version 4.4.3</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajuste del modelo</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>lm_s <span class="ot">&lt;-</span> <span class="fu">lm</span>(gold_ret <span class="sc">~</span> dollar_ret, <span class="at">data =</span> d)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumen del modelo</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>glance_tbl <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">glance</span>(lm_s)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla con formateo</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>glance_tbl <span class="sc">%&gt;%</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Diagnóstico global (R², F, σ, AIC/BIC)"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">c</span>(r.squared, adj.r.squared, sigma, statistic, p.value, AIC, BIC, logLik, deviance),</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">6</span>,</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">dec_mark =</span> <span class="st">","</span>,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep_mark =</span> <span class="st">"."</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="otmwjhxcbp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#otmwjhxcbp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#otmwjhxcbp thead, #otmwjhxcbp tbody, #otmwjhxcbp tfoot, #otmwjhxcbp tr, #otmwjhxcbp td, #otmwjhxcbp th {
  border-style: none;
}

#otmwjhxcbp p {
  margin: 0;
  padding: 0;
}

#otmwjhxcbp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#otmwjhxcbp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#otmwjhxcbp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#otmwjhxcbp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#otmwjhxcbp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#otmwjhxcbp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#otmwjhxcbp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#otmwjhxcbp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#otmwjhxcbp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#otmwjhxcbp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#otmwjhxcbp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#otmwjhxcbp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#otmwjhxcbp .gt_spanner_row {
  border-bottom-style: hidden;
}

#otmwjhxcbp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#otmwjhxcbp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#otmwjhxcbp .gt_from_md > :first-child {
  margin-top: 0;
}

#otmwjhxcbp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#otmwjhxcbp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#otmwjhxcbp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#otmwjhxcbp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#otmwjhxcbp .gt_row_group_first td {
  border-top-width: 2px;
}

#otmwjhxcbp .gt_row_group_first th {
  border-top-width: 2px;
}

#otmwjhxcbp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#otmwjhxcbp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#otmwjhxcbp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#otmwjhxcbp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#otmwjhxcbp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#otmwjhxcbp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#otmwjhxcbp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#otmwjhxcbp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#otmwjhxcbp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#otmwjhxcbp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#otmwjhxcbp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#otmwjhxcbp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#otmwjhxcbp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#otmwjhxcbp .gt_left {
  text-align: left;
}

#otmwjhxcbp .gt_center {
  text-align: center;
}

#otmwjhxcbp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#otmwjhxcbp .gt_font_normal {
  font-weight: normal;
}

#otmwjhxcbp .gt_font_bold {
  font-weight: bold;
}

#otmwjhxcbp .gt_font_italic {
  font-style: italic;
}

#otmwjhxcbp .gt_super {
  font-size: 65%;
}

#otmwjhxcbp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#otmwjhxcbp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#otmwjhxcbp .gt_indent_1 {
  text-indent: 5px;
}

#otmwjhxcbp .gt_indent_2 {
  text-indent: 10px;
}

#otmwjhxcbp .gt_indent_3 {
  text-indent: 15px;
}

#otmwjhxcbp .gt_indent_4 {
  text-indent: 20px;
}

#otmwjhxcbp .gt_indent_5 {
  text-indent: 25px;
}

#otmwjhxcbp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#otmwjhxcbp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="12" class="gt_heading gt_title gt_font_normal gt_bottom_border">Diagnóstico global (R², F, σ, AIC/BIC)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="r.squared" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">r.squared</th>
<th id="adj.r.squared" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">adj.r.squared</th>
<th id="sigma" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">sigma</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">statistic</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p.value</th>
<th id="df" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">df</th>
<th id="logLik" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">logLik</th>
<th id="AIC" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">AIC</th>
<th id="BIC" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">BIC</th>
<th id="deviance" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">deviance</th>
<th id="df.residual" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">df.residual</th>
<th id="nobs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">nobs</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="r.squared">0,161208</td>
<td class="gt_row gt_right" headers="adj.r.squared">0,155463</td>
<td class="gt_row gt_right" headers="sigma">0,034085</td>
<td class="gt_row gt_right" headers="statistic">28,059791</td>
<td class="gt_row gt_right" headers="p.value">0,000000</td>
<td class="gt_row gt_right" headers="df">1</td>
<td class="gt_row gt_right" headers="logLik">291,080891</td>
<td class="gt_row gt_right" headers="AIC">−576,161781</td>
<td class="gt_row gt_right" headers="BIC">−567,170145</td>
<td class="gt_row gt_right" headers="deviance">0,169621</td>
<td class="gt_row gt_right" headers="df.residual">146</td>
<td class="gt_row gt_right" headers="nobs">148</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div id="itqhjyjsqf" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#itqhjyjsqf table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#itqhjyjsqf thead, #itqhjyjsqf tbody, #itqhjyjsqf tfoot, #itqhjyjsqf tr, #itqhjyjsqf td, #itqhjyjsqf th {
  border-style: none;
}

#itqhjyjsqf p {
  margin: 0;
  padding: 0;
}

#itqhjyjsqf .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#itqhjyjsqf .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#itqhjyjsqf .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#itqhjyjsqf .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#itqhjyjsqf .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itqhjyjsqf .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itqhjyjsqf .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#itqhjyjsqf .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#itqhjyjsqf .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#itqhjyjsqf .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#itqhjyjsqf .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#itqhjyjsqf .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#itqhjyjsqf .gt_spanner_row {
  border-bottom-style: hidden;
}

#itqhjyjsqf .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#itqhjyjsqf .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#itqhjyjsqf .gt_from_md > :first-child {
  margin-top: 0;
}

#itqhjyjsqf .gt_from_md > :last-child {
  margin-bottom: 0;
}

#itqhjyjsqf .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#itqhjyjsqf .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#itqhjyjsqf .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#itqhjyjsqf .gt_row_group_first td {
  border-top-width: 2px;
}

#itqhjyjsqf .gt_row_group_first th {
  border-top-width: 2px;
}

#itqhjyjsqf .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itqhjyjsqf .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#itqhjyjsqf .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#itqhjyjsqf .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itqhjyjsqf .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#itqhjyjsqf .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#itqhjyjsqf .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#itqhjyjsqf .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#itqhjyjsqf .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#itqhjyjsqf .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itqhjyjsqf .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#itqhjyjsqf .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#itqhjyjsqf .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#itqhjyjsqf .gt_left {
  text-align: left;
}

#itqhjyjsqf .gt_center {
  text-align: center;
}

#itqhjyjsqf .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#itqhjyjsqf .gt_font_normal {
  font-weight: normal;
}

#itqhjyjsqf .gt_font_bold {
  font-weight: bold;
}

#itqhjyjsqf .gt_font_italic {
  font-style: italic;
}

#itqhjyjsqf .gt_super {
  font-size: 65%;
}

#itqhjyjsqf .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#itqhjyjsqf .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#itqhjyjsqf .gt_indent_1 {
  text-indent: 5px;
}

#itqhjyjsqf .gt_indent_2 {
  text-indent: 10px;
}

#itqhjyjsqf .gt_indent_3 {
  text-indent: 15px;
}

#itqhjyjsqf .gt_indent_4 {
  text-indent: 20px;
}

#itqhjyjsqf .gt_indent_5 {
  text-indent: 25px;
}

#itqhjyjsqf .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#itqhjyjsqf div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_col_headings">
<th id="Estadístico" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Estadístico</th>
<th id="Valor" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Valor</th>
<th id="Interpretación" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Interpretación</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Estadístico">R²</td>
<td class="gt_row gt_left" headers="Valor">0.161</td>
<td class="gt_row gt_left" headers="Interpretación">El modelo explica el 16.1% de la variación en el retorno del oro a partir del retorno del dólar.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Estadístico">R² ajustado</td>
<td class="gt_row gt_left" headers="Valor">0.155</td>
<td class="gt_row gt_left" headers="Interpretación">Similar al R², ajusta por el número de predictores. Confirma que el modelo no está sobreajustado.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Estadístico">σ (residual standard error)</td>
<td class="gt_row gt_left" headers="Valor">0.0341</td>
<td class="gt_row gt_left" headers="Interpretación">El error típico de los residuos es ≈ 3.4 puntos porcentuales en los retornos del oro. Indica la magnitud del error de predicción.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Estadístico">F (statistic)</td>
<td class="gt_row gt_left" headers="Valor">28.06</td>
<td class="gt_row gt_left" headers="Interpretación">Prueba de significancia global: el modelo como conjunto es significativo.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Estadístico">p-value (modelo)</td>
<td class="gt_row gt_left" headers="Valor">&lt; 0.0001</td>
<td class="gt_row gt_left" headers="Interpretación">Muy fuerte evidencia de que al menos un coeficiente (el retorno del dólar) explica parte de la variación en el oro.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Estadístico">df (grados de libertad regresor)</td>
<td class="gt_row gt_left" headers="Valor">1</td>
<td class="gt_row gt_left" headers="Interpretación">Solo hay un predictor (dollar_ret).</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Estadístico">df.residual</td>
<td class="gt_row gt_left" headers="Valor">146</td>
<td class="gt_row gt_left" headers="Interpretación">Grados de libertad de los residuos (n - k - 1).</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Estadístico">nobs</td>
<td class="gt_row gt_left" headers="Valor">148</td>
<td class="gt_row gt_left" headers="Interpretación">Observaciones efectivas utilizadas.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Estadístico">LogLik</td>
<td class="gt_row gt_left" headers="Valor">291.08</td>
<td class="gt_row gt_left" headers="Interpretación">Valor de la función de verosimilitud. Base para comparar modelos.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Estadístico">AIC</td>
<td class="gt_row gt_left" headers="Valor">-576.16</td>
<td class="gt_row gt_left" headers="Interpretación">Criterio de Akaike: más bajo indica mejor ajuste relativo.</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Estadístico">BIC</td>
<td class="gt_row gt_left" headers="Valor">-567.17</td>
<td class="gt_row gt_left" headers="Interpretación">Criterio de Bayes: penaliza más por complejidad, útil en comparación de modelos.</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Estadístico">Deviance</td>
<td class="gt_row gt_left" headers="Valor">0.1696</td>
<td class="gt_row gt_left" headers="Interpretación">Suma de residuos al cuadrado (varianza no explicada).</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="supuestos-de-ols-y-diagnósticos" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="supuestos-de-ols-y-diagnósticos"><span class="header-section-number">3.2</span> Supuestos de OLS y diagnósticos</h2>
<ul>
<li><p><strong>Linealidad</strong>: Este supuesto implica que la relación entre las variables independientes y la variable dependiente debe ser lineal. Si la relación es no lineal, los resultados de la regresión (lineal) pueden ser poco confiables y conducir a interpretaciones erróneas sobre la relación entre las variables.</p></li>
<li><p><strong>Normalidad</strong>: El supuesto de normalidad establece que los <strong>errores</strong> de la regresión deben seguir una distribución normal. ¡Cuidado con esto!, los errores, no las variables. Cuando este supuesto se cumple, las pruebas de hipótesis y los intervalos de confianza pueden interpretarse con mayor precisión. Si la normalidad no se cumple, los intervalos de confianza y las pruebas de hipótesis pueden verse afectados, lo que puede conducir a conclusiones erróneas.</p></li>
<li><p><strong>Homocedasticidad</strong>: Este supuesto implica que la varianza de los <strong>errores</strong> debe ser constante en todos los niveles de las variables predictoras. Cuando se viola este supuesto, se produce <strong>heterocedasticidad</strong>, lo que significa que la dispersión de los errores varía en diferentes rangos de las variables predictoras. La presencia de heterocedasticidad puede distorsionar los intervalos de confianza y los valores p-value, lo que puede afectar la precisión de las pruebas de hipótesis.</p></li>
<li><p><strong>Independencia</strong>: El supuesto de independencia indica que los errores de la regresión no deben estar correlacionados entre sí. Si hay autocorrelación presente, puede afectar la precisión de los coeficientes y las pruebas de hipótesis, lo que lleva a conclusiones erróneas sobre la importancia de las variables predictoras. <strong>¿Qué es la autocorrelación?</strong> la presencia de autocorrelación en los residuos indica que <strong>los errores del modelo muestran cierto patrón sistemático en su distribución a lo largo del tiempo</strong>. Recordad que los errores o residuos de un modelo de regresión deberían distribuirse de manera aleatoria y seguir una distribución normal con media cero y varianza constante.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>aug <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">augment</span>(lm_s)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>aug <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(.fitted, .resid)) <span class="sc">+</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">color=</span><span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Ajustados"</span>, <span class="at">y=</span><span class="st">"Residuos"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/diag-plots-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Residuos vs ajustados (homocedasticidad y forma)</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="gráfico-de-residuos-vs.-ajustados" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="gráfico-de-residuos-vs.-ajustados"><span class="header-section-number">3.3</span> 1. Gráfico de <strong>Residuos vs.&nbsp;Ajustados</strong></h2>
<ul>
<li><p><strong>Qué muestra</strong>:</p>
<ul>
<li><p>En el eje X están los valores ajustados (predichos por el modelo)</p>
<p>En el eje Y están los residuos (diferencia entre observado y predicho).</p></li>
</ul>
<p><strong>Interpretación</strong>:</p>
<ul>
<li><p>La nube de puntos parece estar dispersa alrededor de la línea horizontal 0, sin un patrón claro.</p>
<p>Esto es bueno: sugiere que <strong>no hay heterocedasticidad fuerte ni relación sistemática no captada por el modelo</strong>.</p>
<p>Si vieras una forma de “abanico” (residuos más grandes a medida que crece el ajustado) o una curva, eso indicaría problemas como heterocedasticidad o falta de linealidad.</p></li>
<li><p><strong>Uso en clase</strong>: sirve para explicar la verificación de dos supuestos:</p></li>
<li><p>La varianza constante de los errores (homocedasticidad).</p>
<p>Que el modelo capta la relación lineal y no deja un patrón estructurado en los residuos.</p></li>
</ul></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>qq <span class="ot">&lt;-</span> <span class="fu">qqnorm</span>(<span class="fu">resid</span>(lm_s), <span class="at">plot.it =</span> <span class="cn">FALSE</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">x =</span> qq<span class="sc">$</span>x, <span class="at">y =</span> qq<span class="sc">$</span>y) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(x, y)) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">slope =</span> <span class="dv">1</span>, <span class="at">intercept =</span> <span class="dv">0</span>, <span class="at">color=</span><span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Teórico"</span>, <span class="at">y=</span><span class="st">"Muestral"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/diag-qq-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Normalidad: Q–Q plot</figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li><p>Compara la distribución de los residuos del modelo con la distribución normal teórica.</p></li>
<li><p>La mayoría de los puntos sigue la línea diagonal gris, lo que indica que los residuos son <strong>aproximadamente normales</strong>.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Pruebas formales</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>dw <span class="ot">&lt;-</span> lmtest<span class="sc">::</span><span class="fu">dwtest</span>(lm_s)      <span class="co"># autocorrelación</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>bp <span class="ot">&lt;-</span> lmtest<span class="sc">::</span><span class="fu">bptest</span>(lm_s)      <span class="co"># heterocedasticidad (Breusch–Pagan)</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>sh <span class="ot">&lt;-</span> <span class="fu">shapiro.test</span>(<span class="fu">resid</span>(lm_s)) <span class="co"># normalidad (muestras pequeñas)</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prueba =</span> <span class="fu">c</span>(<span class="st">"Durbin–Watson"</span>, <span class="st">"Breusch–Pagan"</span>, <span class="st">"Shapiro–Wilk"</span>),</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">estadistico =</span> <span class="fu">c</span>(dw<span class="sc">$</span>statistic, bp<span class="sc">$</span>statistic, sh<span class="sc">$</span>statistic),</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value     =</span> <span class="fu">c</span>(dw<span class="sc">$</span>p.value, bp<span class="sc">$</span>p.value, sh<span class="sc">$</span>p.value)</span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Pruebas de supuestos (simple)"</span>) <span class="sc">|&gt;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_num</span>(<span class="fu">c</span>(estadistico, p_value), <span class="at">dec =</span> <span class="dv">6</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="rleuocxjpx" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rleuocxjpx table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rleuocxjpx thead, #rleuocxjpx tbody, #rleuocxjpx tfoot, #rleuocxjpx tr, #rleuocxjpx td, #rleuocxjpx th {
  border-style: none;
}

#rleuocxjpx p {
  margin: 0;
  padding: 0;
}

#rleuocxjpx .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rleuocxjpx .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rleuocxjpx .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rleuocxjpx .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rleuocxjpx .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rleuocxjpx .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rleuocxjpx .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rleuocxjpx .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rleuocxjpx .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rleuocxjpx .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rleuocxjpx .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rleuocxjpx .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rleuocxjpx .gt_spanner_row {
  border-bottom-style: hidden;
}

#rleuocxjpx .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rleuocxjpx .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rleuocxjpx .gt_from_md > :first-child {
  margin-top: 0;
}

#rleuocxjpx .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rleuocxjpx .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rleuocxjpx .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rleuocxjpx .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rleuocxjpx .gt_row_group_first td {
  border-top-width: 2px;
}

#rleuocxjpx .gt_row_group_first th {
  border-top-width: 2px;
}

#rleuocxjpx .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rleuocxjpx .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rleuocxjpx .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rleuocxjpx .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rleuocxjpx .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rleuocxjpx .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rleuocxjpx .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rleuocxjpx .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rleuocxjpx .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rleuocxjpx .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rleuocxjpx .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rleuocxjpx .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rleuocxjpx .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rleuocxjpx .gt_left {
  text-align: left;
}

#rleuocxjpx .gt_center {
  text-align: center;
}

#rleuocxjpx .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rleuocxjpx .gt_font_normal {
  font-weight: normal;
}

#rleuocxjpx .gt_font_bold {
  font-weight: bold;
}

#rleuocxjpx .gt_font_italic {
  font-style: italic;
}

#rleuocxjpx .gt_super {
  font-size: 65%;
}

#rleuocxjpx .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rleuocxjpx .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rleuocxjpx .gt_indent_1 {
  text-indent: 5px;
}

#rleuocxjpx .gt_indent_2 {
  text-indent: 10px;
}

#rleuocxjpx .gt_indent_3 {
  text-indent: 15px;
}

#rleuocxjpx .gt_indent_4 {
  text-indent: 20px;
}

#rleuocxjpx .gt_indent_5 {
  text-indent: 25px;
}

#rleuocxjpx .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rleuocxjpx div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Pruebas de supuestos (simple)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="prueba" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">prueba</th>
<th id="estadistico" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estadistico</th>
<th id="p_value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p_value</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="prueba">Durbin–Watson</td>
<td class="gt_row gt_right" headers="estadistico">1,989843</td>
<td class="gt_row gt_right" headers="p_value">0,467587</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="prueba">Breusch–Pagan</td>
<td class="gt_row gt_right" headers="estadistico">2,303729</td>
<td class="gt_row gt_right" headers="p_value">0,129064</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="prueba">Shapiro–Wilk</td>
<td class="gt_row gt_right" headers="estadistico">0,985118</td>
<td class="gt_row gt_right" headers="p_value">0,111643</td>
</tr>
</tbody>
</table>

</div>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>d</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 148 × 16
   date        GOLD DOLLAR   WTI FEDFUNDS   CPI gold_ret dollar_ret  wti_ret
   &lt;date&gt;     &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
 1 2006-02-01  556.  100.   61.6     4.49  199.  0.00898    0.00274 -0.0589 
 2 2006-03-01  558.  100.   62.7     4.59  200.  0.00433    0.00223  0.0171 
 3 2006-05-01  673.   97.5  70.8     4.94  201.  0.0995    -0.0222   0.0202 
 4 2006-06-01  597.   98.7  71.0     4.99  202. -0.113      0.0123   0.00151
 5 2006-08-01  631.   97.7  73.0     5.25  204. -0.00576   -0.00780 -0.0184 
 6 2006-09-01  600.   98.0  63.8     5.25  203. -0.0495     0.00274 -0.127  
 7 2006-11-01  626.   97.5  59.0     5.25  202   0.0694    -0.00791  0.00213
 8 2006-12-01  629.   96.8  62.0     5.24  203.  0.00379   -0.00779  0.0498 
 9 2007-02-01  666.   97.5  59.3     5.26  204.  0.0559    -0.00384  0.0876 
10 2007-03-01  654.   97.0  60.4     5.26  205. -0.0175    -0.00494  0.0196 
# ℹ 138 more rows
# ℹ 7 more variables: infl_yoy &lt;dbl&gt;, gold_next &lt;dbl&gt;, gold_next_ret &lt;dbl&gt;,
#   up_next &lt;fct&gt;, ma6 &lt;dbl&gt;, ma12 &lt;dbl&gt;, rsi14 &lt;dbl&gt;</code></pre>
</div>
</div>
<p><strong>Durbin Watson</strong></p>
<ul>
<li><p><strong>Hipótesis</strong></p></li>
<li><p>Ho: No hay autocorrelación en los residuos</p></li>
<li><p>H1: Existe autocorrelación (+ o -)</p></li>
<li><p>El estadístico DW ≈ 2 (ideal, indica independencia).</p></li>
<li><p>Como p-valor &gt; 0.05, <strong>no rechazamos H₀</strong> → no hay evidencia de autocorrelación en los residuos.</p></li>
</ul>
<p><strong>Breusch–Pagan</strong></p>
<ul>
<li><p>Ho: Los residuos son homocedásticos (varianza constante)</p></li>
<li><p>H1: Los residuos son heterocedásticos (varianza no constante)</p></li>
<li><p>p-valor &gt; 0.05, <strong>no rechazamos H₀</strong> → no hay evidencia de heterocedasticidad significativa.</p></li>
</ul>
<p><strong>Shapiro–Wilk (normalidad de residuos)</strong></p>
<ul>
<li><p>Ho: Los residuos siguen una distribución normal</p></li>
<li><p>H1: Los residuos no siguen una distribución normal</p></li>
<li><p>p-valor &gt; 0.05, <strong>no rechazamos H₀</strong> → los residuos pueden considerarse aproximadamente normales.</p>
<p><strong>Comentario</strong></p></li>
<li><p>En series de tiempo, la autocorrelación y heterocedasticidad son frecuentes. Lo importante es reportarlo y pasar a un flujo robusto fuera de muestra.</p></li>
</ul>
</section>
<section id="análisis-eploratorio-de-datos-eda" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="análisis-eploratorio-de-datos-eda"><span class="header-section-number">3.4</span> Análisis Eploratorio de Datos (EDA)</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DataExplorer)</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(univariateML)</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(doParallel)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(d)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">d</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">148</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">16</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Date</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: Date</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 17%">
<col style="width: 12%">
<col style="width: 17%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 13%">
<col style="width: 11%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">min</th>
<th style="text-align: left;">max</th>
<th style="text-align: left;">median</th>
<th style="text-align: right;">n_unique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">date</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">2006-02-01</td>
<td style="text-align: left;">2024-11-01</td>
<td style="text-align: left;">2015-10-31</td>
<td style="text-align: right;">148</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 14%">
<col style="width: 19%">
<col style="width: 11%">
<col style="width: 12%">
<col style="width: 22%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">up_next</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">2</td>
<td style="text-align: left;">UP: 77, DOW: 71</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">GOLD</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1405.15</td>
<td style="text-align: right;">443.95</td>
<td style="text-align: right;">555.92</td>
<td style="text-align: right;">1175.30</td>
<td style="text-align: right;">1320.82</td>
<td style="text-align: right;">1745.30</td>
<td style="text-align: right;">2688.00</td>
<td style="text-align: left;">▃▇▆▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">DOLLAR</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">105.47</td>
<td style="text-align: right;">12.21</td>
<td style="text-align: right;">86.32</td>
<td style="text-align: right;">93.65</td>
<td style="text-align: right;">108.49</td>
<td style="text-align: right;">115.85</td>
<td style="text-align: right;">126.53</td>
<td style="text-align: left;">▇▅▂▇▅</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WTI</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73.02</td>
<td style="text-align: right;">21.49</td>
<td style="text-align: right;">16.55</td>
<td style="text-align: right;">58.08</td>
<td style="text-align: right;">71.94</td>
<td style="text-align: right;">88.72</td>
<td style="text-align: right;">133.37</td>
<td style="text-align: left;">▁▆▇▅▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">FEDFUNDS</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.60</td>
<td style="text-align: right;">1.97</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">0.12</td>
<td style="text-align: right;">0.36</td>
<td style="text-align: right;">2.40</td>
<td style="text-align: right;">5.33</td>
<td style="text-align: left;">▇▂▁▁▃</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CPI</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">245.92</td>
<td style="text-align: right;">31.78</td>
<td style="text-align: right;">199.40</td>
<td style="text-align: right;">220.25</td>
<td style="text-align: right;">237.75</td>
<td style="text-align: right;">258.76</td>
<td style="text-align: right;">316.45</td>
<td style="text-align: left;">▆▇▅▂▃</td>
</tr>
<tr class="even">
<td style="text-align: left;">gold_ret</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">-0.11</td>
<td style="text-align: right;">-0.02</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: left;">▁▃▇▅▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dollar_ret</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">-0.03</td>
<td style="text-align: right;">-0.01</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.07</td>
<td style="text-align: left;">▂▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">wti_ret</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">-0.43</td>
<td style="text-align: right;">-0.05</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.73</td>
<td style="text-align: left;">▁▇▅▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">infl_yoy</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">-0.02</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.02</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: left;">▂▇▆▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">gold_next</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1412.04</td>
<td style="text-align: right;">451.01</td>
<td style="text-align: right;">558.33</td>
<td style="text-align: right;">1171.60</td>
<td style="text-align: right;">1336.26</td>
<td style="text-align: right;">1749.77</td>
<td style="text-align: right;">2654.04</td>
<td style="text-align: left;">▃▇▅▃▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">gold_next_ret</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.04</td>
<td style="text-align: right;">-0.11</td>
<td style="text-align: right;">-0.02</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.03</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: left;">▁▃▇▅▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">ma6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1380.40</td>
<td style="text-align: right;">428.38</td>
<td style="text-align: right;">502.64</td>
<td style="text-align: right;">1155.15</td>
<td style="text-align: right;">1300.96</td>
<td style="text-align: right;">1710.02</td>
<td style="text-align: right;">2516.22</td>
<td style="text-align: left;">▃▇▅▅▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ma12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1351.42</td>
<td style="text-align: right;">420.25</td>
<td style="text-align: right;">466.16</td>
<td style="text-align: right;">1157.21</td>
<td style="text-align: right;">1287.41</td>
<td style="text-align: right;">1672.69</td>
<td style="text-align: right;">2334.97</td>
<td style="text-align: left;">▃▅▇▆▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">rsi14</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">61.76</td>
<td style="text-align: right;">14.63</td>
<td style="text-align: right;">31.59</td>
<td style="text-align: right;">52.49</td>
<td style="text-align: right;">61.55</td>
<td style="text-align: right;">72.75</td>
<td style="text-align: right;">91.28</td>
<td style="text-align: left;">▃▃▇▅▃</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Datos faltantes</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>d <span class="sc">%&gt;%</span> <span class="fu">map_dbl</span>(<span class="at">.f =</span> <span class="cf">function</span>(x){<span class="fu">sum</span>(<span class="fu">is.na</span>(x))})</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         date          GOLD        DOLLAR           WTI      FEDFUNDS 
            0             0             0             0             0 
          CPI      gold_ret    dollar_ret       wti_ret      infl_yoy 
            0             0             0             0             0 
    gold_next gold_next_ret       up_next           ma6          ma12 
            0             0             0             0             0 
        rsi14 
            0 </code></pre>
</div>
</div>
<p><strong>Missing data</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_missing</span>(</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data    =</span> d, </span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">title   =</span> <span class="st">"Porcentaje de valores ausentes"</span>,</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>(),</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme_config =</span> <span class="fu">list</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Distribución o Densidad</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> GOLD)) <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución original"</span>) <span class="sc">+</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">sqrt</span>(GOLD))) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Transformación raíz cuadrada"</span>) <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>()</span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(GOLD))) <span class="sc">+</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Transformación logarítmica"</span>) <span class="sc">+</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() </span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(p1, p2, p3, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">align =</span> <span class="st">"v"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Varible ret</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> gold_ret)) <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución original"</span>) <span class="sc">+</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() </span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">sqrt</span>(gold_ret))) <span class="sc">+</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Transformación raíz cuadrada"</span>) <span class="sc">+</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>()</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> d, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log</span>(gold_ret))) <span class="sc">+</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"steelblue"</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>      <span class="fu">geom_rug</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>      <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>comma) <span class="sc">+</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Transformación logarítmica"</span>) <span class="sc">+</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">theme_bw</span>() </span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggarrange</span>(p1, p2, p3, <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">align =</span> <span class="st">"v"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Distribución de variables continuas</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_density</span>(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data    =</span> d <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>up_next),</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol    =</span> <span class="dv">3</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">title   =</span> <span class="st">"Distribución variables continuas"</span>,</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>(),</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme_config =</span> <span class="fu">list</span>(</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>                  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>                  <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="dv">2</span>)</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>                 )</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Plot de variables cualitativas</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_bar</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  d,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">ncol    =</span> <span class="dv">3</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">title   =</span> <span class="st">"Número de observaciones por grupo"</span>,</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">ggtheme =</span> <span class="fu">theme_bw</span>(),</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">theme_config =</span> <span class="fu">list</span>(</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>                   <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">size =</span> <span class="dv">12</span>, <span class="at">face =</span> <span class="dv">2</span>),</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">legend.position =</span> <span class="st">"none"</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>                  )</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>eda <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(gold_next_ret, dollar_ret, wti_ret, infl_yoy, ma6, ma12, rsi14) <span class="sc">|&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(eda, <span class="at">use=</span><span class="st">"pairwise.complete.obs"</span>) <span class="sc">|&gt;</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">|&gt;</span> <span class="fu">rownames_to_column</span>(<span class="st">"var"</span>) <span class="sc">|&gt;</span> <span class="fu">as_tibble</span>() <span class="sc">|&gt;</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title=</span><span class="st">"Correlaciones (Pearson)"</span>) <span class="sc">|&gt;</span> <span class="fu">fmt_num</span>(<span class="fu">everything</span>(), <span class="at">dec=</span><span class="dv">3</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ntymdimwut" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ntymdimwut table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ntymdimwut thead, #ntymdimwut tbody, #ntymdimwut tfoot, #ntymdimwut tr, #ntymdimwut td, #ntymdimwut th {
  border-style: none;
}

#ntymdimwut p {
  margin: 0;
  padding: 0;
}

#ntymdimwut .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ntymdimwut .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ntymdimwut .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ntymdimwut .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ntymdimwut .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ntymdimwut .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntymdimwut .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ntymdimwut .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ntymdimwut .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ntymdimwut .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ntymdimwut .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ntymdimwut .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ntymdimwut .gt_spanner_row {
  border-bottom-style: hidden;
}

#ntymdimwut .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ntymdimwut .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ntymdimwut .gt_from_md > :first-child {
  margin-top: 0;
}

#ntymdimwut .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ntymdimwut .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ntymdimwut .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ntymdimwut .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ntymdimwut .gt_row_group_first td {
  border-top-width: 2px;
}

#ntymdimwut .gt_row_group_first th {
  border-top-width: 2px;
}

#ntymdimwut .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntymdimwut .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ntymdimwut .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ntymdimwut .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntymdimwut .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntymdimwut .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ntymdimwut .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ntymdimwut .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ntymdimwut .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ntymdimwut .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ntymdimwut .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntymdimwut .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ntymdimwut .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ntymdimwut .gt_left {
  text-align: left;
}

#ntymdimwut .gt_center {
  text-align: center;
}

#ntymdimwut .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ntymdimwut .gt_font_normal {
  font-weight: normal;
}

#ntymdimwut .gt_font_bold {
  font-weight: bold;
}

#ntymdimwut .gt_font_italic {
  font-style: italic;
}

#ntymdimwut .gt_super {
  font-size: 65%;
}

#ntymdimwut .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ntymdimwut .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ntymdimwut .gt_indent_1 {
  text-indent: 5px;
}

#ntymdimwut .gt_indent_2 {
  text-indent: 10px;
}

#ntymdimwut .gt_indent_3 {
  text-indent: 15px;
}

#ntymdimwut .gt_indent_4 {
  text-indent: 20px;
}

#ntymdimwut .gt_indent_5 {
  text-indent: 25px;
}

#ntymdimwut .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ntymdimwut div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="8" class="gt_heading gt_title gt_font_normal gt_bottom_border">Correlaciones (Pearson)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="var" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">var</th>
<th id="gold_next_ret" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">gold_next_ret</th>
<th id="dollar_ret" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">dollar_ret</th>
<th id="wti_ret" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">wti_ret</th>
<th id="infl_yoy" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">infl_yoy</th>
<th id="ma6" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ma6</th>
<th id="ma12" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">ma12</th>
<th id="rsi14" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">rsi14</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="var">gold_next_ret</td>
<td class="gt_row gt_right" headers="gold_next_ret">1,000</td>
<td class="gt_row gt_right" headers="dollar_ret">−0,242</td>
<td class="gt_row gt_right" headers="wti_ret">0,088</td>
<td class="gt_row gt_right" headers="infl_yoy">−0,083</td>
<td class="gt_row gt_right" headers="ma6">−0,023</td>
<td class="gt_row gt_right" headers="ma12">−0,023</td>
<td class="gt_row gt_right" headers="rsi14">0,141</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="var">dollar_ret</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,242</td>
<td class="gt_row gt_right" headers="dollar_ret">1,000</td>
<td class="gt_row gt_right" headers="wti_ret">−0,373</td>
<td class="gt_row gt_right" headers="infl_yoy">0,214</td>
<td class="gt_row gt_right" headers="ma6">0,173</td>
<td class="gt_row gt_right" headers="ma12">0,175</td>
<td class="gt_row gt_right" headers="rsi14">−0,188</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="var">wti_ret</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,088</td>
<td class="gt_row gt_right" headers="dollar_ret">−0,373</td>
<td class="gt_row gt_right" headers="wti_ret">1,000</td>
<td class="gt_row gt_right" headers="infl_yoy">−0,082</td>
<td class="gt_row gt_right" headers="ma6">0,021</td>
<td class="gt_row gt_right" headers="ma12">0,001</td>
<td class="gt_row gt_right" headers="rsi14">0,191</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="var">infl_yoy</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,083</td>
<td class="gt_row gt_right" headers="dollar_ret">0,214</td>
<td class="gt_row gt_right" headers="wti_ret">−0,082</td>
<td class="gt_row gt_right" headers="infl_yoy">1,000</td>
<td class="gt_row gt_right" headers="ma6">0,326</td>
<td class="gt_row gt_right" headers="ma12">0,333</td>
<td class="gt_row gt_right" headers="rsi14">0,108</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="var">ma6</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,023</td>
<td class="gt_row gt_right" headers="dollar_ret">0,173</td>
<td class="gt_row gt_right" headers="wti_ret">0,021</td>
<td class="gt_row gt_right" headers="infl_yoy">0,326</td>
<td class="gt_row gt_right" headers="ma6">1,000</td>
<td class="gt_row gt_right" headers="ma12">0,991</td>
<td class="gt_row gt_right" headers="rsi14">0,032</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="var">ma12</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,023</td>
<td class="gt_row gt_right" headers="dollar_ret">0,175</td>
<td class="gt_row gt_right" headers="wti_ret">0,001</td>
<td class="gt_row gt_right" headers="infl_yoy">0,333</td>
<td class="gt_row gt_right" headers="ma6">0,991</td>
<td class="gt_row gt_right" headers="ma12">1,000</td>
<td class="gt_row gt_right" headers="rsi14">−0,071</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="var">rsi14</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,141</td>
<td class="gt_row gt_right" headers="dollar_ret">−0,188</td>
<td class="gt_row gt_right" headers="wti_ret">0,191</td>
<td class="gt_row gt_right" headers="infl_yoy">0,108</td>
<td class="gt_row gt_right" headers="ma6">0,032</td>
<td class="gt_row gt_right" headers="ma12">−0,071</td>
<td class="gt_row gt_right" headers="rsi14">1,000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li><p>El <strong>único predictor con cierta fuerza lineal sobre el oro</strong> es el <strong>dólar</strong> (negativo, -0.24).</p>
<p>Los demáes (petrólo, inflación, medias móviles, RSI) muestran correlaciones débiles con los rendimientos inmediatos del oro.</p>
<p>Existe <strong>multicolinealidad esperada entre medias móviles</strong> (ma6 y ma12), lo que hay que cuidar si se meten juntas en un modelo.</p>
<p><strong>Indicadores técnicos (ma, rsi)</strong> están más relacionados entre sí que con el oro, lo cual tiene sentido porque son derivados de los mismos precios.</p></li>
</ul>
</section>
</section>
<section id="tidymodels-1" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> <strong>Tidymodels</strong></h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="images/Captura%20de%20pantalla%202025-09-10%20124819.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</section>
<section id="preprocesamiento" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> <strong>Preprocesamiento</strong></h1>
<p><strong>rsample:</strong> Creamos una división entre train y test</p>
<section id="partición-temporal-y-feature-engineering-recipes" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="partición-temporal-y-feature-engineering-recipes"><span class="header-section-number">5.1</span> Partición temporal y feature engineering (Recipes)</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rsample)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(recipes)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>datos <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, gold_next_ret, dollar_ret, wti_ret, infl_yoy, ma6, ma12, rsi14) <span class="sc">|&gt;</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>()</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>split <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(datos, <span class="at">prop =</span> <span class="fl">0.80</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">training</span>(split); test <span class="ot">&lt;-</span> <span class="fu">testing</span>(split)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(<span class="at">n_train=</span><span class="fu">nrow</span>(train), <span class="at">n_test=</span><span class="fu">nrow</span>(test),</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">min_train=</span><span class="fu">min</span>(train<span class="sc">$</span>date), <span class="at">max_train=</span><span class="fu">max</span>(train<span class="sc">$</span>date),</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">min_test=</span><span class="fu">min</span>(test<span class="sc">$</span>date),   <span class="at">max_test=</span><span class="fu">max</span>(test<span class="sc">$</span>date)) <span class="sc">|&gt;</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title=</span><span class="st">"Partición temporal"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="osncjrvket" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#osncjrvket table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#osncjrvket thead, #osncjrvket tbody, #osncjrvket tfoot, #osncjrvket tr, #osncjrvket td, #osncjrvket th {
  border-style: none;
}

#osncjrvket p {
  margin: 0;
  padding: 0;
}

#osncjrvket .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#osncjrvket .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#osncjrvket .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#osncjrvket .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#osncjrvket .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#osncjrvket .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#osncjrvket .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#osncjrvket .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#osncjrvket .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#osncjrvket .gt_spanner_row {
  border-bottom-style: hidden;
}

#osncjrvket .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#osncjrvket .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#osncjrvket .gt_from_md > :first-child {
  margin-top: 0;
}

#osncjrvket .gt_from_md > :last-child {
  margin-bottom: 0;
}

#osncjrvket .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#osncjrvket .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#osncjrvket .gt_row_group_first td {
  border-top-width: 2px;
}

#osncjrvket .gt_row_group_first th {
  border-top-width: 2px;
}

#osncjrvket .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#osncjrvket .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#osncjrvket .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#osncjrvket .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#osncjrvket .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_left {
  text-align: left;
}

#osncjrvket .gt_center {
  text-align: center;
}

#osncjrvket .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#osncjrvket .gt_font_normal {
  font-weight: normal;
}

#osncjrvket .gt_font_bold {
  font-weight: bold;
}

#osncjrvket .gt_font_italic {
  font-style: italic;
}

#osncjrvket .gt_super {
  font-size: 65%;
}

#osncjrvket .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#osncjrvket .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#osncjrvket .gt_indent_1 {
  text-indent: 5px;
}

#osncjrvket .gt_indent_2 {
  text-indent: 10px;
}

#osncjrvket .gt_indent_3 {
  text-indent: 15px;
}

#osncjrvket .gt_indent_4 {
  text-indent: 20px;
}

#osncjrvket .gt_indent_5 {
  text-indent: 25px;
}

#osncjrvket .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#osncjrvket div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="6" class="gt_heading gt_title gt_font_normal gt_bottom_border">Partición temporal</th>
</tr>
<tr class="odd gt_col_headings">
<th id="n_train" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n_train</th>
<th id="n_test" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n_test</th>
<th id="min_train" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">min_train</th>
<th id="max_train" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">max_train</th>
<th id="min_test" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">min_test</th>
<th id="max_test" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">max_test</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="n_train">118</td>
<td class="gt_row gt_right" headers="n_test">30</td>
<td class="gt_row gt_right" headers="min_train">2006-02-01</td>
<td class="gt_row gt_right" headers="max_train">2021-06-01</td>
<td class="gt_row gt_right" headers="min_test">2021-07-01</td>
<td class="gt_row gt_right" headers="max_test">2024-11-01</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span> (split)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;Training/Testing/Total&gt;
&lt;118/30/148&gt;</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(recipes)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: recipe</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>rec <span class="ot">&lt;-</span> recipes<span class="sc">::</span><span class="fu">recipe</span>(gold_next_ret <span class="sc">~</span> dollar_ret <span class="sc">+</span> wti_ret <span class="sc">+</span> infl_yoy <span class="sc">+</span> ma6 <span class="sc">+</span> ma12 <span class="sc">+</span> rsi14, <span class="at">data=</span>train) <span class="sc">|&gt;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">|&gt;</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_numeric_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.95</span>)</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="fu">prep</span>(rec)  <span class="co"># mostrará qué variables elimina por colinealidad (p.ej. ma12)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ul>
<li><p><strong>Inputs</strong></p>
<p>1 variable objetivo (<code>gold_next_ret</code>) y 6 predictores (los listados)</p>
<p><strong>Training information</strong></p>
<ul>
<li>La receta “aprendió” usando <strong>118 observaciones</strong> de <code>train</code> y no encontró filas incompletas</li>
</ul>
<p><strong>Operations</strong></p>
<ul>
<li><p><strong>Zero variance</strong>: no se eliminó ninguna ( <code>&lt;none&gt;</code> ).</p>
<p><strong>Centering and scaling</strong>: se normalizaron todos los predictores numéricos.</p>
<p><strong>Correlation filter on: <code>ma12</code></strong>: el filtro de correlación <strong>eliminó <code>ma12</code></strong> por estar <strong>muy correlacionada</strong> (|ρ| ≥ 0.95) con otra(s) variable(s) —típicamente con <code>ma6</code>, porque son medias móviles muy parecidas.</p>
<p>En otras palabras: <strong>tu diseño final</strong> para el modelo quedó con los predictores normalizados y <strong>sin <code>ma12</code></strong> (para evitar colinealidad).</p></li>
</ul></li>
</ul>
</section>
<section id="especificación-del-modelo-y-engine-parsnip" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="especificación-del-modelo-y-engine-parsnip"><span class="header-section-number">5.2</span> <strong>Especificación del modelo y engine (parsnip)</strong></h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parsnip)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>mod_lm <span class="ot">&lt;-</span> <span class="fu">linear_reg</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>wf <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span> <span class="fu">add_recipe</span>(rec) <span class="sc">|&gt;</span> <span class="fu">add_model</span>(mod_lm)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>wf</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: linear_reg()

── Preprocessor ────────────────────────────────────────────────────────────────
3 Recipe Steps

• step_zv()
• step_normalize()
• step_corr()

── Model ───────────────────────────────────────────────────────────────────────
Linear Regression Model Specification (regression)

Computational engine: lm </code></pre>
</div>
</div>
<ul>
<li><p>Se define un modelo de <strong>regresión lineal</strong> (<code>linear_reg()</code>),</p>
<p>Se indica que se va a usar el motor de R base <code>"lm"</code> (<code>set_engine("lm")</code>).<br>
Esto es la parte de <strong>parsnip</strong>: declara <strong>qué modelo quieres</strong>, pero aún no lo entrenas.</p></li>
<li><p><code>workflow()</code> crea un contenedor donde integras <strong>preprocesamiento + modelo</strong>.</p>
<p><code>add_recipe(rec)</code> añade la receta (<code>rec</code>) donde definiste las transformaciones de los datos.</p>
<p><code>add_model(mod_lm)</code> añade el modelo de regresión lineal que acabas de definir.</p></li>
<li><p><strong>Preprocessor: Recipe</strong></p>
<ul>
<li><p>Indica que usaste una receta con <strong>3 pasos</strong>:</p>
<ul>
<li><p><code>step_zv()</code>: elimina variables con <strong>varianza cero</strong> (sin información).</p>
<p><code>step_normalize()</code>: normaliza las variables (media 0, varianza 1).</p>
<p><code>step_corr()</code>: elimina predictores altamente correlacionados (evita multicolinealidad).</p></li>
</ul></li>
</ul></li>
</ul>
<p><strong>Ajuste, predicción y diagnóstico</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>fit_lm <span class="ot">&lt;-</span> <span class="fu">fit</span>(wf, <span class="at">data =</span> train)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>preds  <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_lm, <span class="at">new_data =</span> test) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(test <span class="sc">|&gt;</span> <span class="fu">select</span>(date, gold_next_ret))</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>preds <span class="sc">|&gt;</span> <span class="fu">slice_tail</span>(<span class="at">n=</span><span class="dv">24</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title=</span><span class="st">"Predicciones (últimas filas)"</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_num</span>(<span class="fu">c</span>(.pred, gold_next_ret), <span class="at">dec=</span><span class="dv">6</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="zgjisdnqkg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zgjisdnqkg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zgjisdnqkg thead, #zgjisdnqkg tbody, #zgjisdnqkg tfoot, #zgjisdnqkg tr, #zgjisdnqkg td, #zgjisdnqkg th {
  border-style: none;
}

#zgjisdnqkg p {
  margin: 0;
  padding: 0;
}

#zgjisdnqkg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zgjisdnqkg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zgjisdnqkg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zgjisdnqkg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zgjisdnqkg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zgjisdnqkg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zgjisdnqkg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zgjisdnqkg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zgjisdnqkg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zgjisdnqkg .gt_spanner_row {
  border-bottom-style: hidden;
}

#zgjisdnqkg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zgjisdnqkg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zgjisdnqkg .gt_from_md > :first-child {
  margin-top: 0;
}

#zgjisdnqkg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zgjisdnqkg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zgjisdnqkg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zgjisdnqkg .gt_row_group_first td {
  border-top-width: 2px;
}

#zgjisdnqkg .gt_row_group_first th {
  border-top-width: 2px;
}

#zgjisdnqkg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zgjisdnqkg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zgjisdnqkg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zgjisdnqkg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zgjisdnqkg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_left {
  text-align: left;
}

#zgjisdnqkg .gt_center {
  text-align: center;
}

#zgjisdnqkg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zgjisdnqkg .gt_font_normal {
  font-weight: normal;
}

#zgjisdnqkg .gt_font_bold {
  font-weight: bold;
}

#zgjisdnqkg .gt_font_italic {
  font-style: italic;
}

#zgjisdnqkg .gt_super {
  font-size: 65%;
}

#zgjisdnqkg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zgjisdnqkg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zgjisdnqkg .gt_indent_1 {
  text-indent: 5px;
}

#zgjisdnqkg .gt_indent_2 {
  text-indent: 10px;
}

#zgjisdnqkg .gt_indent_3 {
  text-indent: 15px;
}

#zgjisdnqkg .gt_indent_4 {
  text-indent: 20px;
}

#zgjisdnqkg .gt_indent_5 {
  text-indent: 25px;
}

#zgjisdnqkg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#zgjisdnqkg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Predicciones (últimas filas)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.pred" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.pred</th>
<th id="date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">date</th>
<th id="gold_next_ret" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">gold_next_ret</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,036721</td>
<td class="gt_row gt_right" headers="date">2022-03-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,008770</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,033985</td>
<td class="gt_row gt_right" headers="date">2022-04-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,045150</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,041014</td>
<td class="gt_row gt_right" headers="date">2022-06-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,055508</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,050270</td>
<td class="gt_row gt_right" headers="date">2022-07-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,017114</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,036562</td>
<td class="gt_row gt_right" headers="date">2022-08-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,047266</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,051922</td>
<td class="gt_row gt_right" headers="date">2022-09-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,008094</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,023869</td>
<td class="gt_row gt_right" headers="date">2022-11-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,043505</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,017235</td>
<td class="gt_row gt_right" headers="date">2022-12-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,057052</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,025340</td>
<td class="gt_row gt_right" headers="date">2023-02-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,028466</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,018940</td>
<td class="gt_row gt_right" headers="date">2023-03-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,047765</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,013781</td>
<td class="gt_row gt_right" headers="date">2023-05-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,024929</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,008754</td>
<td class="gt_row gt_right" headers="date">2023-06-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,003839</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,021000</td>
<td class="gt_row gt_right" headers="date">2023-08-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,002505</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,020952</td>
<td class="gt_row gt_right" headers="date">2023-09-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,000969</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,000790</td>
<td class="gt_row gt_right" headers="date">2023-11-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,024420</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,003507</td>
<td class="gt_row gt_right" headers="date">2023-12-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,002707</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,011772</td>
<td class="gt_row gt_right" headers="date">2024-02-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,065018</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,005882</td>
<td class="gt_row gt_right" headers="date">2024-03-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,078818</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,009868</td>
<td class="gt_row gt_right" headers="date">2024-04-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,008184</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,002909</td>
<td class="gt_row gt_right" headers="date">2024-05-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,009112</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,002817</td>
<td class="gt_row gt_right" headers="date">2024-07-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,031529</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">0,001260</td>
<td class="gt_row gt_right" headers="date">2024-08-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,043402</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred">−0,006938</td>
<td class="gt_row gt_right" headers="date">2024-10-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,012634</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred">−0,012919</td>
<td class="gt_row gt_right" headers="date">2024-11-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,003942</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="qué-hace-cada-línea" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="qué-hace-cada-línea"><span class="header-section-number">5.2.1</span> Qué hace cada línea</h3>
<ul>
<li><p><code>fit_lm &lt;- fit(wf, data = train)</code><br>
Ajusta el <strong>workflow</strong> (receta + modelo <code>lm</code>) solo con el conjunto <em>train</em>.</p>
<p><code>predict(fit_lm, new_data = test)</code><br>
Genera la columna <strong><code>.pred</code></strong> (predicción del retorno del oro) sobre <em>test</em>.</p>
<p><code>bind_cols(test |&gt; select(date, gold_next_ret))</code><br>
Anexa a las predicciones la <strong>fecha</strong> y el <strong>resultado real</strong> (<code>gold_next_ret</code>) para comparar.</p>
<p><code>slice_tail(n = 8)</code><br>
Muestra las <strong>8 últimas observaciones</strong> (útil si los datos son cronológicos).</p></li>
</ul>
</section>
<section id="cómo-leer-la-tabla" class="level3" data-number="5.2.2">
<h3 data-number="5.2.2" class="anchored" data-anchor-id="cómo-leer-la-tabla"><span class="header-section-number">5.2.2</span> Cómo leer la tabla</h3>
<ul>
<li><p><strong><code>.pred</code></strong>: lo que estima el modelo.</p>
<p><strong><code>gold_next_ret</code></strong>: el valor <strong>real</strong> observado.</p>
<p>Comparando ambos puedes evaluar si el modelo <strong>subestima</strong> o <strong>sobreestima</strong> en cada fecha.</p>
<ul>
<li>Ej.: 2024-02-01 → <code>.pred = -0.011772</code> vs real <code>0.065018</code> → fuerte <strong>subestimación</strong> (residuo ≈ +07679.0).</li>
</ul></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>preds <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(gold_next_ret, .pred)) <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha=</span><span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method=</span><span class="st">"lm"</span>, <span class="at">se=</span><span class="cn">FALSE</span>, <span class="at">linewidth=</span><span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Real"</span>, <span class="at">y=</span><span class="st">"Predicho"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-pred-real" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pred-real-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="Curso_ML_Final_files/figure-html/fig-pred-real-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pred-real-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;1: Test: Real vs Predicho
</figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li><p><strong>Qué muestra</strong>:</p>
<ul>
<li><p>Eje X → valores reales de la variable dependiente (<code>gold_next_ret</code>).</p>
<p>Eje Y → valores predichos por el modelo (<code>.pred</code>).</p>
<p>La línea azul es un ajuste lineal auxiliar que indica la tendencia.</p></li>
</ul>
<p><strong>Interpretación</strong>:</p>
<p>Existe una <strong>relación positiva</strong>, pero débil: cuando el valor real aumenta, el modelo tiende a predecir valores mayores, aunque con bastante dispersión.</p>
<ul>
<li><p>Muchos puntos se alejan de la línea, lo que indica que el modelo no captura bien la variabilidad de los datos.</p></li>
<li><p>Idealmente, si el modelo fuera perfecto, los puntos deberían alinearse en una diagonal con pendiente = 1 (línea identidad). Aquí, la nube dispersa muestra que el ajuste es limitado.</p></li>
</ul></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>preds <span class="sc">|&gt;</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">resid =</span> gold_next_ret <span class="sc">-</span> .pred) <span class="sc">|&gt;</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date, resid)) <span class="sc">+</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept=</span><span class="dv">0</span>, <span class="at">linetype=</span><span class="dv">2</span>, <span class="at">color=</span><span class="st">"gray50"</span>) <span class="sc">+</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth=</span><span class="fl">0.8</span>, <span class="at">color=</span><span class="st">"firebrick"</span>) <span class="sc">+</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">labs</span>(<span class="at">x=</span><span class="cn">NULL</span>, <span class="at">y=</span><span class="st">"Residual"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/resid-time-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Residuos en Test</figcaption>
</figure>
</div>
</div>
</div>
<ul>
<li><p><strong>Qué muestra</strong>:</p>
<ul>
<li><p>Eje X → tiempo (fecha).</p>
<p>Eje Y → residuo = real − predicho.</p></li>
<li><p>La línea punteada en 0 indica el ideal (residuos centrados en cero).</p></li>
<li><p><strong>Interpretación</strong></p></li>
</ul>
<p>Los residuos oscilan en torno a cero, pero se observan <strong>patrones cíclicos</strong> (suben y bajan en bloques).</p>
<ul>
<li><p>Esto sugiere que el modelo <strong>no captura componentes temporales o estacionales</strong> de la serie (muy típico en series financieras/temporales)</p>
<p>Aunque no hay una tendencia clara de crecimiento en magnitud (no aumenta la varianza con el tiempo), sí se aprecia estructura → indicio de autocorrelación en los errores.</p></li>
</ul></li>
<li><p><strong>Conclusión general</strong></p></li>
</ul>
<ol type="1">
<li><p>El modelo de regresión lineal capta la dirección general (positiva) pero con <strong>poder predictivo débil</strong>.</p></li>
<li><p>Los residuos muestran estructura temporal, lo que indica que <strong>no son completamente aleatorios</strong> → se viola el supuesto de independencia.</p></li>
<li><p>Para datos con fechas (series temporales), sería recomendable probar modelos que incorporen dependencia temporal, como:</p></li>
</ol>
<ul>
<li>Modelos de machine learning adaptados a series temporales (XGBoost con lags, Prophet, LSTM, etc.).</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>eng <span class="ot">&lt;-</span> fit_lm <span class="sc">|&gt;</span> <span class="fu">extract_fit_engine</span>()</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(eng) <span class="sc">|&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title=</span><span class="st">"Resumen (engine lm)"</span>) <span class="sc">|&gt;</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_num</span>(<span class="fu">c</span>(r.squared, adj.r.squared, sigma, AIC, BIC, statistic, p.value), <span class="at">dec=</span><span class="dv">6</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ulojmgiijw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ulojmgiijw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ulojmgiijw thead, #ulojmgiijw tbody, #ulojmgiijw tfoot, #ulojmgiijw tr, #ulojmgiijw td, #ulojmgiijw th {
  border-style: none;
}

#ulojmgiijw p {
  margin: 0;
  padding: 0;
}

#ulojmgiijw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ulojmgiijw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ulojmgiijw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ulojmgiijw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ulojmgiijw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ulojmgiijw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ulojmgiijw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ulojmgiijw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ulojmgiijw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ulojmgiijw .gt_spanner_row {
  border-bottom-style: hidden;
}

#ulojmgiijw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ulojmgiijw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ulojmgiijw .gt_from_md > :first-child {
  margin-top: 0;
}

#ulojmgiijw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ulojmgiijw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ulojmgiijw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ulojmgiijw .gt_row_group_first td {
  border-top-width: 2px;
}

#ulojmgiijw .gt_row_group_first th {
  border-top-width: 2px;
}

#ulojmgiijw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ulojmgiijw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ulojmgiijw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ulojmgiijw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ulojmgiijw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_left {
  text-align: left;
}

#ulojmgiijw .gt_center {
  text-align: center;
}

#ulojmgiijw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ulojmgiijw .gt_font_normal {
  font-weight: normal;
}

#ulojmgiijw .gt_font_bold {
  font-weight: bold;
}

#ulojmgiijw .gt_font_italic {
  font-style: italic;
}

#ulojmgiijw .gt_super {
  font-size: 65%;
}

#ulojmgiijw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ulojmgiijw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ulojmgiijw .gt_indent_1 {
  text-indent: 5px;
}

#ulojmgiijw .gt_indent_2 {
  text-indent: 10px;
}

#ulojmgiijw .gt_indent_3 {
  text-indent: 15px;
}

#ulojmgiijw .gt_indent_4 {
  text-indent: 20px;
}

#ulojmgiijw .gt_indent_5 {
  text-indent: 25px;
}

#ulojmgiijw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ulojmgiijw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="12" class="gt_heading gt_title gt_font_normal gt_bottom_border">Resumen (engine lm)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="r.squared" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">r.squared</th>
<th id="adj.r.squared" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">adj.r.squared</th>
<th id="sigma" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">sigma</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">statistic</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p.value</th>
<th id="df" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">df</th>
<th id="logLik" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">logLik</th>
<th id="AIC" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">AIC</th>
<th id="BIC" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">BIC</th>
<th id="deviance" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">deviance</th>
<th id="df.residual" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">df.residual</th>
<th id="nobs" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">nobs</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="r.squared">0,091388</td>
<td class="gt_row gt_right" headers="adj.r.squared">0,050825</td>
<td class="gt_row gt_right" headers="sigma">0,038613</td>
<td class="gt_row gt_right" headers="statistic">2,252979</td>
<td class="gt_row gt_right" headers="p.value">0,053903</td>
<td class="gt_row gt_right" headers="df">5</td>
<td class="gt_row gt_right" headers="logLik">219.6353</td>
<td class="gt_row gt_right" headers="AIC">−425,270617</td>
<td class="gt_row gt_right" headers="BIC">−405,875825</td>
<td class="gt_row gt_right" headers="deviance">0.1669894</td>
<td class="gt_row gt_right" headers="df.residual">112</td>
<td class="gt_row gt_right" headers="nobs">118</td>
</tr>
</tbody>
</table>

</div>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>lmtest<span class="sc">::</span><span class="fu">dwtest</span>(eng); lmtest<span class="sc">::</span><span class="fu">bptest</span>(eng); performance<span class="sc">::</span><span class="fu">check_model</span>(eng)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
    Durbin-Watson test

data:  eng
DW = 2.1906, p-value = 0.7778
alternative hypothesis: true autocorrelation is greater than 0</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
    studentized Breusch-Pagan test

data:  eng
BP = 12.134, df = 5, p-value = 0.03299</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/engine-diagnostics-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="durbinwatson" class="level3" data-number="5.2.3">
<h3 data-number="5.2.3" class="anchored" data-anchor-id="durbinwatson"><span class="header-section-number">5.2.3</span> 1. <strong>Durbin–Watson</strong></h3>
<ul>
<li><p><strong>Hipótesis:</strong></p>
<ul>
<li><p>H₀: no hay autocorrelación de primer orden en los residuos.</p>
<p>H₁: existe autocorrelación positiva.</p></li>
</ul>
<p><strong>Resultado:</strong> DW = 2.1906, p-valor = 0.7778.</p>
<p><strong>Interpretación:</strong> DW ≈ 2 y p-valor alto → no se rechaza H₀</p></li>
</ul>
</section>
<section id="breuschpagan" class="level3" data-number="5.2.4">
<h3 data-number="5.2.4" class="anchored" data-anchor-id="breuschpagan"><span class="header-section-number">5.2.4</span> 2. <strong>Breusch–Pagan</strong></h3>
<ul>
<li><p><strong>Hipótesis:</strong></p>
<p>H₀: varianza constante de los residuos (homocedasticidad).</p>
<p>H₁: heterocedasticidad.</p>
<p><strong>Resultado:</strong> BP = 12.134, p-valor = 0.03299.</p>
<p><strong>Interpretación:</strong> p-valor &lt; 0.05 → se rechaza H₀.<br>
<strong>Hay evidencia de heterocedasticidad</strong> en los residuos.</p></li>
</ul>
<p><strong>Panel gráfico</strong></p>
<ul>
<li><p><strong>Posterior Predictive Check</strong></p>
<ul>
<li>La densidad de los datos observados y predichos es parecida, aunque el modelo suaviza demasiado los extremos.<br>
Ajuste razonable pero con pérdida de variabilidad en colas</li>
</ul></li>
<li><p><strong>Linearity</strong></p></li>
</ul>
<p>Residuos frente a valores ajustados → no hay una curva clara, pero sí dispersión irregular.<br>
La relación lineal es aceptable, aunque no perfecta.</p>
<p><strong>Homogeneity of Variance</strong></p>
<p>Los residuos deberían estar en una banda horizontal.</p>
<ul>
<li><p>Aquí se observa dispersión creciente en algunos tramos.</p>
<p>Refuerza lo detectado por Breusch–Pagan: <strong>heterocedasticidad</strong>.</p></li>
</ul>
<p><strong>Influential Observations (Cook’s D / leverage)</strong></p>
<p>La mayoría de puntos está dentro de las líneas de influencia, pero algunos se acercan al borde.<br>
xisten observaciones influyentes, aunque no excesivas.</p>
<p><strong>Collinearity (VIF)</strong></p>
<ul>
<li><p>Todos los predictores tienen VIF &lt; 5 (umbral de preocupación).</p>
<p><strong>No hay problema grave de multicolinealidad</strong>.</p></li>
<li><p><strong>Normality of Residuals (Q-Q plot)</strong></p></li>
</ul>
<p>La mayoría de puntos sigue la diagonal, salvo en las colas.<br>
Los residuos son aproximadamente normales, con ligeras desviaciones en valores extremos. ## Métricas y validación temporal</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>yardstick<span class="sc">::</span><span class="fu">metrics</span>(preds, <span class="at">truth =</span> gold_next_ret, <span class="at">estimate =</span> .pred) <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title=</span><span class="st">"Métricas en Test"</span>) <span class="sc">|&gt;</span> <span class="fu">fmt_num</span>(.estimate, <span class="at">dec=</span><span class="dv">6</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ahqzolhpnv" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ahqzolhpnv table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ahqzolhpnv thead, #ahqzolhpnv tbody, #ahqzolhpnv tfoot, #ahqzolhpnv tr, #ahqzolhpnv td, #ahqzolhpnv th {
  border-style: none;
}

#ahqzolhpnv p {
  margin: 0;
  padding: 0;
}

#ahqzolhpnv .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ahqzolhpnv .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ahqzolhpnv .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ahqzolhpnv .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ahqzolhpnv .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahqzolhpnv .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahqzolhpnv .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ahqzolhpnv .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ahqzolhpnv .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ahqzolhpnv .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ahqzolhpnv .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ahqzolhpnv .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ahqzolhpnv .gt_spanner_row {
  border-bottom-style: hidden;
}

#ahqzolhpnv .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ahqzolhpnv .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ahqzolhpnv .gt_from_md > :first-child {
  margin-top: 0;
}

#ahqzolhpnv .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ahqzolhpnv .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ahqzolhpnv .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ahqzolhpnv .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ahqzolhpnv .gt_row_group_first td {
  border-top-width: 2px;
}

#ahqzolhpnv .gt_row_group_first th {
  border-top-width: 2px;
}

#ahqzolhpnv .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahqzolhpnv .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ahqzolhpnv .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ahqzolhpnv .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahqzolhpnv .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahqzolhpnv .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ahqzolhpnv .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ahqzolhpnv .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ahqzolhpnv .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ahqzolhpnv .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahqzolhpnv .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahqzolhpnv .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ahqzolhpnv .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ahqzolhpnv .gt_left {
  text-align: left;
}

#ahqzolhpnv .gt_center {
  text-align: center;
}

#ahqzolhpnv .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ahqzolhpnv .gt_font_normal {
  font-weight: normal;
}

#ahqzolhpnv .gt_font_bold {
  font-weight: bold;
}

#ahqzolhpnv .gt_font_italic {
  font-style: italic;
}

#ahqzolhpnv .gt_super {
  font-size: 65%;
}

#ahqzolhpnv .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ahqzolhpnv .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ahqzolhpnv .gt_indent_1 {
  text-indent: 5px;
}

#ahqzolhpnv .gt_indent_2 {
  text-indent: 10px;
}

#ahqzolhpnv .gt_indent_3 {
  text-indent: 15px;
}

#ahqzolhpnv .gt_indent_4 {
  text-indent: 20px;
}

#ahqzolhpnv .gt_indent_5 {
  text-indent: 25px;
}

#ahqzolhpnv .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ahqzolhpnv div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Métricas en Test</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id="a.estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="a.estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers=".metric">rmse</td>
<td class="gt_row gt_left" headers=".estimator">standard</td>
<td class="gt_row gt_right" headers=".estimate">0,043117</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=".metric">rsq</td>
<td class="gt_row gt_left" headers=".estimator">standard</td>
<td class="gt_row gt_right" headers=".estimate">0,130291</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers=".metric">mae</td>
<td class="gt_row gt_left" headers=".estimator">standard</td>
<td class="gt_row gt_right" headers=".estimate">0,034454</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li><p><strong>RMSE (Root Mean Squared Error) = 0.0431</strong><br>
→ Error cuadrático medio de alrededor del 4.3% en los retornos.<br>
Mientras más bajo, mejor.</p>
<p><strong>MAE (Mean Absolute Error) = 0.0345</strong><br>
→ En promedio, la predicción se equivoca en ±3.4% del retorno.</p>
<p><strong>R² (rsq) = 0.1303</strong><br>
→ El modelo explica apenas el <strong>13% de la variabilidad</strong> en el retorno del oro.<br>
Esto es bastante bajo, indicando que la regresión lineal simple capta muy poco de la dinámica real.</p></li>
<li><p>Conclusión: <strong>el modelo tiene baja capacidad predictiva</strong> en el test. Captura algo de señal, pero la mayoría del comportamiento sigue siendo ruido.</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>rs <span class="ot">&lt;-</span> <span class="fu">rolling_origin</span>(</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  datos,</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">initial =</span> <span class="dv">60</span>, <span class="at">assess =</span> <span class="dv">12</span>, <span class="at">skip =</span> <span class="dv">6</span>, <span class="at">cumulative =</span> <span class="cn">TRUE</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>res_cv <span class="ot">&lt;-</span> <span class="fu">fit_resamples</span>(wf, <span class="at">resamples =</span> rs, <span class="at">control =</span> <span class="fu">control_resamples</span>(<span class="at">save_pred =</span> <span class="cn">TRUE</span>))</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="fu">collect_metrics</span>(res_cv) <span class="sc">|&gt;</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title=</span><span class="st">"CV temporal (promedios)"</span>) <span class="sc">|&gt;</span> <span class="fu">fmt_num</span>(<span class="fu">c</span>(mean, std_err), <span class="at">dec=</span><span class="dv">6</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="bkjfwctnhp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#bkjfwctnhp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#bkjfwctnhp thead, #bkjfwctnhp tbody, #bkjfwctnhp tfoot, #bkjfwctnhp tr, #bkjfwctnhp td, #bkjfwctnhp th {
  border-style: none;
}

#bkjfwctnhp p {
  margin: 0;
  padding: 0;
}

#bkjfwctnhp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#bkjfwctnhp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#bkjfwctnhp .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#bkjfwctnhp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#bkjfwctnhp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bkjfwctnhp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bkjfwctnhp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#bkjfwctnhp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#bkjfwctnhp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#bkjfwctnhp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#bkjfwctnhp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#bkjfwctnhp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#bkjfwctnhp .gt_spanner_row {
  border-bottom-style: hidden;
}

#bkjfwctnhp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#bkjfwctnhp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#bkjfwctnhp .gt_from_md > :first-child {
  margin-top: 0;
}

#bkjfwctnhp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#bkjfwctnhp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#bkjfwctnhp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#bkjfwctnhp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#bkjfwctnhp .gt_row_group_first td {
  border-top-width: 2px;
}

#bkjfwctnhp .gt_row_group_first th {
  border-top-width: 2px;
}

#bkjfwctnhp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkjfwctnhp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#bkjfwctnhp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#bkjfwctnhp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bkjfwctnhp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkjfwctnhp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#bkjfwctnhp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#bkjfwctnhp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#bkjfwctnhp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#bkjfwctnhp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bkjfwctnhp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkjfwctnhp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#bkjfwctnhp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#bkjfwctnhp .gt_left {
  text-align: left;
}

#bkjfwctnhp .gt_center {
  text-align: center;
}

#bkjfwctnhp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#bkjfwctnhp .gt_font_normal {
  font-weight: normal;
}

#bkjfwctnhp .gt_font_bold {
  font-weight: bold;
}

#bkjfwctnhp .gt_font_italic {
  font-style: italic;
}

#bkjfwctnhp .gt_super {
  font-size: 65%;
}

#bkjfwctnhp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#bkjfwctnhp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#bkjfwctnhp .gt_indent_1 {
  text-indent: 5px;
}

#bkjfwctnhp .gt_indent_2 {
  text-indent: 10px;
}

#bkjfwctnhp .gt_indent_3 {
  text-indent: 15px;
}

#bkjfwctnhp .gt_indent_4 {
  text-indent: 20px;
}

#bkjfwctnhp .gt_indent_5 {
  text-indent: 25px;
}

#bkjfwctnhp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#bkjfwctnhp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="6" class="gt_heading gt_title gt_font_normal gt_bottom_border">CV temporal (promedios)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id="a.estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="mean" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">mean</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="std_err" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std_err</th>
<th id="a.config" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.config</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers=".metric">rmse</td>
<td class="gt_row gt_left" headers=".estimator">standard</td>
<td class="gt_row gt_right" headers="mean">0,036623</td>
<td class="gt_row gt_right" headers="n">11</td>
<td class="gt_row gt_right" headers="std_err">0,002130</td>
<td class="gt_row gt_left" headers=".config">Preprocessor1_Model1</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=".metric">rsq</td>
<td class="gt_row gt_left" headers=".estimator">standard</td>
<td class="gt_row gt_right" headers="mean">0,047869</td>
<td class="gt_row gt_right" headers="n">11</td>
<td class="gt_row gt_right" headers="std_err">0,013954</td>
<td class="gt_row gt_left" headers=".config">Preprocessor1_Model1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li><p><strong>RMSE promedio = 0.0366 (±0.0021)</strong><br>
→ En promedio, el error cuadrático medio de predicción es ~3.7%.<br>
→ Es un poco mejor que el RMSE en el test simple (0.0431).</p>
<p><strong>R² promedio = 0.0479 (±0.0140)</strong><br>
→ El modelo solo explica alrededor del <strong>5% de la variabilidad</strong> en los retornos.<br>
→ Es incluso más bajo que en el test simple (0.13).<br>
→ Esto confirma que el modelo <strong>no generaliza bien</strong> a lo largo del tiempo.</p>
<ul>
<li><p><strong>Capacidad predictiva:</strong> aunque el RMSE no es alto en términos absolutos, el R² cercano a cero muestra que la regresión lineal <strong>apenas supera a un modelo trivial (predicción constante en la media)</strong>.</p>
<p><strong>Confirmación:</strong> lo que viste en test simple no fue casualidad: el modelo lineal <strong>no logra capturar patrones temporales</strong> en los retornos del oro.</p></li>
<li><p>El modelo de regresión lineal <strong>tiene poco poder explicativo</strong> en series financieras de retornos</p></li>
<li><p>Usar algoritmos de ML más flexibles con rolling CV (Random Forest, XGBoost, redes neuronales).</p>
<p>Para mejorar, se recomienda:</p>
<ul>
<li>Incorporar <strong>lags (retardos)</strong> del oro y de los predictores.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="conclusión-final-del-modelo" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="conclusión-final-del-modelo"><span class="header-section-number">5.3</span> Conclusión Final del Modelo</h2>
<ul>
<li><p><strong>Ajuste del modelo</strong></p>
<p>Se especificó y entrenó un modelo de <strong>regresión lineal</strong> en el framework <strong>tidymodels</strong>, con un flujo completo: preprocesamiento (normalización, eliminación de variables redundantes), ajuste y evaluación.</p>
<ul>
<li>El modelo permitió obtener predicciones y realizar diagnósticos formales (residuos, autocorrelación, heterocedasticidad, normalidad, influencia),</li>
</ul></li>
<li><p><strong>Resultados en Test</strong></p></li>
</ul>
<p><strong>RMSE ≈ 0.043</strong> y <strong>MAE ≈ 0.034</strong> → errores moderados en escala de retornos.</p>
<p><strong>R² ≈ 0.13</strong> → el modelo explica apenas un 13% de la variabilidad.</p>
<p><strong>Validación Temporal (rolling-origin)</strong></p>
<ul>
<li><p><strong>RMSE promedio ≈ 0.037</strong>, estable en distintas ventanas temporales.</p>
<p><strong>R² promedio ≈ 0.048</strong>, cercano a cero → el modelo tiene poca capacidad explicativa.</p>
<p>Esto confirma que los resultados en test simple no fueron casualidad: la regresión lineal <strong>no capta patrones temporales robustos en los retornos</strong>.</p></li>
<li><p><strong>Diagnóstico de supuestos</strong></p></li>
<li><p><strong>No autocorrelación</strong> significativa de los residuos (Durbin–Watson correcto).</p>
<p><strong>Heterocedasticidad presente</strong> (Breusch–Pagan significativo).</p>
<p>Residuos aproximadamente normales, con desvíos en colas.</p>
<p>Sin problemas graves de multicolinealidad (VIF &lt; 5).</p>
<p><strong>Interpretación económica y práctica</strong></p></li>
<li><p>El retorno del oro no puede explicarse bien solo con regresores lineales como dólar, petróleo, inflación o indicadores técnicos.</p>
<p>Los resultados reflejan la <strong>alta aleatoriedad y ruido en series financieras de retornos</strong>, donde los modelos lineales básicos son insuficientes.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Intento 1: pedir IC al workflow (parsnip reciente lo soporta)</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>preds_ci <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">predict</span>(fit_lm, <span class="at">new_data =</span> test, <span class="at">type =</span> <span class="st">"conf_int"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>      <span class="fu">predict</span>(fit_lm, <span class="at">new_data =</span> test, <span class="at">type =</span> <span class="st">"numeric"</span>),</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>      test <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, gold_next_ret)</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>}, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fallback: extraer el lm interno y hornear test con la receta</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  rec_prep   <span class="ot">&lt;-</span> recipes<span class="sc">::</span><span class="fu">prep</span>(rec)</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>  test_baked <span class="ot">&lt;-</span> recipes<span class="sc">::</span><span class="fu">bake</span>(rec_prep, <span class="at">new_data =</span> test)</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>  eng_lm     <span class="ot">&lt;-</span> workflows<span class="sc">::</span><span class="fu">extract_fit_engine</span>(fit_lm)  <span class="co"># objeto 'lm'</span></span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>  ci_lm      <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">predict</span>(eng_lm, <span class="at">newdata =</span> test_baked, <span class="at">interval =</span> <span class="st">"confidence"</span>))</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>(ci_lm) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">".pred"</span>, <span class="st">".pred_lower"</span>, <span class="st">".pred_upper"</span>)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(test <span class="sc">%&gt;%</span> <span class="fu">select</span>(date, gold_next_ret), ci_lm)</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Rango de fechas efectivamente predicho en </span><span class="al">TEST</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>rango <span class="ot">&lt;-</span> preds_ci <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">min_fecha =</span> <span class="fu">min</span>(date), <span class="at">max_fecha =</span> <span class="fu">max</span>(date))</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(rango)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  min_fecha  max_fecha 
  &lt;date&gt;     &lt;date&gt;    
1 2021-07-01 2024-11-01</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tabla de los últimos 12 meses</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>preds_ci <span class="sc">%&gt;%</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">12</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, gold_next_ret, .pred, .pred_lower, .pred_upper) <span class="sc">%&gt;%</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"LM múltiple: Real vs Predicho (IC 95%) — últimos 12 meses"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="at">columns =</span> <span class="fu">c</span>(gold_next_ret, .pred, .pred_lower, .pred_upper),</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">decimals =</span> <span class="dv">6</span>, <span class="at">dec_mark =</span> <span class="st">","</span>, <span class="at">sep_mark =</span> <span class="st">"."</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="xtujshlvrd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#xtujshlvrd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#xtujshlvrd thead, #xtujshlvrd tbody, #xtujshlvrd tfoot, #xtujshlvrd tr, #xtujshlvrd td, #xtujshlvrd th {
  border-style: none;
}

#xtujshlvrd p {
  margin: 0;
  padding: 0;
}

#xtujshlvrd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#xtujshlvrd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#xtujshlvrd .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#xtujshlvrd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#xtujshlvrd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xtujshlvrd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xtujshlvrd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#xtujshlvrd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#xtujshlvrd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#xtujshlvrd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#xtujshlvrd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#xtujshlvrd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#xtujshlvrd .gt_spanner_row {
  border-bottom-style: hidden;
}

#xtujshlvrd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#xtujshlvrd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#xtujshlvrd .gt_from_md > :first-child {
  margin-top: 0;
}

#xtujshlvrd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#xtujshlvrd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#xtujshlvrd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#xtujshlvrd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#xtujshlvrd .gt_row_group_first td {
  border-top-width: 2px;
}

#xtujshlvrd .gt_row_group_first th {
  border-top-width: 2px;
}

#xtujshlvrd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtujshlvrd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#xtujshlvrd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#xtujshlvrd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xtujshlvrd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtujshlvrd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#xtujshlvrd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#xtujshlvrd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#xtujshlvrd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#xtujshlvrd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xtujshlvrd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtujshlvrd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#xtujshlvrd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#xtujshlvrd .gt_left {
  text-align: left;
}

#xtujshlvrd .gt_center {
  text-align: center;
}

#xtujshlvrd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#xtujshlvrd .gt_font_normal {
  font-weight: normal;
}

#xtujshlvrd .gt_font_bold {
  font-weight: bold;
}

#xtujshlvrd .gt_font_italic {
  font-style: italic;
}

#xtujshlvrd .gt_super {
  font-size: 65%;
}

#xtujshlvrd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#xtujshlvrd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#xtujshlvrd .gt_indent_1 {
  text-indent: 5px;
}

#xtujshlvrd .gt_indent_2 {
  text-indent: 10px;
}

#xtujshlvrd .gt_indent_3 {
  text-indent: 15px;
}

#xtujshlvrd .gt_indent_4 {
  text-indent: 20px;
}

#xtujshlvrd .gt_indent_5 {
  text-indent: 25px;
}

#xtujshlvrd .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#xtujshlvrd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">LM múltiple: Real vs Predicho (IC 95%) — últimos 12 meses</th>
</tr>
<tr class="odd gt_col_headings">
<th id="date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">date</th>
<th id="gold_next_ret" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">gold_next_ret</th>
<th id="a.pred" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.pred</th>
<th id="a.pred_lower" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.pred_lower</th>
<th id="a.pred_upper" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.pred_upper</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="date">2023-08-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,002505</td>
<td class="gt_row gt_right" headers=".pred">−0,021000</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,042025</td>
<td class="gt_row gt_right" headers=".pred_upper">0,000026</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2023-09-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,000969</td>
<td class="gt_row gt_right" headers=".pred">−0,020952</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,042479</td>
<td class="gt_row gt_right" headers=".pred_upper">0,000575</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2023-11-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,024420</td>
<td class="gt_row gt_right" headers=".pred">−0,000790</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,028023</td>
<td class="gt_row gt_right" headers=".pred_upper">0,026443</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2023-12-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,002707</td>
<td class="gt_row gt_right" headers=".pred">−0,003507</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,027848</td>
<td class="gt_row gt_right" headers=".pred_upper">0,020835</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-02-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,065018</td>
<td class="gt_row gt_right" headers=".pred">−0,011772</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,030535</td>
<td class="gt_row gt_right" headers=".pred_upper">0,006990</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-03-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,078818</td>
<td class="gt_row gt_right" headers=".pred">−0,005882</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,027013</td>
<td class="gt_row gt_right" headers=".pred_upper">0,015249</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-04-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,008184</td>
<td class="gt_row gt_right" headers=".pred">−0,009868</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,032426</td>
<td class="gt_row gt_right" headers=".pred_upper">0,012690</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-05-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,009112</td>
<td class="gt_row gt_right" headers=".pred">−0,002909</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,028283</td>
<td class="gt_row gt_right" headers=".pred_upper">0,022465</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-07-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,031529</td>
<td class="gt_row gt_right" headers=".pred">−0,002817</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,028128</td>
<td class="gt_row gt_right" headers=".pred_upper">0,022495</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-08-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">0,043402</td>
<td class="gt_row gt_right" headers=".pred">0,001260</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,027939</td>
<td class="gt_row gt_right" headers=".pred_upper">0,030459</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers="date">2024-10-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,012634</td>
<td class="gt_row gt_right" headers=".pred">−0,006938</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,037252</td>
<td class="gt_row gt_right" headers=".pred_upper">0,023376</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers="date">2024-11-01</td>
<td class="gt_row gt_right" headers="gold_next_ret">−0,003942</td>
<td class="gt_row gt_right" headers=".pred">−0,012919</td>
<td class="gt_row gt_right" headers=".pred_lower">−0,044631</td>
<td class="gt_row gt_right" headers=".pred_upper">0,018793</td>
</tr>
</tbody>
</table>

</div>
</div>
</div></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>preds_ci <span class="sc">%&gt;%</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(date)) <span class="sc">+</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> gold_next_ret), <span class="at">linewidth =</span> <span class="fl">0.7</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> .pred_lower, <span class="at">ymax =</span> .pred_upper), <span class="at">alpha =</span> <span class="fl">0.20</span>) <span class="sc">+</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> .pred), <span class="at">linewidth =</span> <span class="fl">0.9</span>, <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title   =</span> <span class="st">"Regresión lineal múltiple: Real vs Predicho con IC 95%"</span>,</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">y =</span> <span class="st">"Retorno del oro (t+1)"</span>,</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Línea negra: real | Línea azul: predicho | Banda: IC 95% (media condicional)"</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/graf-preds-ic-1.png" class="img-fluid figure-img" width="672"></p>
<figcaption>Regresión lineal múltiple: Real vs Predicho con IC 95%</figcaption>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="unidad-4.-regresión-logística" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Unidad 4. Regresión Logística</h1>
<p>En análisis econométrico, cuando la variable dependiente es <strong>binaria</strong> (toma valores 0 o 1), como por ejemplo:</p>
<ul>
<li><p>Trabaja (1) o no trabaja (0)</p></li>
<li><p>Está enfermo (1) o no está enfermo (0),</p></li>
<li><p>Vota por un candidato (1) o no (0),</p></li>
</ul>
<p>El uso de un modelo de regresión lineal tradicional no es adecuado. El <strong>modelo logit</strong> se propone como una solución, garantizando que las probabilidades predichas estén siempre en el rango <strong>[0,1]</strong> gracias a la función logística.</p>
<ol type="1">
<li><p><strong>Probabilidad en el modelo logit</strong></p>
<p><span class="math display">\[
P(Y=1 \mid X) \;=\; \frac{e^{\beta_0 + \beta_1 X_1 + \cdots + \beta_k X_k}}{1 + e^{\beta_0 + \beta_1 X_1 + \cdots + \beta_k X_k}}
\]</span></p></li>
<li><p><strong>Forma de razón de probabilidades (odds)</strong>; definimos la razón de probabilidades u odds como:</p></li>
</ol>
<p><span class="math display">\[
\text{odds} \;=\; \frac{P(Y=1 \mid X)}{1 - P(Y=1 \mid X)}
\]</span></p>
<ol type="1">
<li><p><strong>Linealización mediante el logit</strong></p>
<p>Al aplicar logaritmo a los odds, obtenemos la funcion logit, que es lineal en los parámetros</p></li>
</ol>
<p><span class="math display">\[
\text{logit}(P) \;=\; \ln\left(\frac{P(Y=1 \mid X)}{1 - P(Y=1 \mid X)}\right)
= \beta_0 + \beta_1 X_1 + \cdots + \beta_k X_k
\]</span></p>
<ol type="1">
<li><p><strong>Interpretación de los coeficientes</strong></p>
<p>Un cambio unitario en <span class="math inline">\(X_i\)</span> altera las odds en un factor multiplicativo:</p>
<p><span class="math display">\[
\Delta \text{odds} \;=\; e^{\beta_i}
\]</span></p></li>
</ol>
<p><strong>Ejemplo práctico</strong></p>
<p>Queremos modelar la probabilidad de que el <strong>precio del oro aumente en un día</strong> ( <span class="math inline">\(Y\)</span>=1) o <strong>no aumente</strong> (<span class="math inline">\(Y\)</span>=0), en función de variables financieras:</p>
<ul>
<li><p><strong>Variación del dólar</strong>: rendimiento diario del dólar</p></li>
<li><p><strong>Tasa de interés</strong> : nivel de la tasa de interés de referencia.</p>
<p>Variable dependiente (Binaria)</p></li>
</ul>
<p><span class="math display">\[
Y =
\begin{cases}
1 &amp; \text{si el precio del oro sube ese día} \\
0 &amp; \text{si baja o se mantiene}
\end{cases}
\]</span></p>
<ol start="2" type="1">
<li><strong>¿Cómo queda el modelo logit?</strong></li>
</ol>
<p><span class="math display">\[
P(Y=1 \mid X) \;=\;
\frac{e^{\beta_0 + \beta_1 \cdot dollar\_ret + \beta_2 \cdot rate}}
{1 + e^{\beta_0 + \beta_1 \cdot dollar\_ret + \beta_2 \cdot rate}}
\]</span></p>
<ol start="3" type="1">
<li><p><strong>Resultados simulados:</strong></p>
<p>Supongamos que la estimación nos da:</p>
<ul>
<li><span class="math inline">\(B_0\)</span> =-0.5</li>
<li><span class="math inline">\(B_1\)</span> = -2.0 (rendimiento del dólar)</li>
<li><span class="math inline">\(B_2\)</span> = -0.3 (tasa de interés)</li>
</ul>
<p><strong>Modelo estimado</strong></p></li>
</ol>
<p><span class="math display">\[
\hat{P}(Y=1 \mid X) \;=\;
\frac{e^{-0.5 - 2.0 \cdot dollar\_ret - 0.3 \cdot rate}}
{1 + e^{-0.5 - 2.0 \cdot dollar\_ret - 0.3 \cdot rate}}
\]</span></p>
<ol start="4" type="1">
<li><p><strong>Interpretación de los coeficientes</strong></p>
<p><strong>Coeficiente del Dolar</strong></p>
<p>Si el dólar sube un punto porcentual, las <em>odds</em> de que el oro suba <strong>se reducen en un factor</strong></p></li>
</ol>
<p><span class="math display">\[
e^{-2.0} \;\approx\; 0.14
\]</span></p>
<p>En términos prácticos: cuando el dólar se fortalece, el oro casi siempre baja (relación inversa clásica).</p>
<p><strong>Coeficiente de la tasa de interés</strong></p>
<p>Un incremento de un punto en la tasa de interés reduce las <em>odds</em> de que el oro suba en un factor</p>
<p><span class="math display">\[
e^{-0.3} \;\approx\; 0.74
\]</span></p>
<p>Es decir, tasas más altas desincentivan la inversión en oro (activo de refugio sin rendimiento).</p>
<p><strong>Supongamos:</strong></p>
<ul>
<li><p><span class="math inline">\(dollar_ret=−0.01\)</span> el dólar cae 1%</p></li>
<li><p><span class="math inline">\(rate=2\)</span>%</p></li>
<li><p><strong>Sustituimos</strong></p></li>
</ul>
<p><span class="math display">\[
z = -0.5 - 2.0(-0.01) - 0.3(2)
= -0.5 + 0.02 - 0.6
= -1.08
\]</span></p>
<p><span class="math display">\[
\hat{P}(Y=1) \;=\;
\frac{e^{-1.08}}{1 + e^{-1.08}}
\;\approx\; 0.25
\]</span></p>
<p>La probabilidad de que el oro suba bajo esas condiciones es <strong>25%</strong>.</p>
<div class="cell">
<div class="cell-output-display">
<div id="uzsromwpiy" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#uzsromwpiy table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#uzsromwpiy thead, #uzsromwpiy tbody, #uzsromwpiy tfoot, #uzsromwpiy tr, #uzsromwpiy td, #uzsromwpiy th {
  border-style: none;
}

#uzsromwpiy p {
  margin: 0;
  padding: 0;
}

#uzsromwpiy .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uzsromwpiy .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#uzsromwpiy .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uzsromwpiy .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uzsromwpiy .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uzsromwpiy .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzsromwpiy .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uzsromwpiy .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uzsromwpiy .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uzsromwpiy .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uzsromwpiy .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uzsromwpiy .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uzsromwpiy .gt_spanner_row {
  border-bottom-style: hidden;
}

#uzsromwpiy .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#uzsromwpiy .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uzsromwpiy .gt_from_md > :first-child {
  margin-top: 0;
}

#uzsromwpiy .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uzsromwpiy .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uzsromwpiy .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#uzsromwpiy .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#uzsromwpiy .gt_row_group_first td {
  border-top-width: 2px;
}

#uzsromwpiy .gt_row_group_first th {
  border-top-width: 2px;
}

#uzsromwpiy .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzsromwpiy .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#uzsromwpiy .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#uzsromwpiy .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzsromwpiy .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzsromwpiy .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uzsromwpiy .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#uzsromwpiy .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uzsromwpiy .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uzsromwpiy .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uzsromwpiy .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzsromwpiy .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uzsromwpiy .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uzsromwpiy .gt_left {
  text-align: left;
}

#uzsromwpiy .gt_center {
  text-align: center;
}

#uzsromwpiy .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uzsromwpiy .gt_font_normal {
  font-weight: normal;
}

#uzsromwpiy .gt_font_bold {
  font-weight: bold;
}

#uzsromwpiy .gt_font_italic {
  font-style: italic;
}

#uzsromwpiy .gt_super {
  font-size: 65%;
}

#uzsromwpiy .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#uzsromwpiy .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#uzsromwpiy .gt_indent_1 {
  text-indent: 5px;
}

#uzsromwpiy .gt_indent_2 {
  text-indent: 10px;
}

#uzsromwpiy .gt_indent_3 {
  text-indent: 15px;
}

#uzsromwpiy .gt_indent_4 {
  text-indent: 20px;
}

#uzsromwpiy .gt_indent_5 {
  text-indent: 25px;
}

#uzsromwpiy .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#uzsromwpiy div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Distribución de clases (objetivo: up_next)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="up_next" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">up_next</th>
<th id="n" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n</th>
<th id="prop" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">prop</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_center" headers="up_next">DOWN</td>
<td class="gt_row gt_right" headers="n">71</td>
<td class="gt_row gt_right" headers="prop">0,480</td>
</tr>
<tr class="even">
<td class="gt_row gt_center" headers="up_next">UP</td>
<td class="gt_row gt_right" headers="n">77</td>
<td class="gt_row gt_right" headers="prop">0,520</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
<section id="partición-temporal-8020" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> <strong>Partición temporal 80/20</strong></h1>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>datos_cls <span class="ot">&lt;-</span> d <span class="sc">|&gt;</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date, up_next, dollar_ret, wti_ret, infl_yoy, ma6, ma12, rsi14) <span class="sc">|&gt;</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(date)</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>split_cls <span class="ot">&lt;-</span> <span class="fu">initial_time_split</span>(datos_cls, <span class="at">prop =</span> <span class="fl">0.80</span>)</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>train_cls  <span class="ot">&lt;-</span> <span class="fu">training</span>(split_cls)</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>test_cls   <span class="ot">&lt;-</span> <span class="fu">testing</span>(split_cls)</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_train =</span> <span class="fu">nrow</span>(train_cls), <span class="at">n_test =</span> <span class="fu">nrow</span>(test_cls),</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_train =</span> <span class="fu">min</span>(train_cls<span class="sc">$</span>date), <span class="at">max_train =</span> <span class="fu">max</span>(train_cls<span class="sc">$</span>date),</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_test  =</span> <span class="fu">min</span>(test_cls<span class="sc">$</span>date),  <span class="at">max_test  =</span> <span class="fu">max</span>(test_cls<span class="sc">$</span>date)</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Partición temporal (clasificación)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="osncjrvket" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#osncjrvket table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#osncjrvket thead, #osncjrvket tbody, #osncjrvket tfoot, #osncjrvket tr, #osncjrvket td, #osncjrvket th {
  border-style: none;
}

#osncjrvket p {
  margin: 0;
  padding: 0;
}

#osncjrvket .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#osncjrvket .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#osncjrvket .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#osncjrvket .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#osncjrvket .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#osncjrvket .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#osncjrvket .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#osncjrvket .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#osncjrvket .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#osncjrvket .gt_spanner_row {
  border-bottom-style: hidden;
}

#osncjrvket .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#osncjrvket .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#osncjrvket .gt_from_md > :first-child {
  margin-top: 0;
}

#osncjrvket .gt_from_md > :last-child {
  margin-bottom: 0;
}

#osncjrvket .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#osncjrvket .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#osncjrvket .gt_row_group_first td {
  border-top-width: 2px;
}

#osncjrvket .gt_row_group_first th {
  border-top-width: 2px;
}

#osncjrvket .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#osncjrvket .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#osncjrvket .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#osncjrvket .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#osncjrvket .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#osncjrvket .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#osncjrvket .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#osncjrvket .gt_left {
  text-align: left;
}

#osncjrvket .gt_center {
  text-align: center;
}

#osncjrvket .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#osncjrvket .gt_font_normal {
  font-weight: normal;
}

#osncjrvket .gt_font_bold {
  font-weight: bold;
}

#osncjrvket .gt_font_italic {
  font-style: italic;
}

#osncjrvket .gt_super {
  font-size: 65%;
}

#osncjrvket .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#osncjrvket .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#osncjrvket .gt_indent_1 {
  text-indent: 5px;
}

#osncjrvket .gt_indent_2 {
  text-indent: 10px;
}

#osncjrvket .gt_indent_3 {
  text-indent: 15px;
}

#osncjrvket .gt_indent_4 {
  text-indent: 20px;
}

#osncjrvket .gt_indent_5 {
  text-indent: 25px;
}

#osncjrvket .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#osncjrvket div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="6" class="gt_heading gt_title gt_font_normal gt_bottom_border">Partición temporal (clasificación)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="n_train" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n_train</th>
<th id="n_test" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">n_test</th>
<th id="min_train" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">min_train</th>
<th id="max_train" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">max_train</th>
<th id="min_test" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">min_test</th>
<th id="max_test" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">max_test</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers="n_train">118</td>
<td class="gt_row gt_right" headers="n_test">30</td>
<td class="gt_row gt_right" headers="min_train">2006-02-01</td>
<td class="gt_row gt_right" headers="max_train">2021-06-01</td>
<td class="gt_row gt_right" headers="min_test">2021-07-01</td>
<td class="gt_row gt_right" headers="max_test">2024-11-01</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="feature-engineering-recipes" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="feature-engineering-recipes"><span class="header-section-number">7.1</span> Feature Engineering (recipes)</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>rec_cls <span class="ot">&lt;-</span> <span class="fu">recipe</span>(</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  up_next <span class="sc">~</span> dollar_ret <span class="sc">+</span> wti_ret <span class="sc">+</span> infl_yoy <span class="sc">+</span> ma6 <span class="sc">+</span> ma12 <span class="sc">+</span> rsi14,</span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> train_cls</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_zv</span>(<span class="fu">all_predictors</span>()) <span class="sc">|&gt;</span>               <span class="co"># quita columnas constantes</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_normalize</span>(<span class="fu">all_numeric_predictors</span>()) <span class="sc">|&gt;</span> <span class="co"># centra/escala numéricos</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">step_corr</span>(<span class="fu">all_numeric_predictors</span>(), <span class="at">threshold =</span> <span class="fl">0.95</span>) <span class="co"># colinealidad severa</span></span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>rec_cls</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Recipe ──────────────────────────────────────────────────────────────────────</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Inputs </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Number of variables by role</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>outcome:   1
predictor: 6</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code></code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>── Operations </code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Zero variance filter on: all_predictors()</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Centering and scaling for: all_numeric_predictors()</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>• Correlation filter on: all_numeric_predictors()</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># (Opcional) Si ves desbalance fuerte, puedes balancear SOLO en train:</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="co"># rec_cls &lt;- rec_cls |&gt; step_smote(up_next, over_ratio = 1) </span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="co"># -&gt; requiere library(themis)</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Por qué:</strong> normalizamos escalas; reducimos colinealidad (<code>ma6</code> vs <code>ma12</code>); opcionalmente balanceamos (SMOTE) si la clase UP o DOWN es muy minoritaria.</p>
</section>
<section id="especificación-del-modelo" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="especificación-del-modelo"><span class="header-section-number">7.2</span> <strong>Especificación del modelo</strong></h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>mod_log <span class="ot">&lt;-</span> <span class="fu">logistic_reg</span>() <span class="sc">|&gt;</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"glm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_mode</span>(<span class="st">"classification"</span>)</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mod_log)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                      Length Class    Mode     
args                  2      -none-   list     
eng_args              0      quosures list     
mode                  1      -none-   character
user_specified_mode   1      -none-   logical  
method                0      -none-   NULL     
engine                1      -none-   character
user_specified_engine 1      -none-   logical  </code></pre>
</div>
</div>
<p><strong>Por qué:</strong> <code>glm</code> logística es interpretable y un buen baseline; luego puedes pasar a <code>glmnet</code> con penalización si quieres.</p>
</section>
<section id="workflow" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="workflow"><span class="header-section-number">7.3</span> Workflow</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>wf_cls <span class="ot">&lt;-</span> <span class="fu">workflow</span>() <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_recipe</span>(rec_cls) <span class="sc">|&gt;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_model</span>(mod_log)</span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>wf_cls</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>══ Workflow ════════════════════════════════════════════════════════════════════
Preprocessor: Recipe
Model: logistic_reg()

── Preprocessor ────────────────────────────────────────────────────────────────
3 Recipe Steps

• step_zv()
• step_normalize()
• step_corr()

── Model ───────────────────────────────────────────────────────────────────────
Logistic Regression Model Specification (classification)

Computational engine: glm </code></pre>
</div>
</div>
<p><strong>Por qué:</strong> asegura que el preprocesamiento (receta) se aplique <strong>dentro</strong> del pipeline (sin data leakage) antes de entrenar/predicir.</p>
</section>
<section id="ajuste-fit-y-predicción-en-test" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="ajuste-fit-y-predicción-en-test"><span class="header-section-number">7.4</span> <strong>Ajuste (fit) y predicción en test</strong></h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>fit_log <span class="ot">&lt;-</span> <span class="fu">fit</span>(wf_cls, <span class="at">data =</span> train_cls)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Probabilidades y clases (umbral 0.5 por defecto)</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>pred_cls <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit_log, <span class="at">new_data =</span> test_cls, <span class="at">type =</span> <span class="st">"prob"</span>) <span class="sc">|&gt;</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">predict</span>(fit_log, <span class="at">new_data =</span> test_cls, <span class="at">type =</span> <span class="st">"class"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(test_cls <span class="sc">|&gt;</span> <span class="fu">select</span>(date, up_next))</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>pred_cls <span class="sc">|&gt;</span> <span class="fu">head</span>() <span class="sc">|&gt;</span> <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Predicciones (muestra)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="zgjisdnqkg" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#zgjisdnqkg table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#zgjisdnqkg thead, #zgjisdnqkg tbody, #zgjisdnqkg tfoot, #zgjisdnqkg tr, #zgjisdnqkg td, #zgjisdnqkg th {
  border-style: none;
}

#zgjisdnqkg p {
  margin: 0;
  padding: 0;
}

#zgjisdnqkg .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#zgjisdnqkg .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#zgjisdnqkg .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#zgjisdnqkg .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#zgjisdnqkg .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#zgjisdnqkg .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#zgjisdnqkg .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#zgjisdnqkg .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#zgjisdnqkg .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#zgjisdnqkg .gt_spanner_row {
  border-bottom-style: hidden;
}

#zgjisdnqkg .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#zgjisdnqkg .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#zgjisdnqkg .gt_from_md > :first-child {
  margin-top: 0;
}

#zgjisdnqkg .gt_from_md > :last-child {
  margin-bottom: 0;
}

#zgjisdnqkg .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#zgjisdnqkg .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#zgjisdnqkg .gt_row_group_first td {
  border-top-width: 2px;
}

#zgjisdnqkg .gt_row_group_first th {
  border-top-width: 2px;
}

#zgjisdnqkg .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#zgjisdnqkg .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#zgjisdnqkg .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#zgjisdnqkg .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#zgjisdnqkg .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#zgjisdnqkg .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#zgjisdnqkg .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#zgjisdnqkg .gt_left {
  text-align: left;
}

#zgjisdnqkg .gt_center {
  text-align: center;
}

#zgjisdnqkg .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#zgjisdnqkg .gt_font_normal {
  font-weight: normal;
}

#zgjisdnqkg .gt_font_bold {
  font-weight: bold;
}

#zgjisdnqkg .gt_font_italic {
  font-style: italic;
}

#zgjisdnqkg .gt_super {
  font-size: 65%;
}

#zgjisdnqkg .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#zgjisdnqkg .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#zgjisdnqkg .gt_indent_1 {
  text-indent: 5px;
}

#zgjisdnqkg .gt_indent_2 {
  text-indent: 10px;
}

#zgjisdnqkg .gt_indent_3 {
  text-indent: 15px;
}

#zgjisdnqkg .gt_indent_4 {
  text-indent: 20px;
}

#zgjisdnqkg .gt_indent_5 {
  text-indent: 25px;
}

#zgjisdnqkg .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#zgjisdnqkg div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="5" class="gt_heading gt_title gt_font_normal gt_bottom_border">Predicciones (muestra)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.pred_DOWN" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.pred_DOWN</th>
<th id="a.pred_UP" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.pred_UP</th>
<th id="a.pred_class" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">.pred_class</th>
<th id="date" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">date</th>
<th id="up_next" class="gt_col_heading gt_columns_bottom_border gt_center" data-quarto-table-cell-role="th" scope="col">up_next</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_right" headers=".pred_DOWN">0.8290540</td>
<td class="gt_row gt_right" headers=".pred_UP">0.1709460</td>
<td class="gt_row gt_center" headers=".pred_class">DOWN</td>
<td class="gt_row gt_right" headers="date">2021-07-01</td>
<td class="gt_row gt_center" headers="up_next">DOWN</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred_DOWN">0.8312140</td>
<td class="gt_row gt_right" headers=".pred_UP">0.1687860</td>
<td class="gt_row gt_center" headers=".pred_class">DOWN</td>
<td class="gt_row gt_right" headers="date">2021-09-01</td>
<td class="gt_row gt_center" headers="up_next">DOWN</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred_DOWN">0.8740823</td>
<td class="gt_row gt_right" headers=".pred_UP">0.1259177</td>
<td class="gt_row gt_center" headers=".pred_class">DOWN</td>
<td class="gt_row gt_right" headers="date">2021-10-01</td>
<td class="gt_row gt_center" headers="up_next">UP</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred_DOWN">0.8747655</td>
<td class="gt_row gt_right" headers=".pred_UP">0.1252345</td>
<td class="gt_row gt_center" headers=".pred_class">DOWN</td>
<td class="gt_row gt_right" headers="date">2021-11-01</td>
<td class="gt_row gt_center" headers="up_next">DOWN</td>
</tr>
<tr class="odd">
<td class="gt_row gt_right" headers=".pred_DOWN">0.8931019</td>
<td class="gt_row gt_right" headers=".pred_UP">0.1068981</td>
<td class="gt_row gt_center" headers=".pred_class">DOWN</td>
<td class="gt_row gt_right" headers="date">2021-12-01</td>
<td class="gt_row gt_center" headers="up_next">UP</td>
</tr>
<tr class="even">
<td class="gt_row gt_right" headers=".pred_DOWN">0.8934147</td>
<td class="gt_row gt_right" headers=".pred_UP">0.1065853</td>
<td class="gt_row gt_center" headers=".pred_class">DOWN</td>
<td class="gt_row gt_right" headers="date">2022-02-01</td>
<td class="gt_row gt_center" headers="up_next">UP</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li><p><code>type = "prob"</code> devuelve <code>(.pred_DOWN, .pred_UP)</code></p>
<p><code>type = "class"</code> usa umbral 0.5 para asignar clase</p></li>
<li><p>Qué significan las columnas</p></li>
</ul>
<!-- -->
<ul>
<li><p><strong><code>.pred_DOWN</code> y <code>.pred_UP</code></strong><br>
Son las <strong>probabilidades estimadas</strong> de que la variable respuesta tome cada clase.</p>
<ul>
<li>Ejemplo: <code>0.829 → DOWN</code>, <code>0.171 → UP</code>.</li>
</ul>
<p><strong><code>.pred_class</code></strong><br>
Es la <strong>clase predicha</strong> por el modelo. Se asigna según la probabilidad mayor (umbral 0.5 por defecto).</p>
<ul>
<li><p>Si <code>pred_DOWN &gt; 0.5</code>, la clase es <em>DOWN</em>.</p>
<p>Si <code>pred_UP &gt; 0.5</code>, la clase es <em>UP</em>.</p></li>
</ul>
<p><strong><code>date</code></strong><br>
El período de la observación en el set de prueba.</p>
<p><strong><code>up_next</code></strong><br>
La <strong>clase real observada</strong> (lo que efectivamente pasó en la variable dependiente).</p></li>
</ul>
</section>
<section id="interpretación-de-la-muestra" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="interpretación-de-la-muestra"><span class="header-section-number">7.5</span> 🔎 Interpretación de la muestra</h2>
<ol type="1">
<li><p><strong>Primera fila (2021-07-01)</strong></p>
<ul>
<li><p>Modelo: 82.9% probabilidad de <em>DOWN</em>.</p>
<p>Predicción: <em>DOWN</em>.</p>
<p>Realidad: <em>DOWN</em>.<br>
→ ✅ Acierto.</p></li>
</ul>
<ol start="2" type="1">
<li><p><strong>Segunda fila (2021-09-01)</strong></p>
<p>Prob. <em>DOWN</em> 83.1% vs <em>UP</em> 16.9%.</p>
<p>Predicción: <em>DOWN</em>.</p>
<p>Realidad: <em>DOWN</em>.<br>
→ ✅ Acierto.</p></li>
<li><p><strong>Tercera fila (2021-10-01)</strong></p></li>
<li><p>Prob. <em>DOWN</em> 87.4% vs <em>UP</em> 12.6%.</p>
<p>Predicción: <em>DOWN</em>.</p>
<p>Realidad: <em>UP</em>.<br>
→ ❌ Error: el modelo estaba muy seguro pero se equivocó.</p></li>
</ol>
<p><strong>Cuarta fila (2021-11-01)</strong></p>
<ul>
<li><p>Prob. <em>DOWN</em> 87.5%.</p>
<p>Predicción: <em>DOWN</em></p>
<p>Realidad: <em>DOWN</em>.<br>
→ ✅ Acierto</p></li>
</ul>
<p><strong>Quinta fila (2021-12-01)</strong></p>
<ul>
<li><p>Prob. <em>DOWN</em> 89.3%.</p>
<p>Predicción: <em>DOWN</em>.</p>
<p>Realidad: <em>DOWN</em>.<br>
→ ✅ Acierto.</p></li>
<li><p><strong>Sexta fila (2022-01-01)</strong></p>
<p>Prob. <em>DOWN</em> 89.3%.</p>
<p>Predicción: <em>DOWN</em>.</p>
<p>Realidad: <em>UP</em>.<br>
→ ❌ Error.</p></li>
</ul></li>
</ol>
</section>
<section id="evaluación-de-la-clasificación" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="evaluación-de-la-clasificación"><span class="header-section-number">7.6</span> Evaluación de la clasificación</h2>
<section id="métricas-básicas" class="level3" data-number="7.6.1">
<h3 data-number="7.6.1" class="anchored" data-anchor-id="métricas-básicas"><span class="header-section-number">7.6.1</span> Métricas básicas</h3>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Accuracy, Kappa, etc.</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>metrics_overall <span class="ot">&lt;-</span> yardstick<span class="sc">::</span><span class="fu">metrics</span>(pred_cls, <span class="at">truth =</span> up_next, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(metrics_overall) <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Métricas (umbral 0.5)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ulojmgiijw" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ulojmgiijw table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ulojmgiijw thead, #ulojmgiijw tbody, #ulojmgiijw tfoot, #ulojmgiijw tr, #ulojmgiijw td, #ulojmgiijw th {
  border-style: none;
}

#ulojmgiijw p {
  margin: 0;
  padding: 0;
}

#ulojmgiijw .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ulojmgiijw .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ulojmgiijw .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ulojmgiijw .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ulojmgiijw .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ulojmgiijw .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ulojmgiijw .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ulojmgiijw .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ulojmgiijw .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ulojmgiijw .gt_spanner_row {
  border-bottom-style: hidden;
}

#ulojmgiijw .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ulojmgiijw .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ulojmgiijw .gt_from_md > :first-child {
  margin-top: 0;
}

#ulojmgiijw .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ulojmgiijw .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ulojmgiijw .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ulojmgiijw .gt_row_group_first td {
  border-top-width: 2px;
}

#ulojmgiijw .gt_row_group_first th {
  border-top-width: 2px;
}

#ulojmgiijw .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ulojmgiijw .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ulojmgiijw .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ulojmgiijw .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ulojmgiijw .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ulojmgiijw .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ulojmgiijw .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ulojmgiijw .gt_left {
  text-align: left;
}

#ulojmgiijw .gt_center {
  text-align: center;
}

#ulojmgiijw .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ulojmgiijw .gt_font_normal {
  font-weight: normal;
}

#ulojmgiijw .gt_font_bold {
  font-weight: bold;
}

#ulojmgiijw .gt_font_italic {
  font-style: italic;
}

#ulojmgiijw .gt_super {
  font-size: 65%;
}

#ulojmgiijw .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ulojmgiijw .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ulojmgiijw .gt_indent_1 {
  text-indent: 5px;
}

#ulojmgiijw .gt_indent_2 {
  text-indent: 10px;
}

#ulojmgiijw .gt_indent_3 {
  text-indent: 15px;
}

#ulojmgiijw .gt_indent_4 {
  text-indent: 20px;
}

#ulojmgiijw .gt_indent_5 {
  text-indent: 25px;
}

#ulojmgiijw .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ulojmgiijw div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Métricas (umbral 0.5)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id="a.estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="a.estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers=".metric">accuracy</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers=".estimate">0.4666667</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=".metric">kap</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers=".estimate">0.0000000</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="resultados-mostrados" class="level2" data-number="7.7">
<h2 data-number="7.7" class="anchored" data-anchor-id="resultados-mostrados"><span class="header-section-number">7.7</span> Resultados mostrados</h2>
<ul>
<li><p><strong>Accuracy (Exactitud): 0.467</strong></p>
<ul>
<li><p>El modelo acierta en <strong>≈47% de los casos</strong>.</p>
<p>Esto es <strong>peor que lanzar una moneda al aire (50%)</strong>, lo cual indica que el modelo no está aprendiendo un patrón útil con el umbral de 0.5.</p></li>
</ul>
<p><strong>Kappa (Cohen’s Kappa): 0.000</strong></p>
<ul>
<li><p>Kappa mide el acuerdo entre lo predicho y lo real, corrigiendo por el azar.</p>
<p>Un valor <strong>cercano a 0</strong> significa que el modelo <strong>no predice mejor que el azar</strong>.</p>
<p>Valores aceptables suelen estar sobre 0.2 (débil), 0.4 (moderado), 0.6+ (fuerte).</p></li>
</ul></li>
</ul>
</section>
<section id="interpretación" class="level2" data-number="7.8">
<h2 data-number="7.8" class="anchored" data-anchor-id="interpretación"><span class="header-section-number">7.8</span> 🔎 Interpretación</h2>
<ol type="1">
<li><p><strong>Sesgo hacia una clase</strong><br>
El modelo probablemente <strong>predice la mayoría de las veces la clase DOWN</strong>, lo que hace que falle cuando la clase real es UP.<br>
Esto puede deberse a un <strong>desbalance de clases</strong> en los datos de entrenamiento.</p>
<p><strong>Umbral fijo (0.5)</strong><br>
Con un umbral de decisión de 0.5, el modelo puede estar siendo demasiado rígido. Quizás ajustando el umbral se mejore el equilibrio entre <strong>sensibilidad (recall)</strong> y <strong>precisión (precision)</strong>.</p>
<p><strong>Valor práctico</strong><br>
Tal como está, el modelo <strong>no es confiable</strong> para tomar decisiones, porque no supera el azar. Necesita:</p>
<ul>
<li><p>Revisión de <strong>balance de clases</strong> (ej. <em>downsample</em>, <em>upsample</em>, SMOTE).</p>
<p>Revisión de <strong>features</strong> (quizás faltan variables explicativas relevantes).</p>
<p>Ajuste del <strong>umbral</strong> para clasificar.</p></li>
</ul></li>
</ol>
</section>
<section id="matriz-de-confusión-sensibilidad-especificidad" class="level2" data-number="7.9">
<h2 data-number="7.9" class="anchored" data-anchor-id="matriz-de-confusión-sensibilidad-especificidad"><span class="header-section-number">7.9</span> Matriz de confusión + sensibilidad /especificidad</h2>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>cm <span class="ot">&lt;-</span> <span class="fu">conf_mat</span>(pred_cls, <span class="at">truth =</span> up_next, <span class="at">estimate =</span> .pred_class)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>cm</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          Truth
Prediction DOWN UP
      DOWN   14 16
      UP      0  0</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sensibilidad (TPR) y especificidad (TNR)</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>sens <span class="ot">&lt;-</span> <span class="fu">sens</span>(pred_cls, <span class="at">truth =</span> up_next, <span class="at">estimate =</span> .pred_class, <span class="at">event_level =</span> <span class="st">"second"</span>)  <span class="co"># 'UP' es el segundo nivel</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>spec <span class="ot">&lt;-</span> <span class="fu">spec</span>(pred_cls, <span class="at">truth =</span> up_next, <span class="at">estimate =</span> .pred_class, <span class="at">event_level =</span> <span class="st">"second"</span>)</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a><span class="fu">bind_rows</span>(sens, spec) <span class="sc">|&gt;</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">|&gt;</span> <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Sensibilidad y Especificidad (umbral 0.5)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ugufybehlm" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ugufybehlm table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ugufybehlm thead, #ugufybehlm tbody, #ugufybehlm tfoot, #ugufybehlm tr, #ugufybehlm td, #ugufybehlm th {
  border-style: none;
}

#ugufybehlm p {
  margin: 0;
  padding: 0;
}

#ugufybehlm .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ugufybehlm .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ugufybehlm .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ugufybehlm .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ugufybehlm .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ugufybehlm .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ugufybehlm .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ugufybehlm .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ugufybehlm .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ugufybehlm .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ugufybehlm .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ugufybehlm .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ugufybehlm .gt_spanner_row {
  border-bottom-style: hidden;
}

#ugufybehlm .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ugufybehlm .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ugufybehlm .gt_from_md > :first-child {
  margin-top: 0;
}

#ugufybehlm .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ugufybehlm .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ugufybehlm .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ugufybehlm .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ugufybehlm .gt_row_group_first td {
  border-top-width: 2px;
}

#ugufybehlm .gt_row_group_first th {
  border-top-width: 2px;
}

#ugufybehlm .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugufybehlm .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ugufybehlm .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ugufybehlm .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ugufybehlm .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugufybehlm .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ugufybehlm .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ugufybehlm .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ugufybehlm .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ugufybehlm .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ugufybehlm .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugufybehlm .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ugufybehlm .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ugufybehlm .gt_left {
  text-align: left;
}

#ugufybehlm .gt_center {
  text-align: center;
}

#ugufybehlm .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ugufybehlm .gt_font_normal {
  font-weight: normal;
}

#ugufybehlm .gt_font_bold {
  font-weight: bold;
}

#ugufybehlm .gt_font_italic {
  font-style: italic;
}

#ugufybehlm .gt_super {
  font-size: 65%;
}

#ugufybehlm .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ugufybehlm .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ugufybehlm .gt_indent_1 {
  text-indent: 5px;
}

#ugufybehlm .gt_indent_2 {
  text-indent: 10px;
}

#ugufybehlm .gt_indent_3 {
  text-indent: 15px;
}

#ugufybehlm .gt_indent_4 {
  text-indent: 20px;
}

#ugufybehlm .gt_indent_5 {
  text-indent: 25px;
}

#ugufybehlm .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ugufybehlm div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Sensibilidad y Especificidad (umbral 0.5)</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id="a.estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="a.estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers=".metric">sens</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers=".estimate">0</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=".metric">spec</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers=".estimate">1</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li><p><strong>14 aciertos en DOWN</strong> → el modelo predijo <em>DOWN</em> cuando realmente fue <em>DOWN</em>.</p>
<p><strong>16 errores en UP</strong> → el modelo siempre predijo <em>DOWN</em>, incluso cuando la realidad era <em>UP</em>.</p>
<p><strong>0 aciertos en UP</strong> → el modelo nunca predijo <em>UP</em>.</p>
<ul>
<li><p><strong>Sensibilidad (Recall para UP):</strong></p>
<ul>
<li><p>La sensibilidad mide la capacidad de detectar correctamente los positivos (<em>UP</em>).</p>
<p>Aquí es <strong>0%</strong>, porque nunca se predijo <em>UP</em> cuando realmente ocurrió.</p>
<p>⚠️ El modelo <strong>falla totalmente en detectar la clase UP</strong>.</p></li>
<li><p><strong>Especificidad (Recall para DOWN): 1</strong></p></li>
<li><p>La especificidad mide la capacidad de detectar correctamente los negativos (<em>DOWN</em>).</p>
<p>Aquí es <strong>100%</strong>, porque <strong>todo lo que fue DOWN se predijo como DOWN</strong>.</p>
<p>Pero ojo: esto se logra porque el modelo <strong>siempre predice DOWN</strong>, lo cual sesga completamente los resultados.</p></li>
</ul></li>
<li><p>El modelo está <strong>totalmente sesgado hacia la clase DOWN</strong>.</p>
<p>Esto es típico en un problema de <strong>desbalance de clases</strong>: si hay más casos de <em>DOWN</em> en los datos de entrenamiento, el modelo aprende a “jugar seguro” prediciendo siempre esa clase.</p>
<p>Por eso:</p>
<ul>
<li><p>Accuracy global bajo (≈47%)</p>
<p>Kappa = 0 (no mejor que el azar).</p>
<p>Sensibilidad = 0 (incapaz de detectar <em>UP</em>).</p>
<p>Especificidad = 1 (detecta bien <em>DOWN</em>, pero por sesgo, no por aprendizaje real).</p></li>
</ul></li>
</ul></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(train_cls<span class="sc">$</span>up_next) <span class="sc">/</span> <span class="fu">nrow</span>(train_cls)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
     DOWN        UP 
0.4830508 0.5169492 </code></pre>
</div>
</div>
<section id="curva-rocauc-y-pr-auc" class="level3" data-number="7.9.1">
<h3 data-number="7.9.1" class="anchored" data-anchor-id="curva-rocauc-y-pr-auc"><span class="header-section-number">7.9.1</span> <strong>Curva ROC/AUC y Pr AUC</strong></h3>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">roc_auc</span>(pred_cls, <span class="at">truth =</span> up_next, .pred_UP, <span class="at">event_level =</span> <span class="st">"second"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  .metric .estimator .estimate
  &lt;chr&gt;   &lt;chr&gt;          &lt;dbl&gt;
1 roc_auc binary         0.585</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>roc_df <span class="ot">&lt;-</span> <span class="fu">roc_curve</span>(pred_cls, <span class="at">truth =</span> up_next, .pred_UP, <span class="at">event_level =</span> <span class="st">"second"</span>)</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(roc_df) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"ROC Curve (Logistic glm)"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>pr_df <span class="ot">&lt;-</span> <span class="fu">pr_curve</span>(pred_cls, <span class="at">truth =</span> up_next, .pred_UP, <span class="at">event_level =</span> <span class="st">"second"</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(pr_df) <span class="sc">+</span> <span class="fu">ggtitle</span>(<span class="st">"Precision–Recall Curve"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Curso_ML_Final_files/figure-html/unnamed-chunk-49-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Por qué:</strong> ROC/AUC resumen discriminación global; PR-AUC útil cuando la clase positiva es rara.</p>
</section>
</section>
<section id="resultados-clave" class="level2" data-number="7.10">
<h2 data-number="7.10" class="anchored" data-anchor-id="resultados-clave"><span class="header-section-number">7.10</span> Resultados clave</h2>
<p><strong>ROC AUC = 0.585</strong></p>
<ul>
<li><p>El área bajo la curva ROC mide la capacidad del modelo para discriminar entre <em>UP</em> y <em>DOWN</em>.</p>
<ul>
<li><p>Un valor de <strong>0.5 indica azar puro</strong>, y <strong>1.0 indica discriminación perfecta</strong>.</p></li>
<li><p>Con <strong>0.585</strong>, tu modelo discrimina apenas un poco mejor que el azar, lo cual es <strong>débil desempeño</strong>.</p></li>
</ul>
<p><strong>Curva ROC</strong></p>
<ul>
<li><p>La curva está muy cercana a la diagonal (línea punteada = azar).</p></li>
<li><p>Esto confirma que el poder predictivo es bajo: el modelo no logra separar bien entre positivos (UP) y negativos (DOWN).</p></li>
</ul>
<p><strong>Curva Precisión–Recall</strong></p>
<ul>
<li><p>La precisión cae rápido a medida que aumenta el recall.</p>
<p>Esto muestra que cuando intentas capturar más casos <em>UP</em> (mayor recall), lo haces a costa de perder precisión (muchos falsos positivos).</p>
<p>Una curva que se mantiene alta y hacia la esquina superior derecha indicaría buen desempeño, pero aquí está bastante dispersa.</p></li>
</ul></li>
</ul>
<section id="afinar-umbral" class="level3" data-number="7.10.1">
<h3 data-number="7.10.1" class="anchored" data-anchor-id="afinar-umbral"><span class="header-section-number">7.10.1</span> Afinar umbral</h3>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 1) Curva PR (precision &amp; recall por umbral)</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>pr_tbl <span class="ot">&lt;-</span> <span class="fu">pr_curve</span>(pred_cls,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>                   <span class="at">truth =</span> up_next, </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>                   .pred_UP,                 <span class="co"># sin "estimate ="</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>                   <span class="at">event_level =</span> <span class="st">"second"</span>)   <span class="co"># 'UP' es la clase positiva</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Calcular F1 por umbral y elegir el mejor</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>best_row <span class="ot">&lt;-</span> pr_tbl <span class="sc">%&gt;%</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(.threshold)) <span class="sc">%&gt;%</span>               <span class="co"># descarta el punto inicial (NA)</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">F1 =</span> <span class="dv">2</span> <span class="sc">*</span> precision <span class="sc">*</span> recall <span class="sc">/</span> (precision <span class="sc">+</span> recall)) <span class="sc">%&gt;%</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(F1)) <span class="sc">%&gt;%</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>best_row</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 4
  .threshold recall precision    F1
       &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
1      0.101  0.938       0.6 0.732</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>thr <span class="ot">&lt;-</span> best_row<span class="sc">$</span>.threshold</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Re-clasificar con el umbral óptimo y evaluar</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>pred_thr <span class="ot">&lt;-</span> pred_cls <span class="sc">%&gt;%</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">.pred_class_thr =</span> <span class="fu">factor</span>(<span class="fu">if_else</span>(.pred_UP <span class="sc">&gt;=</span> thr, <span class="st">"UP"</span>, <span class="st">"DOWN"</span>),</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"DOWN"</span>,<span class="st">"UP"</span>)))</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="fu">metrics</span>(pred_thr, <span class="at">truth =</span> up_next, <span class="at">estimate =</span> .pred_class_thr) <span class="sc">%&gt;%</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="fu">paste0</span>(<span class="st">"Métricas con umbral óptimo (F1) = "</span>, <span class="fu">round</span>(thr, <span class="dv">3</span>)))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="rayyfuoioz" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rayyfuoioz table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rayyfuoioz thead, #rayyfuoioz tbody, #rayyfuoioz tfoot, #rayyfuoioz tr, #rayyfuoioz td, #rayyfuoioz th {
  border-style: none;
}

#rayyfuoioz p {
  margin: 0;
  padding: 0;
}

#rayyfuoioz .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rayyfuoioz .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rayyfuoioz .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rayyfuoioz .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rayyfuoioz .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rayyfuoioz .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rayyfuoioz .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rayyfuoioz .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rayyfuoioz .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rayyfuoioz .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rayyfuoioz .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rayyfuoioz .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rayyfuoioz .gt_spanner_row {
  border-bottom-style: hidden;
}

#rayyfuoioz .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rayyfuoioz .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rayyfuoioz .gt_from_md > :first-child {
  margin-top: 0;
}

#rayyfuoioz .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rayyfuoioz .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rayyfuoioz .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rayyfuoioz .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rayyfuoioz .gt_row_group_first td {
  border-top-width: 2px;
}

#rayyfuoioz .gt_row_group_first th {
  border-top-width: 2px;
}

#rayyfuoioz .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rayyfuoioz .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rayyfuoioz .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rayyfuoioz .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rayyfuoioz .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rayyfuoioz .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rayyfuoioz .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rayyfuoioz .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rayyfuoioz .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rayyfuoioz .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rayyfuoioz .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rayyfuoioz .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rayyfuoioz .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rayyfuoioz .gt_left {
  text-align: left;
}

#rayyfuoioz .gt_center {
  text-align: center;
}

#rayyfuoioz .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rayyfuoioz .gt_font_normal {
  font-weight: normal;
}

#rayyfuoioz .gt_font_bold {
  font-weight: bold;
}

#rayyfuoioz .gt_font_italic {
  font-style: italic;
}

#rayyfuoioz .gt_super {
  font-size: 65%;
}

#rayyfuoioz .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rayyfuoioz .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rayyfuoioz .gt_indent_1 {
  text-indent: 5px;
}

#rayyfuoioz .gt_indent_2 {
  text-indent: 10px;
}

#rayyfuoioz .gt_indent_3 {
  text-indent: 15px;
}

#rayyfuoioz .gt_indent_4 {
  text-indent: 20px;
}

#rayyfuoioz .gt_indent_5 {
  text-indent: 25px;
}

#rayyfuoioz .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rayyfuoioz div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Métricas con umbral óptimo (F1) = 0.101</th>
</tr>
<tr class="odd gt_col_headings">
<th id="a.metric" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.metric</th>
<th id="a.estimator" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">.estimator</th>
<th id="a.estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">.estimate</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers=".metric">accuracy</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers=".estimate">0.6333333</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers=".metric">kap</td>
<td class="gt_row gt_left" headers=".estimator">binary</td>
<td class="gt_row gt_right" headers=".estimate">0.2325581</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="resultados-con-umbral-óptimo-f1" class="level2" data-number="7.11">
<h2 data-number="7.11" class="anchored" data-anchor-id="resultados-con-umbral-óptimo-f1"><span class="header-section-number">7.11</span> Resultados con umbral óptimo (F1)</h2>
<ul>
<li><p><strong>Umbral = 0.101</strong><br>
→ Esto significa que cualquier probabilidad de <em>UP</em> ≥ 0.101 se clasifica como <em>UP</em>.<br>
→ Es un umbral <strong>mucho más bajo que 0.5</strong>, lo que permite al modelo detectar casos <em>UP</em> que antes ignoraba.</p>
<p><strong>Recall (sensibilidad para UP) = 0.938</strong><br>
→ El modelo ahora <strong>detecta el 93.7% de los casos UP</strong>.<br>
→ Excelente mejora (antes era 0%).</p>
<p><strong>Precision (precisión para UP) = 0.60</strong><br>
→ De todas las predicciones <em>UP</em>, el 60% fueron correctas.<br>
→ Aceptable, considerando que antes era inexistente.</p>
<p><strong>F1 = 0.731</strong><br>
→ El F1 combina recall y precision.<br>
→ Mejoró sustancialmente (antes ≈0).</p>
<p><strong>Accuracy = 0.633</strong><br>
→ El modelo acierta en el 63.3% de los casos totales.<br>
→ Mejor que el azar (50%) y también mejor que con umbral 0.5 (46.7%).</p>
<p><strong>Kappa = 0.233</strong><br>
→ Aún bajo, pero mejor que 0.<br>
→ Indica un acuerdo débil, aunque ya superior al azar.</p></li>
</ul>
</section>
<section id="interpretación-1" class="level2" data-number="7.12">
<h2 data-number="7.12" class="anchored" data-anchor-id="interpretación-1"><span class="header-section-number">7.12</span> 🔎 Interpretación</h2>
<ol type="1">
<li><p>El ajuste de umbral <strong>corrige el sesgo</strong>: ahora el modelo sí detecta <em>UP</em>.</p></li>
<li><p>El costo: aumenta la probabilidad de falsos positivos, pero se logra un balance mejor entre sensibilidad y precisión.</p></li>
<li><p>Este cambio <strong>mejora notablemente la utilidad práctica del modelo</strong>, especialmente si es crítico no perder casos <em>UP</em>.</p></li>
<li><p>Sin embargo, la <strong>AUC (≈0.58)</strong> muestra que la capacidad discriminativa del modelo sigue siendo limitada.</p></li>
</ol>
</section>
<section id="recomendaciones" class="level2" data-number="7.13">
<h2 data-number="7.13" class="anchored" data-anchor-id="recomendaciones"><span class="header-section-number">7.13</span> 🚀 Recomendaciones</h2>
<ul>
<li><p><strong>Mantener este análisis como evidencia</strong> de que el umbral fijo 0.5 no era adecuado.</p>
<p>Explorar técnicas adicionales para mejorar la discriminación:</p>
<ul>
<li><p>Balanceo de clases en el entrenamiento (SMOTE, undersampling, oversampling).</p></li>
<li><p>Modelos no lineales (árboles, random forest, XGBoost).</p></li>
<li><p>Inclusión de más variables predictoras relevantes.</p></li>
</ul>
<p>Reportar tanto las métricas con <strong>umbral estándar (0.5)</strong> como con <strong>umbral optimizado (≈0.101)</strong> para mostrar la ganancia.</p></li>
</ul>
<p>📌 Resumen:<br>
Con el umbral optimizado (0.101), el modelo pasó de <strong>“no detectar nunca UP”</strong> a <strong>capturar casi todos los UP (93.7% de recall)</strong>, con un nivel razonable de precisión (60%) y una mejora clara en exactitud y F1.</p>
<section id="interpretación-del-modelo" class="level3" data-number="7.13.1">
<h3 data-number="7.13.1" class="anchored" data-anchor-id="interpretación-del-modelo"><span class="header-section-number">7.13.1</span> <strong>Interpretación del Modelo</strong></h3>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraer el glm "interno" y ver coeficientes</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>eng_log <span class="ot">&lt;-</span> fit_log <span class="sc">|&gt;</span> <span class="fu">extract_fit_engine</span>()   <span class="co"># objeto glm</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(eng_log)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
stats::glm(formula = ..y ~ ., family = stats::binomial, data = data)

Coefficients:
            Estimate Std. Error z value Pr(&gt;|z|)   
(Intercept)  0.08030    0.19643   0.409  0.68267   
dollar_ret  -0.15646    0.24280  -0.644  0.51933   
wti_ret     -0.04014    0.23044  -0.174  0.86170   
infl_yoy    -0.38921    0.23832  -1.633  0.10244   
ma6         -0.30566    0.20723  -1.475  0.14022   
rsi14        0.62340    0.22838   2.730  0.00634 **
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 163.45  on 117  degrees of freedom
Residual deviance: 148.93  on 112  degrees of freedom
AIC: 160.93

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Odds Ratios (e^beta) y CIs</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>coefs <span class="ot">&lt;-</span> broom<span class="sc">::</span><span class="fu">tidy</span>(eng_log, <span class="at">conf.int =</span> <span class="cn">TRUE</span>, <span class="at">exponentiate =</span> <span class="cn">TRUE</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gt</span>(coefs) <span class="sc">|&gt;</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(<span class="at">title =</span> <span class="st">"Odds Ratios (exp(beta)) – glm"</span>) <span class="sc">|&gt;</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(<span class="fu">c</span>(estimate, conf.low, conf.high), <span class="at">decimals =</span> <span class="dv">3</span>, <span class="at">dec_mark =</span> <span class="st">","</span>, <span class="at">sep_mark =</span> <span class="st">"."</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div id="ptfkhvvgpq" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#ptfkhvvgpq table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#ptfkhvvgpq thead, #ptfkhvvgpq tbody, #ptfkhvvgpq tfoot, #ptfkhvvgpq tr, #ptfkhvvgpq td, #ptfkhvvgpq th {
  border-style: none;
}

#ptfkhvvgpq p {
  margin: 0;
  padding: 0;
}

#ptfkhvvgpq .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#ptfkhvvgpq .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#ptfkhvvgpq .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#ptfkhvvgpq .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#ptfkhvvgpq .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ptfkhvvgpq .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ptfkhvvgpq .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#ptfkhvvgpq .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#ptfkhvvgpq .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#ptfkhvvgpq .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#ptfkhvvgpq .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#ptfkhvvgpq .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#ptfkhvvgpq .gt_spanner_row {
  border-bottom-style: hidden;
}

#ptfkhvvgpq .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#ptfkhvvgpq .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#ptfkhvvgpq .gt_from_md > :first-child {
  margin-top: 0;
}

#ptfkhvvgpq .gt_from_md > :last-child {
  margin-bottom: 0;
}

#ptfkhvvgpq .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#ptfkhvvgpq .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#ptfkhvvgpq .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#ptfkhvvgpq .gt_row_group_first td {
  border-top-width: 2px;
}

#ptfkhvvgpq .gt_row_group_first th {
  border-top-width: 2px;
}

#ptfkhvvgpq .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptfkhvvgpq .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#ptfkhvvgpq .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#ptfkhvvgpq .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ptfkhvvgpq .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptfkhvvgpq .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#ptfkhvvgpq .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#ptfkhvvgpq .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#ptfkhvvgpq .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#ptfkhvvgpq .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ptfkhvvgpq .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptfkhvvgpq .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#ptfkhvvgpq .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#ptfkhvvgpq .gt_left {
  text-align: left;
}

#ptfkhvvgpq .gt_center {
  text-align: center;
}

#ptfkhvvgpq .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#ptfkhvvgpq .gt_font_normal {
  font-weight: normal;
}

#ptfkhvvgpq .gt_font_bold {
  font-weight: bold;
}

#ptfkhvvgpq .gt_font_italic {
  font-style: italic;
}

#ptfkhvvgpq .gt_super {
  font-size: 65%;
}

#ptfkhvvgpq .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#ptfkhvvgpq .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#ptfkhvvgpq .gt_indent_1 {
  text-indent: 5px;
}

#ptfkhvvgpq .gt_indent_2 {
  text-indent: 10px;
}

#ptfkhvvgpq .gt_indent_3 {
  text-indent: 15px;
}

#ptfkhvvgpq .gt_indent_4 {
  text-indent: 20px;
}

#ptfkhvvgpq .gt_indent_5 {
  text-indent: 25px;
}

#ptfkhvvgpq .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#ptfkhvvgpq div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="7" class="gt_heading gt_title gt_font_normal gt_bottom_border">Odds Ratios (exp(beta)) – glm</th>
</tr>
<tr class="odd gt_col_headings">
<th id="term" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">term</th>
<th id="estimate" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">estimate</th>
<th id="std.error" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">std.error</th>
<th id="statistic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">statistic</th>
<th id="p.value" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">p.value</th>
<th id="conf.low" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">conf.low</th>
<th id="conf.high" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">conf.high</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="term">(Intercept)</td>
<td class="gt_row gt_right" headers="estimate">1,084</td>
<td class="gt_row gt_right" headers="std.error">0.1964262</td>
<td class="gt_row gt_right" headers="statistic">0.4088284</td>
<td class="gt_row gt_right" headers="p.value">0.682665565</td>
<td class="gt_row gt_right" headers="conf.low">0,737</td>
<td class="gt_row gt_right" headers="conf.high">1,597</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">dollar_ret</td>
<td class="gt_row gt_right" headers="estimate">0,855</td>
<td class="gt_row gt_right" headers="std.error">0.2428014</td>
<td class="gt_row gt_right" headers="statistic">-0.6443786</td>
<td class="gt_row gt_right" headers="p.value">0.519329986</td>
<td class="gt_row gt_right" headers="conf.low">0,521</td>
<td class="gt_row gt_right" headers="conf.high">1,369</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">wti_ret</td>
<td class="gt_row gt_right" headers="estimate">0,961</td>
<td class="gt_row gt_right" headers="std.error">0.2304401</td>
<td class="gt_row gt_right" headers="statistic">-0.1742089</td>
<td class="gt_row gt_right" headers="p.value">0.861701275</td>
<td class="gt_row gt_right" headers="conf.low">0,610</td>
<td class="gt_row gt_right" headers="conf.high">1,552</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">infl_yoy</td>
<td class="gt_row gt_right" headers="estimate">0,678</td>
<td class="gt_row gt_right" headers="std.error">0.2383194</td>
<td class="gt_row gt_right" headers="statistic">-1.6331516</td>
<td class="gt_row gt_right" headers="p.value">0.102437106</td>
<td class="gt_row gt_right" headers="conf.low">0,413</td>
<td class="gt_row gt_right" headers="conf.high">1,062</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="term">ma6</td>
<td class="gt_row gt_right" headers="estimate">0,737</td>
<td class="gt_row gt_right" headers="std.error">0.2072296</td>
<td class="gt_row gt_right" headers="statistic">-1.4749850</td>
<td class="gt_row gt_right" headers="p.value">0.140216584</td>
<td class="gt_row gt_right" headers="conf.low">0,485</td>
<td class="gt_row gt_right" headers="conf.high">1,099</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="term">rsi14</td>
<td class="gt_row gt_right" headers="estimate">1,865</td>
<td class="gt_row gt_right" headers="std.error">0.2283835</td>
<td class="gt_row gt_right" headers="statistic">2.7296312</td>
<td class="gt_row gt_right" headers="p.value">0.006340522</td>
<td class="gt_row gt_right" headers="conf.low">1,207</td>
<td class="gt_row gt_right" headers="conf.high">2,973</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="resumen-del-modelo" class="level2" data-number="7.14">
<h2 data-number="7.14" class="anchored" data-anchor-id="resumen-del-modelo"><span class="header-section-number">7.14</span> Resumen del modelo</h2>
<p>Se ajustó un <strong>GLM binomial (logit)</strong> para explicar la probabilidad de que la variable dependiente yyy tome valor 1, en función de:</p>
<ul>
<li><p><strong>dollar_ret</strong> (retorno del dólar)</p></li>
<li><p><strong>wti_ret</strong> (retorno del petróleo WTI)</p></li>
<li><p><strong>infl_yoy</strong> (inflación interanual)</p></li>
<li><p><strong>ma6</strong> (media móvil a 6 periodos)</p></li>
<li><p><strong>rsi14</strong> (indicador técnico RSI 14 días.</p></li>
</ul>
</section>
<section id="coeficientes-log-odds" class="level2" data-number="7.15">
<h2 data-number="7.15" class="anchored" data-anchor-id="coeficientes-log-odds"><span class="header-section-number">7.15</span> Coeficientes (log-odds)</h2>
<p>En el primer cuadro (<code>summary(eng_log)</code>):</p>
<ul>
<li><p>Los coeficientes representan cambios en los <strong>log-odds</strong> de que <span class="math inline">\(Y\)</span>=1.</p></li>
<li><p>El signo indica la dirección del efecto:</p>
<ul>
<li><p><strong>Negativo</strong> → reduce la probabilidad de éxito.</p></li>
<li><p><strong>Positivo</strong> → aumenta la probabilidad de éxito.</p></li>
</ul>
<p>La <strong>columna Pr(&gt;|z|)</strong> indica si el efecto es estadísticamente significativo.</p></li>
<li><p>Resultados principales:</p>
<p><strong>Intercepto</strong>: 0.080 (p=0.682). No significativo.</p>
<p><strong>dollar_ret</strong>: -0.156 (p=0.519). No significativo.</p>
<p><strong>wti_ret</strong>: -0.040 (p=0.861). No significativo.</p>
<p><strong>infl_yoy</strong>: -0.389 (p=0.102). Cercano a significancia, indica que mayor inflación podría reducir la probabilidad de éxito.</p>
<p><strong>ma6</strong>: -0.306 (p=0.140). No significativo, pero con tendencia negativa.</p>
<p><strong>rsi14</strong>: 0.623 (p=0.006). <strong>Significativo al 1%</strong>, fuerte predictor positivo.</p></li>
</ul>
</section>
<section id="odds-ratios-expbeta" class="level2" data-number="7.16">
<h2 data-number="7.16" class="anchored" data-anchor-id="odds-ratios-expbeta"><span class="header-section-number">7.16</span> Odds Ratios (exp(beta))</h2>
<p>En la tabla de <strong>odds ratios</strong> (segunda imagen):</p>
<ul>
<li><p><strong>Interpretación</strong>: valores &gt;1 indican que un aumento en la variable <strong>incrementa la probabilidad de éxito</strong>; &lt;1 indican lo contrario.</p></li>
<li><p>Incluyen intervalos de confianza al 95%.</p></li>
<li><p>Resultados principales:</p>
<p><strong>dollar_ret (0.855, IC 0.521–1.369)</strong> → efecto negativo, pero no significativo.</p>
<p><strong>wti_ret (0.961, IC 0.610–1.552)</strong> → prácticamente sin efecto, no significativo.</p>
<p><strong>infl_yoy (0.678, IC 0.413–1.062)</strong> → reduce la probabilidad (odds más bajos), casi significativo.</p>
<p><strong>ma6 (0.737, IC 0.485–1.099)</strong> → reduce la probabilidad, aunque no significativo.</p>
<p><strong>rsi14 (1.865, IC 1.207–2.973)</strong> → <strong>efecto positivo y significativo</strong>: cada aumento de una unidad en RSI multiplica por 1.86 las odds de que el evento ocurra.</p></li>
</ul>
</section>
<section id="diagnóstico-del-modelo" class="level2" data-number="7.17">
<h2 data-number="7.17" class="anchored" data-anchor-id="diagnóstico-del-modelo"><span class="header-section-number">7.17</span> Diagnóstico del modelo</h2>
<ul>
<li><p><strong>Deviance nula</strong>: 163.45</p></li>
<li><p><strong>Deviance residual</strong>: 148.93<br>
→ El modelo reduce la devianza, pero no de forma drástica.</p></li>
<li><p><strong>AIC = 160.93</strong> → métrica de ajuste y comparación entre modelos (menor es mejor).</p></li>
<li><p><strong>Iteraciones de Fisher: 4</strong> → convergencia rápida, modelo estable.</p></li>
</ul>
</section>
<section id="conclusiones" class="level2" data-number="7.18">
<h2 data-number="7.18" class="anchored" data-anchor-id="conclusiones"><span class="header-section-number">7.18</span> Conclusiones</h2>
<ol type="1">
<li><p>El único predictor robusto es <strong>rsi14</strong>, que aumenta significativamente la probabilidad de éxito en el modelo.</p></li>
<li><p><strong>Inflación (infl_yoy)</strong> muestra un efecto negativo que merece atención, aunque no alcanza significancia al 5% (sí cercana al 10%).</p></li>
<li><p><strong>Retornos del dólar y del WTI</strong> no parecen aportar información relevante en este caso.</p></li>
<li><p>El modelo en general tiene un ajuste moderado (devianza reducida, AIC ~161). Puede mejorarse con:</p>
<ul>
<li><p>Transformaciones de variables.</p></li>
<li><p>Inclusión de nuevas covariables (ej. tasas de interés reales, volatilidad implícita, indicadores técnicos adicionales).</p></li>
<li><p>Modelos no lineales o interacciones.</p></li>
</ul></li>
</ol>
<p>📌 <strong>Interpretación práctica</strong>:<br>
El <strong>RSI de 14 días</strong> es el mejor indicador para explicar la probabilidad de cambio en el oro en este modelo logit. Un aumento en RSI se traduce en casi <strong>el doble de probabilidades</strong> de que el evento ocurra, manteniendo las demás variables constantes.</p>
</section>
</section>
<section id="links-de-interés" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Links de interés</h1>
<ul>
<li><a href="https://quarto.org/">Quarto</a></li>
</ul>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">Referencias</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-ghule2022gold" class="csl-entry" role="listitem">
Ghule, Rushikesh, Abhijeet Gadhave, Manish Dubey, Jyoti Kharade, y Navi Mumbai. 2022. <span>«Gold price prediction using machine learning»</span>. <em>International Journal of Environmental Engineering</em> 6 (2022).
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>